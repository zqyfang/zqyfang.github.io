<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.2" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.2" />






<meta property="og:type" content="website">
<meta property="og:title" content="飞奔的小猿猴">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="飞奔的小猿猴">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="飞奔的小猿猴">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/"/>





  <title>飞奔的小猿猴</title>
  














</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">飞奔的小猿猴</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/09/10/Kotlin基础/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Qiang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="飞奔的小猿猴">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/09/10/Kotlin基础/" itemprop="url">Kotlin基础</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-09-10T11:05:43+08:00">
                2017-09-10
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Kotlin/" itemprop="url" rel="index">
                    <span itemprop="name">Kotlin</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="变量取值范围"><a href="#变量取值范围" class="headerlink" title="变量取值范围"></a>变量取值范围</h1><hr>
<pre><code>Byte: -128~127  1字节 8bit
Short:-32768~32767  2字节
Int:-2147483648~2147483647 4字节
Long:-9223372036854775807~9223372036854775807  8字节
Float:小数，小数点可以精确到6位
Double：小数，小数点可以精确到15-16位
String:字符串，用&quot;&quot;双引号引起来的字符串都可以存
</code></pre><hr>
<h1 id="常量变量"><a href="#常量变量" class="headerlink" title="常量变量"></a>常量变量</h1><blockquote>
<p>var  变量<br> val  常量</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">基本案例：</div><div class="line">	fun main(args: Array&lt;String&gt;) &#123;</div><div class="line">		var i=100</div><div class="line">	//	i=100000000000  上面(自动类型推断)是Int类型,而此时赋值已经超过了int类型取值范围，报错</div><div class="line">		//显式声明变量类型</div><div class="line">		val j:Long=10000000000</div><div class="line">		println(j)</div><div class="line">	&#125;</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">演化案例：</div><div class="line">	fun main(args: Array&lt;String&gt;) &#123;</div><div class="line">		val max_Int:Int=Int.MAX_VALUE</div><div class="line">		val min_Int:Int=Int.MIN_VALUE</div><div class="line">		println(max_Int)</div><div class="line">		println(min_Int)</div><div class="line">		val b:Byte=0b0011</div><div class="line">		println(b)</div><div class="line">	&#125;</div></pre></td></tr></table></figure>
<hr>
<pre><code>输出：
2147483647
-2147483648
3
</code></pre><hr>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">返回值案例：</div><div class="line">	fun main(args: Array&lt;String&gt;):Unit &#123;</div><div class="line">		println(&quot;a+b=&quot;+add(2,8))</div><div class="line">	&#125;</div><div class="line">	fun add(a:Int,b:Int):Int&#123;</div><div class="line">		return a+b</div><div class="line">	&#125;</div><div class="line">	说明：Unit就是无返回值，可以省略不写</div></pre></td></tr></table></figure>
<h1 id="字符串模板"><a href="#字符串模板" class="headerlink" title="字符串模板"></a>字符串模板</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">基本案例：</div><div class="line">	fun main(args: Array&lt;String&gt;) &#123;</div><div class="line">		println(test(&quot;曾强&quot;))</div><div class="line">	&#125;</div><div class="line">	fun test(name:String):String&#123;</div><div class="line">		var str=&quot;&quot;&quot;</div><div class="line">				我啊发不是法术反射看不出$&#123;name&#125;啊师范</div><div class="line">	 啊师范就NSA浪费你$&#123;name.length&#125;vksd</div><div class="line">	 &quot;&quot;&quot;</div><div class="line">		return str</div><div class="line">	&#125;</div><div class="line">	说明：三个双引号，是可换行字符串</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">条件判断案例：</div><div class="line">	fun main(args: Array&lt;String&gt;) &#123;</div><div class="line">		println(&quot;传入的大值是$&#123;test(1,2)&#125;&quot;)</div><div class="line">	&#125;</div><div class="line">	fun test(a:Int,b:Int):Int&#123;</div><div class="line">		if (a&gt;b) return a else return b</div><div class="line">	&#125;</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">字符串比较案例：</div><div class="line">	fun main(args: Array&lt;String&gt;) &#123;</div><div class="line">		var t1=&quot;Ad&quot;</div><div class="line">		var t2=&quot;ad&quot;</div><div class="line">		println(t1==t2)</div><div class="line">		println(t1.equals(t2))</div><div class="line">		println(t1.equals(t2,true))</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	输出：</div><div class="line">	false</div><div class="line">	false</div><div class="line">	true</div><div class="line">	</div><div class="line">	说明：==和equal效果相同，equal参数二true代表忽略大小写，</div><div class="line">	默认是false。</div></pre></td></tr></table></figure>
<h1 id="空值处理"><a href="#空值处理" class="headerlink" title="空值处理"></a>空值处理</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">基本案例：</div><div class="line">	fun main(args: Array&lt;String&gt;) &#123;</div><div class="line">		println(test(null))</div><div class="line">	&#125;</div><div class="line">	fun test(str:String?):String&#123;</div><div class="line">		return &quot;热&quot;+str</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	输出：热null，String后面加上?是为了允许传入空值，不加默认传入null</div><div class="line">	会报错，这就是kotlin的null预判断。</div></pre></td></tr></table></figure>
<h1 id="when表达式"><a href="#when表达式" class="headerlink" title="when表达式"></a>when表达式</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">基本案例：</div><div class="line">说明：when表达式是替换java中switch功能</div><div class="line">	fun main(args: Array&lt;String&gt;) &#123;</div><div class="line">		println(test(1))</div><div class="line">	&#125;</div><div class="line">	fun test(num:Int):String&#123;</div><div class="line">		val result=when(num)&#123;</div><div class="line">			1-&gt;&quot;一&quot;</div><div class="line">			2-&gt;&quot;二&quot;</div><div class="line">			else-&gt;&quot;其他数据&quot;</div><div class="line">		&#125;</div><div class="line">		return result</div><div class="line">	&#125;</div></pre></td></tr></table></figure>
<h1 id="Loop和Range"><a href="#Loop和Range" class="headerlink" title="Loop和Range"></a>Loop和Range</h1><blockquote>
<p>闭区间：[a,b] a到b,包括a,b<br>  开区间：(a,b) a到b,不包括a，b</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">闭区间基本案例：</div><div class="line">	fun main(args: Array&lt;String&gt;) &#123;</div><div class="line">		var nums=1..100</div><div class="line">		var result=0</div><div class="line">		for(num in nums)&#123;</div><div class="line">			result+=num</div><div class="line">		&#125;</div><div class="line">		println(&quot;结果$&#123;result&#125;&quot;)</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	输出：结果5050</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">半开区间基本案例：</div><div class="line">fun main(args: Array&lt;String&gt;) &#123;</div><div class="line">	var nums=1 until 100 [1,100)</div><div class="line">	var result=0</div><div class="line">	for(num in nums)&#123;</div><div class="line">		result+=num</div><div class="line">	&#125;</div><div class="line">	println(&quot;结果$&#123;result&#125;&quot;)</div><div class="line">&#125;</div><div class="line">输出：结果4950</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">其他api案例：</div><div class="line">	fun main(args: Array&lt;String&gt;) &#123;</div><div class="line">		var nums=1 until 10</div><div class="line">		println(&quot;集合长度是$&#123;nums.count()&#125;&quot;)</div><div class="line">		var temp=nums.reversed()//反转集合</div><div class="line">		println(temp)</div><div class="line">		for(t in temp step 2)&#123;  //step步长，输出第一个，然后隔步长在输出</div><div class="line">			println(t)</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	输出：</div><div class="line">	集合长度是9</div><div class="line">	9 downTo 1 step 1</div><div class="line">	9</div><div class="line">	7</div><div class="line">	5</div><div class="line">	3</div><div class="line">	1</div></pre></td></tr></table></figure>
<h1 id="list和Map"><a href="#list和Map" class="headerlink" title="list和Map"></a>list和Map</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">List基本案例：</div><div class="line">	fun main(args: Array&lt;String&gt;) &#123;</div><div class="line">		var lists=listOf(&quot;一&quot;,&quot;二&quot;,&quot;三&quot;)</div><div class="line">		for(list in lists)&#123;</div><div class="line">			println(list)</div><div class="line">		&#125;</div><div class="line">		for((index,value) in lists.withIndex())&#123;</div><div class="line">			println(&quot;$index,$value&quot;)</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	输出：</div><div class="line">		一</div><div class="line">		二</div><div class="line">		三</div><div class="line">		0,一</div><div class="line">		1,二</div><div class="line">		2,三</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line">Map基本案例：</div><div class="line">	import java.util.TreeMap</div><div class="line"></div><div class="line">	fun main(args: Array&lt;String&gt;) &#123;</div><div class="line">		var map = TreeMap&lt;String, String&gt;()</div><div class="line">		map[&quot;一&quot;]=&quot;一&quot;</div><div class="line">		map[&quot;二&quot;]=&quot;二&quot;</div><div class="line">		map[&quot;三&quot;]=&quot;三&quot;</div><div class="line">		println(map[&quot;一&quot;])</div><div class="line">		for(m in map)&#123;</div><div class="line">			println(m)</div><div class="line">		&#125;</div><div class="line">		for(k in map.keys)&#123;</div><div class="line">			println(k)</div><div class="line">		&#125;</div><div class="line">		for(v in map.values)&#123;</div><div class="line">			println(v)</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	输出：</div><div class="line">	一</div><div class="line">	一=一</div><div class="line">	三=三</div><div class="line">	二=二</div><div class="line">	一</div><div class="line">	三</div><div class="line">	二</div><div class="line">	一</div><div class="line">	三</div><div class="line">	二</div><div class="line">	eclipse导包快捷键ctrl+Shift+O</div></pre></td></tr></table></figure>
<hr>
<pre><code>补充：函数式表达式
var i={x:Int,y:Int-&gt;x+y}
var j:(Int,Int)-&gt;Int={x,y-&gt;x+y}
</code></pre><hr>
<h1 id="默认参数"><a href="#默认参数" class="headerlink" title="默认参数"></a>默认参数</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">import java.util.TreeMap</div><div class="line">var Pi=3.14f</div><div class="line">fun main(args: Array&lt;String&gt;) &#123;</div><div class="line">	var s=test(r=3f)</div><div class="line">	println(s) //28.26</div><div class="line">&#125;</div><div class="line">fun test(PI:Float=Pi,r:Float):Float&#123;</div><div class="line">	return PI*r*r</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<hr>
<pre><code>字符串数字转换：
var a=13
    var b=&quot;13&quot;
    println(&quot;${a.toString()},${b.toInt()}&quot;)
</code></pre><hr>
<h1 id="接收输入"><a href="#接收输入" class="headerlink" title="接收输入"></a>接收输入</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">fun main(args: Array&lt;String&gt;) &#123;</div><div class="line">	println(&quot;请输入数字：&quot;)</div><div class="line">	var n1=readLine();</div><div class="line">	println(&quot;请输入数字：&quot;)</div><div class="line">	var n2=readLine()</div><div class="line">	var nn1:Int=n1!!.toInt()</div><div class="line">	var nn2:Int=n2!!.toInt()</div><div class="line">	println(&quot;$&#123;n1&#125;+$&#123;n2&#125;=$&#123;nn1+nn2&#125;&quot;)</div><div class="line">&#125;</div><div class="line">说明：可省略nn1,2的类型，同时n1后面的!!是为确保输入不为空</div></pre></td></tr></table></figure>
<h2 id="异常处理"><a href="#异常处理" class="headerlink" title="异常处理"></a>异常处理</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">fun main(args: Array&lt;String&gt;) &#123;</div><div class="line">	println(&quot;请输入数字：&quot;)</div><div class="line">	var n1=readLine();</div><div class="line">	println(&quot;请输入数字：&quot;)</div><div class="line">	var n2=readLine()</div><div class="line">	try&#123;</div><div class="line">		var nn1=n1!!.toInt()</div><div class="line">		var nn2=n2!!.toInt()</div><div class="line">		println(&quot;$&#123;n1&#125;+$&#123;n2&#125;=$&#123;nn1+nn2&#125;&quot;)</div><div class="line">	&#125;catch(e:Exception)&#123;</div><div class="line">		println(&quot;输入格式不正确&quot;)</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="递归"><a href="#递归" class="headerlink" title="递归"></a>递归</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">基本案例：</div><div class="line">	import java.math.BigInteger</div><div class="line"></div><div class="line">	fun main(args: Array&lt;String&gt;) &#123;</div><div class="line">		println(test(BigInteger(&quot;70&quot;)))</div><div class="line">	&#125;</div><div class="line">	fun test(num:BigInteger):BigInteger&#123;</div><div class="line">		if(num==BigInteger.ONE)&#123;</div><div class="line">			return BigInteger.ONE</div><div class="line">		&#125;else&#123;</div><div class="line">			return num*test(num-BigInteger.ONE)</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">说明：之所以用BigInteger是因为70阶乘很大，Long都会溢出</div></pre></td></tr></table></figure>
<h2 id="尾递归优化"><a href="#尾递归优化" class="headerlink" title="尾递归优化"></a>尾递归优化</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">fun main(args: Array&lt;String&gt;) &#123;</div><div class="line">	println(test(5,0))</div><div class="line">&#125;</div><div class="line">tailrec fun test(num:Int,result:Int):Int&#123;</div><div class="line">	println(&quot;第$&#123;num&#125;,结果是$&#123;result&#125;&quot;)</div><div class="line">	if(num==1)&#123;</div><div class="line">		return 1</div><div class="line">	&#125;else&#123;</div><div class="line">		return test(num-1,num+result)</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line">递归函数前面加上tailrec，同时尾递归的返回值必须是函数本身，所以此时才把加</div><div class="line">运算放到括号内进行</div><div class="line">作用：优化内存，防止栈溢出</div></pre></td></tr></table></figure>
<h1 id="类"><a href="#类" class="headerlink" title="类"></a>类</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">基本案例：</div><div class="line">class Gril(var name:String,var age:Int)&#123;</div><div class="line">    fun say() &#123;</div><div class="line">        println(age)</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">fun main(args: Array&lt;String&gt;) &#123;</div><div class="line">    var g=Gril(&quot;小强&quot;,12)</div><div class="line">    println(g.name) //小强</div><div class="line">    g.say() //12</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="继承"><a href="#继承" class="headerlink" title="继承"></a>继承</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">父类</div><div class="line">open class Father&#123;</div><div class="line">    var name:String=&quot;父亲&quot;</div><div class="line">    open fun action() &#123;</div><div class="line">        println(&quot;大声说话$&#123;name&#125;&quot;)</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">子类</div><div class="line">class Son:Father()&#123;</div><div class="line">    override fun action() &#123;</div><div class="line">        println(&quot;文明礼貌$&#123;name&#125;&quot;)</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">调用</div><div class="line">fun main(args: Array&lt;String&gt;) &#123;</div><div class="line">    var s=Son()</div><div class="line">    s.action()</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line">输出：文明礼貌父亲</div></pre></td></tr></table></figure>
<h2 id="抽象类"><a href="#抽象类" class="headerlink" title="抽象类"></a>抽象类</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">abstract class Human (var name:String)&#123;</div><div class="line">    abstract fun eat()</div><div class="line">&#125;</div><div class="line"></div><div class="line">class Man(name:String):Human(name) &#123;</div><div class="line">    override fun eat() &#123;</div><div class="line">        println(&quot;$&#123;name&#125;大口吃饭&quot;)</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">fun main(args: Array&lt;String&gt;) &#123;</div><div class="line">    var m=Man(&quot;金三胖&quot;)</div><div class="line">    m.eat()</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="多态"><a href="#多态" class="headerlink" title="多态"></a>多态</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line">abstract class Human (var name:String)&#123;</div><div class="line">    abstract fun eat()</div><div class="line">&#125;</div><div class="line"></div><div class="line">class Man(name:String):Human(name) &#123;</div><div class="line">    override fun eat() &#123;</div><div class="line">        println(&quot;$&#123;name&#125;大口吃饭&quot;)</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line">class Woman(name: String):Human(name)&#123;</div><div class="line">    override fun eat() &#123;</div><div class="line">        println(&quot;$&#123;name&#125;小口吃饭&quot;)</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">fun main(args: Array&lt;String&gt;) &#123;</div><div class="line">   var m1=Man(&quot;张三&quot;)</div><div class="line">    var wm1=Woman(&quot;梦娜丽莎&quot;)</div><div class="line">    var m2=Man(&quot;李四&quot;)</div><div class="line">    var wm2=Woman(&quot;慈禧太后&quot;)</div><div class="line">    var list= listOf&lt;Human&gt;(m1,m2,wm1,wm2)</div><div class="line">    for ( l in list) &#123;</div><div class="line">        l.eat()</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="抽象类和接口"><a href="#抽象类和接口" class="headerlink" title="抽象类和接口"></a>抽象类和接口</h2><blockquote>
<p>抽象类：事物的本质<br>  接口：事物的能力</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div></pre></td><td class="code"><pre><div class="line">对比案例：</div><div class="line">interface IMan &#123;</div><div class="line">    fun CXY()</div><div class="line">&#125;</div><div class="line"></div><div class="line">abstract class Human (var name:String)&#123;</div><div class="line">    abstract fun eat()</div><div class="line">&#125;</div><div class="line"></div><div class="line">class Man(name:String):Human(name),IMan &#123;</div><div class="line">    override fun CXY() &#123;</div><div class="line">        println(&quot;男人$&#123;name&#125;是程序猿&quot;)</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    override fun eat() &#123;</div><div class="line">        println(&quot;$&#123;name&#125;大口吃饭&quot;)</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">class Woman(name: String):Human(name)&#123;</div><div class="line">    override fun eat() &#123;</div><div class="line">        println(&quot;$&#123;name&#125;小口吃饭&quot;)</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">fun main(args: Array&lt;String&gt;) &#123;</div><div class="line">   var m1=Man(&quot;张三&quot;)</div><div class="line">    var wm1=Woman(&quot;梦娜丽莎&quot;)</div><div class="line">    var m2=Man(&quot;李四&quot;)</div><div class="line">    var wm2=Woman(&quot;慈禧太后&quot;)</div><div class="line">    var list= listOf&lt;Human&gt;(m1,m2,wm1,wm2)</div><div class="line">    for ( l in list) &#123;</div><div class="line">        if (l is IMan) &#123;</div><div class="line">            l.CXY()</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">输出：</div><div class="line">男人张三是程序猿</div><div class="line">男人李四是程序猿</div></pre></td></tr></table></figure>
<h2 id="委托和代理"><a href="#委托和代理" class="headerlink" title="委托和代理"></a>委托和代理</h2><hr>
<pre><code>委托：把事情托付给别人或别的机构办理
代理：以他人的名义，在授权范围内进行对被代理人直接发生法律效力的行为
</code></pre><hr>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line">基本案例：</div><div class="line">/**</div><div class="line"> * 洗碗的接口</div><div class="line"> */</div><div class="line">interface IWarsh &#123;</div><div class="line">    fun wash()</div><div class="line">&#125;</div><div class="line"></div><div class="line">class DaSon:IWarsh &#123;</div><div class="line">    override fun wash() &#123;</div><div class="line">        println(&quot;我是大头儿子，我洗碗&quot;)</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">class XiaoFather:IWarsh by DaSon()&#123;</div><div class="line">    override fun wash() &#123;</div><div class="line">        println(&quot;我是小头爸爸&quot;)</div><div class="line">        DaSon().wash()</div><div class="line">        println(&quot;看着小头儿子洗碗了&quot;)</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">fun main(args: Array&lt;String&gt;) &#123;</div><div class="line">    var f=XiaoFather()</div><div class="line">    f.wash()</div><div class="line">&#125;</div><div class="line"></div><div class="line">说明：by关键字就是用来做委托代理的，此时小头爸爸把洗碗工作委托给</div><div class="line">大头儿子，注意by后面是对象，所以要加()，注意，如果爸爸类不重写wash方法</div><div class="line">执行之后，还是小头儿子洗碗，只是没有其前面和后面的输出</div><div class="line">输出：</div><div class="line">我是小头爸爸</div><div class="line">我是大头儿子，我洗碗</div><div class="line">看着小头儿子洗碗了</div></pre></td></tr></table></figure>
<h2 id="单例模式"><a href="#单例模式" class="headerlink" title="单例模式"></a>单例模式</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">interface IWarsh &#123;</div><div class="line">    fun wash()</div><div class="line">&#125;</div><div class="line"></div><div class="line">object  DaSon:IWarsh &#123;//此时class被替换位object，则DaSon在内存中只存在一份，是单例</div><div class="line">    override fun wash() &#123;</div><div class="line">        println(&quot;我是大头儿子，我洗碗&quot;)</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">class XiaoFather:IWarsh by DaSon&#123;//此处也不需要DaSon()了，因为DaSon只存在一份</div><div class="line">    override fun wash() &#123;</div><div class="line">        println(&quot;我是小头爸爸&quot;)</div><div class="line">        DaSon.wash() //此处使用也是没有()的</div><div class="line">        println(&quot;看着小头儿子洗碗了&quot;)</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">fun main(args: Array&lt;String&gt;) &#123;</div><div class="line">    var f=XiaoFather()</div><div class="line">    f.wash()</div><div class="line">    var f1=DaSon</div><div class="line">    var f2=DaSon</div><div class="line">    println(f1==f2) //true</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="枚举类"><a href="#枚举类" class="headerlink" title="枚举类"></a>枚举类</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">enum class Week&#123;</div><div class="line">    星期一, 星期二, 星期三, 星期四, 星期五</div><div class="line">&#125;</div><div class="line"></div><div class="line">fun main(args: Array&lt;String&gt;) &#123;</div><div class="line">    println(Week.星期三.ordinal) //2</div><div class="line">&#125;</div><div class="line">说明：ordinal输出前面值在枚举类中的位置，从0开始</div></pre></td></tr></table></figure>
<h2 id="印章类"><a href="#印章类" class="headerlink" title="印章类"></a>印章类</h2><blockquote>
<p>Sealed class 子类类型有限的class<br>Sealed class更在意数据类型，枚举更在意数据</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">sealed class Human&#123;</div><div class="line">    fun say()&#123;</div><div class="line">        println(&quot;进入&quot;)</div><div class="line">    &#125;</div><div class="line">    class Man():Human()</div><div class="line">    class WoMan():Human()</div><div class="line">&#125;</div><div class="line"></div><div class="line">fun main(args: Array&lt;String&gt;) &#123;</div><div class="line">    var m:Human=Human.Man()</div><div class="line">    m.say()</div><div class="line">    var w:Human=Human.WoMan()</div><div class="line">    w.say()</div><div class="line">&#125;</div><div class="line"></div><div class="line">说明：sealed添加之后代表印章类，其不能直接创建对象，而且只能创建指定范围内的对象。</div></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/08/27/进程和线程/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Qiang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="飞奔的小猿猴">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/08/27/进程和线程/" itemprop="url">Python进程和线程</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-08-27T20:28:00+08:00">
                2017-08-27
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Python/" itemprop="url" rel="index">
                    <span itemprop="name">Python</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="多任务"><a href="#多任务" class="headerlink" title="多任务"></a>多任务</h1><hr>
<pre><code>并发：看上去一起执行
并行：真正一起执行
</code></pre><hr>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">创建子进程案例：</div><div class="line">import os</div><div class="line">import time</div><div class="line">ret=os.fork()</div><div class="line">if ret==0:</div><div class="line">    while True:</div><div class="line">        print(&quot;------1-------&quot;)</div><div class="line">        time.sleep(1)</div><div class="line">else:</div><div class="line">    while True:</div><div class="line">        print(&quot;-------2-------&quot;)</div><div class="line">        time.sleep(1)</div><div class="line">说明：每隔1秒钟输出一次</div><div class="line">----2-----</div><div class="line">----1-----</div></pre></td></tr></table></figure>
<hr>
<pre><code>解析：ret=os.fork()会在主进程前提下，在创建一个子进程。其中主进程返回值大于0，子进程返回值
等于0，相当于有两份同样代码在不同内存空间执行，fork在mac和linux下可用。
但是因为系统不同，硬件不同，父进程时先创建，但是不见得是先执行，所以执行结果不定。
</code></pre><hr>
<hr>
<pre><code>补充：
os.getpid() : 返回当前进程的进程号
os.getppid() : 返回创建当前子进程的父进程的进程号。
一般：父进程中fork的返回值就是刚刚创建出来的子进程的端口号
</code></pre><hr>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">父子进程的先后顺序：</div><div class="line">import os</div><div class="line">import time</div><div class="line">ret=os.fork()</div><div class="line">if ret==0:</div><div class="line">        print(&quot;------1-------&quot;)</div><div class="line">        time.sleep(3)</div><div class="line">        print(&quot;------11-------&quot;)</div><div class="line">else:</div><div class="line">        print(&quot;-------2-------&quot;)</div><div class="line">        time.sleep(2)</div><div class="line"></div><div class="line">print(&quot;over&quot;)</div></pre></td></tr></table></figure>
<hr>
<pre><code>说明：over输出两次，主进程输出2，然后子进程输出1，然后输出第一个over，之所以
第一个over先输出是因为time.sleep(2)然后此时over输出代表主进程已经在要开始输出
over之前已经结束，所以主进程不会因为子进程没有结束而等待。之后输出11，over，子进程结束。
代码是同一份代码，但是数据是不同的数据，所以不同进程修改全局变量，是不共享的。
</code></pre><hr>
<h2 id="多个fork"><a href="#多个fork" class="headerlink" title="多个fork"></a>多个fork</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">import os</div><div class="line">ret=os.fork()</div><div class="line">if ret==0:</div><div class="line">        print(&quot;------1-------&quot;)</div><div class="line">else:</div><div class="line">        print(&quot;-------2-------&quot;)</div><div class="line">ret1=os.fork()</div><div class="line">if ret1==0:</div><div class="line">        print(&quot;----11------&quot;)</div><div class="line">else:</div><div class="line">        print(&quot;-----22------&quot;)</div><div class="line">print(&quot;----执行----&quot;)</div></pre></td></tr></table></figure>
<blockquote>
<p>说明：多个fork就像二叉树一样，分支结构，例如此时执行输出4次，如果是三层fork则输出8次。<br>上的输出结果是 1,2各一次，11，22各两次。</p>
</blockquote>
<h2 id="fork炸弹"><a href="#fork炸弹" class="headerlink" title="fork炸弹"></a>fork炸弹</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">import os</div><div class="line">while True:</div><div class="line">        ret=os.fork()</div><div class="line">说明：会系统崩溃。</div></pre></td></tr></table></figure>
<h2 id="跨平台的多进程"><a href="#跨平台的多进程" class="headerlink" title="跨平台的多进程"></a>跨平台的多进程</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">案例：</div><div class="line">from multiprocessing import Process</div><div class="line">import time</div><div class="line"></div><div class="line"></div><div class="line">def test():</div><div class="line">    while True:</div><div class="line">        print(&quot;---test-----&quot;)</div><div class="line">        time.sleep(1)</div><div class="line"></div><div class="line">if __name__ == &apos;__main__&apos;:</div><div class="line">    p = Process(target=test)</div><div class="line">    p.start()</div><div class="line">    while True:</div><div class="line">        print(&quot;-----main-----&quot;)</div><div class="line">        time.sleep(1)</div></pre></td></tr></table></figure>
<hr>
<pre><code>说明：Process模块是对不同平台下多进程的封装，在不同平台下，实现不同，但是上层代码相同。
输出：
----main-------
----test------
每隔一秒钟输出一次。
</code></pre><hr>
<h1 id="Process"><a href="#Process" class="headerlink" title="Process"></a>Process</h1><h2 id="参数"><a href="#参数" class="headerlink" title="参数"></a>参数</h2><hr>
<pre><code>Process([group [, target [, name [, args [, kwargs]]]]])
target：表示这个进程实例所调用对象；
args：表示调用对象的位置参数元组；
kwargs：表示调用对象的关键字参数字典；
name：为当前进程实例的别名；
group：大多数情况下用不到；
</code></pre><hr>
<h2 id="Process类常方法："><a href="#Process类常方法：" class="headerlink" title="Process类常方法："></a>Process类常方法：</h2><hr>
<pre><code>is_alive()：判断进程实例是否还在执行；
join([timeout])：是否等待进程实例执行结束，或等待多少秒；
start()：启动进程实例（创建子进程）；
run()：如果没有给定target参数，对这个对象调用start()方法时，就将执行对象中的run()方法；
terminate()：不管任务是否完成，立即终止；
说明：参数带有[]是代表可写可不写。
</code></pre><hr>
<h3 id="join案例："><a href="#join案例：" class="headerlink" title="join案例："></a>join案例：</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">join：阻塞进程，当join标记的进程执行完毕之后，才开始执行下面的进程。</div><div class="line">from multiprocessing import Process</div><div class="line">import time</div><div class="line"></div><div class="line"></div><div class="line">def test():</div><div class="line">   for x in range(10):</div><div class="line">        print(&quot;---test-----&quot;)</div><div class="line">        time.sleep(1)</div><div class="line"></div><div class="line">if __name__ == &apos;__main__&apos;:</div><div class="line">    p = Process(target=test)</div><div class="line">    p.start()</div><div class="line">    p.join()</div><div class="line">    while True:</div><div class="line">        print(&quot;-----main-----&quot;)</div><div class="line">        time.sleep(1)</div></pre></td></tr></table></figure>
<blockquote>
<p>说明：先执行10次test输出，才开始main输出。<br>补充：如果进程操作有很多附属内容，则可以使用新建类继承Process然后根据需要编写(例如 ：重写run方法等等)</p>
</blockquote>
<h2 id="进程池"><a href="#进程池" class="headerlink" title="进程池"></a>进程池</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">from multiprocessing import Pool</div><div class="line">import time</div><div class="line"></div><div class="line"></div><div class="line">def work(num):</div><div class="line">    for i in range(3):</div><div class="line">        print(&quot;----%d--&quot; % num)</div><div class="line">        time.sleep(1)</div><div class="line"></div><div class="line"></div><div class="line">if __name__ == &apos;__main__&apos;:</div><div class="line">    p = Pool(3) #进程池最大容纳的进程个数</div><div class="line">    for i in range(6):</div><div class="line">        print(&quot;----%d&quot; % i)</div><div class="line">        p.apply_async(work, (i,)) #往进程池里面添加操作，后面(i,)是元组形式参数，给参数一的参数</div><div class="line">		#此时代表给上面的num,注意一定要用元组形式</div><div class="line">    p.close() #关闭进程池之后，不能再添加进程了</div><div class="line">    p.join() #进程池中主线程不会等待子进程执行完毕，而主进程一旦执行完毕，子进程无法执行，所以</div><div class="line">	#此时让主进程阻塞，然后等待子进程执行完毕，才停止。</div></pre></td></tr></table></figure>
<hr>
<pre><code>    说明：进程池此时最大容纳3个进程，但是添加不会阻塞，是一下子都添加进去，而前面一下子只能3个同时
    执行，完成一个，下一个进来执行。
输出：
----0
----1
----2
----3
----4
----5
----5868---0--
----3144---1--
----1100---2--
----5868---0--
----3144---1--
----1100---2--
----5868---0--
----3144---1--
----1100---2--
----5868---3--
----3144---4--
----1100---5--
----5868---3--
----3144---4--
----1100---5--
----5868---3--
----3144---4--
----1100---5--
</code></pre><hr>
<h3 id="apply阻塞式添加"><a href="#apply阻塞式添加" class="headerlink" title="apply阻塞式添加"></a>apply阻塞式添加</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line">from multiprocessing import Pool</div><div class="line">import os</div><div class="line">import time</div><div class="line"></div><div class="line"></div><div class="line">def work(num):</div><div class="line">    for i in range(3):</div><div class="line">        print(&quot;----%d---%d--&quot; %(os.getpid(),num))</div><div class="line">        time.sleep(1)</div><div class="line"></div><div class="line"></div><div class="line">if __name__ == &apos;__main__&apos;:</div><div class="line">    p = Pool(3)</div><div class="line">    for i in range(6):</div><div class="line">        print(&quot;----%d&quot; % i)</div><div class="line">        p.apply(work, (i,))</div><div class="line">    p.close()</div><div class="line">    p.join()</div><div class="line"></div><div class="line">输出：</div><div class="line">----0</div><div class="line">----8232---0--</div><div class="line">----8232---0--</div><div class="line">----8232---0--</div><div class="line">----1</div><div class="line">----5580---1--</div><div class="line">----5580---1--</div><div class="line">----5580---1--</div><div class="line">----2</div><div class="line">----5816---2--</div><div class="line">----5816---2--</div><div class="line">----5816---2--</div><div class="line">----3</div><div class="line">----8232---3--</div><div class="line">----8232---3--</div><div class="line">----8232---3--</div></pre></td></tr></table></figure>
<h2 id="Quenue进程间通信"><a href="#Quenue进程间通信" class="headerlink" title="Quenue进程间通信"></a>Quenue进程间通信</h2><p>队列：先进先出<br>栈：先进后出</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">from multiprocessing import Queue</div><div class="line">q=Queue(3) #最多存储三条信息 ，如果没有参数，则不限制个数</div><div class="line">print(q.qsize()) #0</div><div class="line">q.put(&quot;测试1&quot;)</div><div class="line">q.put(&quot;测试2&quot;)</div><div class="line">q.put(&quot;测试3&quot;)</div><div class="line">print(q.qsize()) #3</div><div class="line">print(q.get()) #测试1</div><div class="line">print(q.qsize()) #2</div><div class="line">q.put(&quot;测试4&quot;)</div><div class="line">q.put(&quot;测试5&quot;) #不会报错，但是线程阻塞，等待先取出一个，才能添加进去</div><div class="line">q.full()#判断队列是否已经满了</div><div class="line">q.empty()#判断队列是否为空</div><div class="line">补充：此时get如果为空会阻塞。put满了也会阻塞，但是如果put_nowait(),get_nowait()不会阻塞，但是会异常</div><div class="line">所以最好放在try里面。</div><div class="line">put/put_nowait时候，可以放入任何，[] &#123;&#125;甚至对象。</div></pre></td></tr></table></figure>
<hr>
<pre><code>使用：
from multiprocessing import Process,Queue
q=Queue(3)
p=Process(work,args=(q,))
这样就可以把p传递过去给其他进程，但是最好一个传递端，一个接收端，否则可能实现数据接收不全面的问题。

对比：进程池中进程通信
from multiprocessing import Manager,Pool
q=Manager().Queue(3) 
必须使用manager创建队列Quenue，其他相同。
</code></pre><hr>
<h1 id="线程"><a href="#线程" class="headerlink" title="线程"></a>线程</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">基本案例：</div><div class="line">from threading import Thread</div><div class="line">import time</div><div class="line"></div><div class="line">def test():</div><div class="line">    print(&quot;-----测试------&quot;)</div><div class="line">    time.sleep(1)</div><div class="line"></div><div class="line">for i in range(5):</div><div class="line">    t=Thread(target=test)</div><div class="line">    t.start()</div><div class="line">输出：</div><div class="line">-----测试------</div><div class="line">-----测试------</div><div class="line">-----测试------</div><div class="line">-----测试------</div><div class="line">-----测试------</div><div class="line">如果不开多线程，则最快五秒执行完毕，因为每次睡眠1秒钟，此时，会接近一秒，因为时多线程，输出互相不影响。</div></pre></td></tr></table></figure>
<h2 id="继承多线程的类"><a href="#继承多线程的类" class="headerlink" title="继承多线程的类"></a>继承多线程的类</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">这样类可以封装很多其他操作</div><div class="line">import threading</div><div class="line">import time</div><div class="line"></div><div class="line"></div><div class="line">class Method(threading.Thread):</div><div class="line">    def run(self):</div><div class="line">        for i in range(5):</div><div class="line">            time.sleep(1)</div><div class="line">            info = &quot;当前线程名称：&quot; + self.name+&quot;..&quot;+str(i)</div><div class="line">            print(info)</div><div class="line"></div><div class="line"></div><div class="line">if __name__ == &apos;__main__&apos;:</div><div class="line">    for i in range(2):</div><div class="line">        m = Method()</div><div class="line">        m.start()</div><div class="line"></div><div class="line">输出：</div><div class="line">当前线程名称：Thread-1..0</div><div class="line">当前线程名称：Thread-2..0</div><div class="line">当前线程名称：Thread-1..1</div><div class="line">当前线程名称：Thread-2..1</div><div class="line">当前线程名称：Thread-2..2</div><div class="line">当前线程名称：Thread-1..2</div><div class="line">当前线程名称：Thread-2..3</div><div class="line">当前线程名称：Thread-1..3</div><div class="line">当前线程名称：Thread-1..4</div><div class="line">当前线程名称：Thread-2..4</div><div class="line">说明：start会默认调用run方法。而且线程的执行顺序不一定。此时其实时三个线程，因为还有一个主线程去创建</div><div class="line">线程。</div></pre></td></tr></table></figure>
<h2 id="多线程的全局变量共享问题"><a href="#多线程的全局变量共享问题" class="headerlink" title="多线程的全局变量共享问题"></a>多线程的全局变量共享问题</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line">from threading import Thread</div><div class="line"></div><div class="line">g_num = 100</div><div class="line"></div><div class="line"></div><div class="line">def work_01():</div><div class="line">    global g_num</div><div class="line">    for i in range(3):</div><div class="line">        g_num += 1</div><div class="line">    print(&quot;work_01..&quot;+str(g_num))</div><div class="line"></div><div class="line"></div><div class="line">def work_02():</div><div class="line">    global g_num</div><div class="line">    for i in range(3):</div><div class="line">        g_num += 1</div><div class="line">    print(&quot;work_02..&quot;+str(g_num))</div><div class="line"></div><div class="line"></div><div class="line">print(&quot;全局&quot; + str(g_num))</div><div class="line">t1 = Thread(target=work_01)</div><div class="line">t1.start()</div><div class="line"></div><div class="line">t2 = Thread(target=work_02)</div><div class="line">t2.start()</div><div class="line">输出：</div><div class="line">全局100</div><div class="line">work_01..103</div><div class="line">work_02..106</div><div class="line">说明：多进程，哪怕全局变量也不是共享的，但是多线程全局变量时共享的。</div></pre></td></tr></table></figure>
<h2 id="共享全局变量问题"><a href="#共享全局变量问题" class="headerlink" title="共享全局变量问题"></a>共享全局变量问题</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">def work_01():</div><div class="line">    global g_num</div><div class="line">    for i in range(1000000):</div><div class="line">        g_num += 1</div><div class="line">    print(&quot;work_01..&quot;+str(g_num))</div><div class="line"></div><div class="line"></div><div class="line">def work_02():</div><div class="line">    global g_num</div><div class="line">    for i in range(1000000):</div><div class="line">        g_num += 1</div><div class="line">    print(&quot;work_02..&quot;+str(g_num))</div><div class="line"></div><div class="line"></div><div class="line">print(&quot;全局&quot; + str(g_num))</div><div class="line">t1 = Thread(target=work_01)</div><div class="line">t1.start()</div><div class="line">#time.sleep(1)</div><div class="line">t2 = Thread(target=work_02)</div><div class="line">t2.start()</div><div class="line">输出：</div><div class="line">全局100</div><div class="line">work_01..1159900</div><div class="line">work_02..1307250</div></pre></td></tr></table></figure>
<hr>
<pre><code>说明：多线程在修改同一个值的时候，当操作次数很多时候，可能造成错误，当
注释代码，即主线程睡眠一秒钟，在去执行t2很可能，t1已经执行完毕，此时数据
就是正确的，但是一般不会采用这种方式。
</code></pre><hr>
<h2 id="参数传递的数据共享"><a href="#参数传递的数据共享" class="headerlink" title="参数传递的数据共享"></a>参数传递的数据共享</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">from threading import Thread</div><div class="line">num=[1,2,3]</div><div class="line">def work_01(num):</div><div class="line">    num.append(4)</div><div class="line">    print(num)</div><div class="line"></div><div class="line"></div><div class="line">def work_02(num):</div><div class="line">    print(num)</div><div class="line"></div><div class="line">t1 = Thread(target=work_01,args=(num,))</div><div class="line">t1.start()</div><div class="line">t2 = Thread(target=work_02,args=(num,))</div><div class="line">t2.start()</div><div class="line">输出：</div><div class="line">[1, 2, 3, 4]</div><div class="line">[1, 2, 3, 4]</div></pre></td></tr></table></figure>
<h2 id="加锁"><a href="#加锁" class="headerlink" title="加锁"></a>加锁</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">from threading import Thread, Lock</div><div class="line"></div><div class="line">num = 0</div><div class="line"></div><div class="line"></div><div class="line">def work_01():</div><div class="line">    global num</div><div class="line">    for i in range(100000):</div><div class="line">        mutex.acquire()</div><div class="line">		num += 1</div><div class="line">		mutex.release()</div><div class="line">    print(num)</div><div class="line"></div><div class="line"></div><div class="line">def work_02():</div><div class="line">    global num</div><div class="line">    for i in range(100000):</div><div class="line">		mutex.acquire()</div><div class="line">        num += 1</div><div class="line">		mutex.release()</div><div class="line">    print(num)</div><div class="line"></div><div class="line">mutex = Lock()</div><div class="line">t1=Thread(target=work_01)</div><div class="line">t2=Thread(target=work_02)</div><div class="line">t1.start()</div><div class="line">t2.start()</div><div class="line">输出：</div><div class="line">100000</div><div class="line">200000</div></pre></td></tr></table></figure>
<hr>
<pre><code>说明：首先mutex = Lock()全局初始化锁，然后在子线程内部mutex.acquire()开启锁，则即使work-02执行，
到mutex.acquire()也会因为无法加锁成功而阻塞，直到work))_01的 mutex.release()执行，释放锁，然后才
work_02加锁成功，向下执行。
总结：貌似work_01和02加锁之后同一时间还是只有一个在同时执行，但是此时其实还有一个主线程在不受阻塞的
向下执行。
</code></pre><hr>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">对比案例：</div><div class="line">from threading import Thread, Lock</div><div class="line">import time</div><div class="line">num = 0</div><div class="line"></div><div class="line"></div><div class="line">def work_01():</div><div class="line">    global num</div><div class="line">    for i in range(10):</div><div class="line">        mutex.acquire()</div><div class="line">        time.sleep(1)</div><div class="line">        num += 1</div><div class="line">        mutex.release()</div><div class="line">    print(num)</div><div class="line"></div><div class="line"></div><div class="line">def work_02():</div><div class="line">    global num</div><div class="line">    for i in range(10):</div><div class="line">        mutex.acquire()</div><div class="line">        time.sleep(1)</div><div class="line">        num += 1</div><div class="line">        mutex.release()</div><div class="line">    print(num)</div><div class="line"></div><div class="line">mutex = Lock()</div><div class="line">t1=Thread(target=work_01)</div><div class="line">t2=Thread(target=work_02)</div><div class="line">t1.start()</div><div class="line">t2.start()</div><div class="line"># mutex.acquire()</div><div class="line">print(&quot;----------------&quot;)</div><div class="line"># mutex.release()</div><div class="line">输出：</div><div class="line">----------------</div><div class="line">12</div><div class="line">20</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">对比案例：</div><div class="line">from threading import  Thread</div><div class="line">import threading</div><div class="line">import  time</div><div class="line">def test():</div><div class="line">    name=threading.current_thread().name</div><div class="line">    print(&quot;---thread name is %s&quot;%name)</div><div class="line">    num=100</div><div class="line">    if name==&apos;Thread-1&apos;:</div><div class="line">        num+=1</div><div class="line">    else:</div><div class="line">        time.sleep(2)</div><div class="line">    print(&quot;---thread is %s  ----num=%d&quot;%(name,num))</div><div class="line">p1=Thread(target=test)</div><div class="line">p2=Thread(target=test)</div><div class="line">p1.start()</div><div class="line">p2.start()</div><div class="line">输出：</div><div class="line">---thread name is Thread-1</div><div class="line">---thread is Thread-1  ----num=101</div><div class="line">---thread name is Thread-2</div><div class="line">---thread is Thread-2  ----num=100</div><div class="line">说明：即使同一个方法，多线程变量也是各自时各自的，互不干涉。</div></pre></td></tr></table></figure>
<h2 id="死锁"><a href="#死锁" class="headerlink" title="死锁"></a>死锁</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div></pre></td><td class="code"><pre><div class="line">from threading import Thread, Lock</div><div class="line">import time</div><div class="line">emtut1 = Lock()</div><div class="line">emtut2 = Lock()</div><div class="line"></div><div class="line"></div><div class="line">def test1():</div><div class="line">    if emtut1.acquire():</div><div class="line">        print(&quot;test1&quot;)</div><div class="line">        time.sleep(1)</div><div class="line">        if emtut2.acquire(timeout=1):</div><div class="line">            print(&quot;111&quot;)</div><div class="line">        emtut1.release()</div><div class="line"></div><div class="line"></div><div class="line">def test2():</div><div class="line">    if emtut2.acquire():</div><div class="line">        print(&quot;test2&quot;)</div><div class="line">        if emtut1.acquire(timeout=1): #timeout=3</div><div class="line">            print(&quot;222&quot;)</div><div class="line">        emtut2.release()</div><div class="line"></div><div class="line"></div><div class="line">if __name__ == &apos;__main__&apos;:</div><div class="line">    t1 = Thread(target=test1)</div><div class="line">    t2 = Thread(target=test2)</div><div class="line">    t1.start()</div><div class="line">    t2.start()</div><div class="line">输出：</div><div class="line">test1</div><div class="line">test2</div><div class="line">111</div><div class="line">如果参数时注释处的值，则输出</div><div class="line">test1</div><div class="line">test2</div><div class="line">222</div><div class="line">这是因为，时间不同例如注释处，3秒才超时，但是上面test1中if emtut2.acquire(timeout=1):</div><div class="line">时1秒超时，超时之后，111不会输出，直接超时直接下面 emtut1.release()，但是此时</div><div class="line"> if emtut1.acquire(timeout=3):还没有超时，但是锁1被释放，符合条件，然后进入if循环输出222</div></pre></td></tr></table></figure>
<h2 id="生产者消费者"><a href="#生产者消费者" class="headerlink" title="生产者消费者"></a>生产者消费者</h2><blockquote>
<p>利用Queue实现解耦<br>py2:from Queue import Queue<br>py3:from queue import Queue</p>
</blockquote>
<h2 id="ThreadLocal"><a href="#ThreadLocal" class="headerlink" title="ThreadLocal"></a>ThreadLocal</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line">目的：多进程时候，全局变量，应该会被两个线程修改，但是有时候需要实现不同线程区分保存对象</div><div class="line"></div><div class="line">基本案例：</div><div class="line">import threading</div><div class="line"></div><div class="line">thread_local = threading.local()</div><div class="line"></div><div class="line"></div><div class="line">def get_info():</div><div class="line">    info = thread_local.name</div><div class="line">    print(&quot;name is %s,thread is %s&quot;%(info,threading.current_thread().name))</div><div class="line"></div><div class="line"></div><div class="line">def process_thread(name):</div><div class="line">    thread_local.name = name</div><div class="line">    get_info()</div><div class="line"></div><div class="line"></div><div class="line">t1 = threading.Thread(target=process_thread, args=(&quot;laowangA&quot;,), name=&apos;Thread-A&apos;)</div><div class="line">t2 = threading.Thread(target=process_thread, args=(&quot;laowangB&quot;,), name=&apos;Thread-B&apos;)</div><div class="line">t1.start()</div><div class="line">t2.start()</div><div class="line"></div><div class="line">输出： </div><div class="line">name is laowangA,thread is Thread-A</div><div class="line">name is laowangB,thread is Thread-B</div><div class="line">说明：理论上应该都输出后者，但是threading.local()创建的全局对象，则会分别保存相关信息。</div></pre></td></tr></table></figure>
<h1 id="异步"><a href="#异步" class="headerlink" title="异步"></a>异步</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">基本案例：</div><div class="line">from multiprocessing import Pool</div><div class="line">import time</div><div class="line">import os</div><div class="line"></div><div class="line"></div><div class="line">def test():</div><div class="line">    print(&quot;---进程池中的进程---pid=%d,ppid=%d&quot; % (os.getpid(), os.getppid()))</div><div class="line">    for i in range(3):</div><div class="line">        print(&quot;----%d----&quot; % i)</div><div class="line">        time.sleep(1)</div><div class="line">    return &quot;haha&quot;</div><div class="line"></div><div class="line"></div><div class="line">def test2(args):</div><div class="line">    print(&quot;----callback func ----pid=%d&quot; % os.getpid())</div><div class="line">    print(&quot;---callbacl----- args=%s&quot; % args)</div><div class="line"></div><div class="line"></div><div class="line">if __name__==&apos;__main__&apos;:</div><div class="line">    pool = Pool(3)</div><div class="line">    pool.apply_async(func=test, callback=test2)</div><div class="line">    pool.apply_async(func=test, callback=test2)</div><div class="line">    pool.apply_async(func=test, callback=test2)</div><div class="line">    while True:</div><div class="line">        time.sleep(1)</div><div class="line">        print(&quot;----主进程-----pid=%d---&quot; % os.getpid())</div><div class="line"></div><div class="line">输出：</div><div class="line">---进程池中的进程---pid=6280,ppid=3024</div><div class="line">----0----</div><div class="line">---进程池中的进程---pid=2524,ppid=3024</div><div class="line">----0----</div><div class="line">---进程池中的进程---pid=5156,ppid=3024</div><div class="line">----0----</div><div class="line">----主进程-----pid=3024---</div><div class="line">----1----</div><div class="line">----1----</div><div class="line">----1----</div><div class="line">----主进程-----pid=3024---</div><div class="line">----2----</div><div class="line">----2----</div><div class="line">----2----</div><div class="line">----主进程-----pid=3024---</div><div class="line">----callback func ----pid=3024</div><div class="line">---callbacl----- args=haha</div><div class="line">----callback func ----pid=3024</div><div class="line">---callbacl----- args=haha</div><div class="line">----callback func ----pid=3024</div><div class="line">---callbacl----- args=haha</div><div class="line">----主进程-----pid=3024---</div><div class="line">----主进程-----pid=3024---</div><div class="line">----主进程-----pid=3024---</div><div class="line">----主进程-----pid=3024---</div></pre></td></tr></table></figure>
<hr>
<p>说明：异步意思，就是本来我干着我的事情，突然让我暂停现在的事情<br>去干另外一件事情，例如此时，本来主线程在睡眠和打印log，但是当有callback<br>时候，主线程会去执行test2然后执行完毕，在回来执行以前的操作。<br>可以通过—-callback func —-pid=3024可知和上面ppid输出值一样，也就是说<br>是主线程先暂停之前操作，先去执行callback。</p>
<hr>
<h1 id="GIL说明"><a href="#GIL说明" class="headerlink" title="GIL说明"></a>GIL说明</h1><hr>
<p>首先强调背景：</p>
<ol>
<li>GIL是什么？</li>
</ol>
<p>  GIL的全称是Global Interpreter Lock(全局解释器锁)，来源是python设计之初的考虑，为了数据安全所做的决定。</p>
<ol>
<li><p>每个CPU在同一时间只能执行一个线程</p>
<p>在单核CPU下的多线程其实都只是并发，不是并行，并发和并行从宏观上来讲都是同时处理多路请求的概念。但并发和并行又有区别，并行是指两个或者多个事件在同一时刻发生；<br>而并发是指两个或多个事件在同一时间间隔内发生。</p>
</li>
</ol>
<p>在Python多线程下，每个线程的执行方式：</p>
<p>获取GIL</p>
<p>执行代码直到sleep或者是python虚拟机将其挂起。</p>
<p>释放GIL</p>
<p>可见，某个线程想要执行，必须先拿到GIL，我们可以把GIL看作是“通行证”，并且在一个python进程中，GIL只有一个。拿不到通行证的线程，就不允许进入CPU执行。</p>
<p>在Python2.x里，GIL的释放逻辑是当前线程遇见IO操作或者ticks计数达到100（ticks可以看作是Python自身的一个计数器，专门作用于GIL，每次释放后归零，<br>这个计数可以通过 sys.setcheckinterval 来调整），进行释放。</p>
<p>而每次释放GIL锁，线程进行锁竞争、切换线程，会消耗资源。并且由于GIL锁存在，python里一个进程永远只能同时执行一个线程(拿到GIL的线程才能执行)，<br>这就是为什么在多核CPU上，python的多线程效率并不高。</p>
<p>那么是不是python的多线程就完全没用了呢？</p>
<p>在这里我们进行分类讨论：</p>
<p>CPU密集型代码(各种循环处理、计数等等)，在这种情况下，由于计算工作多，ticks计数很快就会达到阈值，然后触发GIL的释放与再竞争<br>（多个线程来回切换当然是需要消耗资源的），所以python下的多线程对CPU密集型代码并不友好。</p>
<p>IO密集型代码(文件处理、网络爬虫等)，多线程能够有效提升效率(单线程下有IO操作会进行IO等待，造成不必要的时间浪费，而开启多线程能在线程A等待时，</p>
<p>自动切换到线程B，可以不浪费CPU的资源，从而能提升程序执行效率)。所以python的多线程对IO密集型代码比较友好。</p>
<p>而在python3.x中，GIL不使用ticks计数，改为使用计时器（执行时间达到阈值后，当前线程释放GIL），这样对CPU密集型程序更加友好，但依然没有解决GIL导<br>致的同一时间只能执行一个线程的问题，所以效率依然不尽如人意。</p>
<p>请注意：多核多线程比单核多线程更差，原因是单核下的多线程，每次释放GIL，唤醒的那个线程都能获取到GIL锁，所以能够无缝执行，但多核下，CPU0释放GIL后<br>，其他CPU上的线程都会进行竞争，但GIL可能会马上又被CPU0拿到，导致其他几个CPU上被唤醒后的线程会醒着等待到切换时间后又进入待调度状态，这样会造成线程颠簸(thrashing)，导致效率更低。</p>
<p>回到最开始的问题：经常我们会听到老手说：“python下想要充分利用多核CPU，就用多进程”，原因是什么呢？</p>
<p>原因是：每个进程有各自独立的GIL，互不干扰，这样就可以真正意义上的并行执行，所以在python中，多进程的执行效率优于多线程(仅仅针对多核CPU而言)。</p>
<p>所以在这里说结论：多核下，想做并行提升效率，比较通用的方法是使用多进程，能够有效提高执行效率</p>
<hr>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/08/19/Python高级/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Qiang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="飞奔的小猿猴">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/08/19/Python高级/" itemprop="url">Python高级</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-08-19T21:17:11+08:00">
                2017-08-19
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Python/" itemprop="url" rel="index">
                    <span itemprop="name">Python</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="import搜索路径"><a href="#import搜索路径" class="headerlink" title="import搜索路径"></a>import搜索路径</h1><hr>
<pre><code>import sys
sys.path
会显示导入模块时候，从哪里查询，以及查询的先后。
另外：sys.path.append()可以追加模块路径。
例如：sys.path.append(&quot;路径&quot;),则再用sys.path就可以看到最后追加的搜索路径有填进去的路径
</code></pre><hr>
<h1 id="循环导入问题"><a href="#循环导入问题" class="headerlink" title="循环导入问题"></a>循环导入问题</h1><blockquote>
<p>a用到b,b用到a,无休无止的互相导入，会程序崩溃<br>解决方案：写一个模块c,使用a,b即可</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">错误案例：</div><div class="line">from b import  b</div><div class="line">def a():</div><div class="line">    print(&quot;------a------&quot;)</div><div class="line">    b()</div><div class="line">a()</div><div class="line">----------------------------------------------</div><div class="line">from  a import  a</div><div class="line">def b():</div><div class="line">    print(&quot;--------b---------&quot;)</div><div class="line">    a()</div><div class="line">b()</div><div class="line">说明：from  a import  a中第一个a是模块名，其实就是创建的文件名称，第二个a是方法a</div></pre></td></tr></table></figure>
<h1 id="和is"><a href="#和is" class="headerlink" title="== 和is"></a>== 和is</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">is:是否指向同一地址</div><div class="line">==：值是否相等</div><div class="line">可以通过id()验证</div></pre></td></tr></table></figure>
<hr>
<pre><code>补充：
小整数常量池 -5到256之间，两边都包括
a=100
b=100
a is b 理论上应该是false，但是因为是小整数常量池，指向同一内存地址
实际是true。
但是，这种结论只是在ipython,和python命令行下面适用，在文件和ide下是不对的
文件和ide下面全是true，可以这么理解，文件和ide下小整数常量池变得很大很大很大。
对于字符串(和数字一样是不可变)：一些简单的字符串，在ipython，和python下是true,
复杂字符串（例如汉字）是false，但是在文件和ide下面永远是true。
对于元组也是不可变：元组不存在以上情况，全是false。
</code></pre><hr>
<h1 id="深拷贝和浅拷贝"><a href="#深拷贝和浅拷贝" class="headerlink" title="深拷贝和浅拷贝"></a>深拷贝和浅拷贝</h1><blockquote>
<p>浅拷贝：复制地址，默认是浅拷贝，全是地址传递<br>深拷贝：新创建一份变量值，然后赋值。<br>注意：所谓的深拷贝只对可变类型有效，对不可变类型无效。</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">案例一：</div><div class="line">a=[1,2]</div><div class="line">b=[3,4]</div><div class="line">d=[a,b]</div><div class="line">e=d</div><div class="line">a.append(3)</div><div class="line">print(d[0])</div><div class="line">print(e[0])</div><div class="line">输出都是[1,2,3]</div><div class="line">案例二：深拷贝案例</div><div class="line">import copy</div><div class="line">a=[1,2]</div><div class="line">b=[3,4]</div><div class="line">d=[a,b]</div><div class="line">e=copy.deepcopy(d)</div><div class="line">a.append(3)</div><div class="line">print(d[0]) #[1,2,3]</div><div class="line">print(e[0]) #[1,2]</div><div class="line">说明：深拷贝就是连多层引用拷贝都是值，而不是引用，所以e拷贝了最开始d的值，后面d变化，e无变化</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line">案例三：copy</div><div class="line">import copy</div><div class="line">a=[1,2]</div><div class="line">b=[3,4]</div><div class="line">d=[a,b]</div><div class="line">e=copy.copy(d)</div><div class="line">a.append(3)</div><div class="line">print(d[0])</div><div class="line">print(e[0])</div><div class="line">print(id(d))  #2147477430472</div><div class="line">print(id(e))  #2147477430408</div><div class="line">输出都是[1,2,3],copy只第一层的值，内部的层级就不是值拷贝也不是引用拷贝，</div><div class="line">而是在内存中另外创建一个相同内容的地址引用，这点要区分与浅拷贝和深拷贝，可以通过id()验证。</div><div class="line">所以才会输出都是1，2，3情况</div><div class="line"></div><div class="line">对比案例：</div><div class="line">import copy</div><div class="line">a=[1,2]</div><div class="line">b=[3,4]</div><div class="line">d=(a,b)</div><div class="line">e=copy.copy(d)</div><div class="line">a.append(3)</div><div class="line">print(d[0])</div><div class="line">print(e[0])</div><div class="line">print(id(d))</div><div class="line">print(id(e))</div><div class="line">说明：d[0],e[0]输出都是[1,2,3]，而且id输出一样，copy对于不可变类型(此时是元组)</div><div class="line">是连最基本的第一层拷贝也是无法进行的，结论，copy对于不可变类型就相当于浅拷贝。</div></pre></td></tr></table></figure>
<h1 id="进制"><a href="#进制" class="headerlink" title="进制"></a>进制</h1><hr>
<pre><code>首位是符号位，0代表正数，1代表负数
案例：进制转换
十进制18
hex(18)  -&gt;十六进制0x12
oct(18)  -&gt;八进制022
bin(18)  -&gt;二进制0b10010
其他进制转10进制
int(&quot;0b10010&quot;,2)   -&gt;18
int(&quot;0x12&quot;,16)     -&gt;18
int(&quot;022&quot;,8)       -&gt;18
</code></pre><hr>
<h1 id="位运算"><a href="#位运算" class="headerlink" title="位运算"></a>位运算</h1><hr>
<pre><code>&lt;&lt; 左移相当于乘以2但是效率比*2效率高很多
高位丢弃，低位补0
 &gt;&gt; 右移：移除的位补符号位，右移不会改变数字的正负
 右移相当于除以2
 &amp;按位与：均为1结果才是1，否则为0
 |按位或：有一个为1就是1，否则为0
 ^按位亦或：不相同为1，否则为0
 ~取反：~9=-10
</code></pre><hr>
<h1 id="私有化"><a href="#私有化" class="headerlink" title="私有化"></a>私有化</h1><hr>
<pre><code>xx:公有变量
_xx:单前置下划线，私有化属性或方法，禁止导入(其所在模块可以导入，但是在被导入的地方，
不能使用该属性或方法，例如，直接私有属性名会报错，区别于下面的模块名.属性名，针对的方式是from some import *)，类对象和子类可以访问.
但是对于直接import 模块名，然后通过 模块名.属性名/对象名是可以使用，哪怕是私有的。

__xx:双前置下划线，避免与子类中的属性命名冲突，无法在外部直接访问
__xx__:python内置的魔法对象或者属性
xx__:单后置下划线，用于避免与python关键字冲突
</code></pre><hr>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">案例：</div><div class="line">class Dog:</div><div class="line">    def __init__(self):</div><div class="line">        self.__num = 20</div><div class="line">d = Dog()</div><div class="line">print(d.__num)#报错</div><div class="line">print(d._Dog__num)  #输出20</div><div class="line">私有属性，也可以通过_类名__私有属性名称来访问。</div></pre></td></tr></table></figure>
<h1 id="property"><a href="#property" class="headerlink" title="property"></a>property</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">说明：简化调用时候不需要写get，set方法</div><div class="line">class Dog:</div><div class="line">    def __init__(self):</div><div class="line">        self.__num = 20</div><div class="line">    def getNum(self):</div><div class="line">        return self.__num</div><div class="line">    def setNum(self,value):</div><div class="line">        if isinstance(value,int):</div><div class="line">            self.__num=value</div><div class="line">        else:</div><div class="line">            print(&quot;请输入数字类型&quot;)</div><div class="line">    n=property(getNum,setNum)</div><div class="line">d = Dog()</div><div class="line">d.n=30</div><div class="line">print(d.n)</div><div class="line"> </div><div class="line">案例：通过装饰器使用property</div><div class="line">class Dog:</div><div class="line">    def __init__(self):</div><div class="line">        self.__num = 20</div><div class="line"></div><div class="line">    @property</div><div class="line">    def num(self):</div><div class="line">        return self.__num</div><div class="line"></div><div class="line">    @num.setter</div><div class="line">    def num(self,value):</div><div class="line">        if isinstance(value,int):</div><div class="line">            self.__num=value</div><div class="line">        else:</div><div class="line">            print(&quot;类型错误&quot;)</div><div class="line"></div><div class="line">d = Dog()</div><div class="line">d.num=30</div><div class="line">print(d.num)</div></pre></td></tr></table></figure>
<h1 id="迭代"><a href="#迭代" class="headerlink" title="迭代"></a>迭代</h1><h2 id="可迭代对象：可以直接用于for循环的数据类型"><a href="#可迭代对象：可以直接用于for循环的数据类型" class="headerlink" title="可迭代对象：可以直接用于for循环的数据类型"></a>可迭代对象：可以直接用于for循环的数据类型</h2><blockquote>
<p>一类是集合数据类型，如：list tuple  dict  set str等<br>一类是generator，包括生成器和带yield的generator function。<br>这些都被称为Iterable（可迭代对象）<br>可以使用isinstance()判断一个对象是否是Iterable对象（from collections import Iterable）。<br>list外的[]变化为()就可以变成迭代器对象<br>生成器：b=(x for x in range(10))</p>
</blockquote>
<h2 id="迭代器"><a href="#迭代器" class="headerlink" title="迭代器"></a>迭代器</h2><blockquote>
<p>可以被next()函数调用并不断返回下一个值的对象称为迭代器：Iterator<br>可以使用isinstance()判断一个对象是否是Iterator对象（from collections import Iterator）。<br>生成器一定是迭代器<br>把list  dict  str等Iterable变成Iterator可以使用iter()</p>
</blockquote>
<h2 id="生成器"><a href="#生成器" class="headerlink" title="生成器"></a>生成器</h2><blockquote>
<p>生成器：是持有生成方式，需要时候在计算出真实值，所以对内存开销很小<br>方式一：把[]变化为()就变成了生成器<br>方式二：内部含有一个及以上yield就是生成器</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">基本案例：</div><div class="line">a=(x*x for x in range(1000))</div><div class="line">print(next(a))  #0</div><div class="line">print(a.__next__)  #&lt;method-wrapper &apos;__next__&apos; of generator object at 0x0000017ECDC38200&gt;</div><div class="line">print(a.__next__())  #1</div><div class="line">for item in a:</div><div class="line">    print(item)</div><div class="line">	</div><div class="line">变化案例一：</div><div class="line">def test():</div><div class="line">    i=0;</div><div class="line">    while i&lt;5:</div><div class="line">        yield i</div><div class="line">        i+=1</div><div class="line">t=test()</div><div class="line">print(t.__next__())#0</div><div class="line">print(t.__next__())#1</div></pre></td></tr></table></figure>
<blockquote>
<p>说明：看作正常函数，凡是遇到yield就停止，下面t第一个next才开始继续运行，<br>然后第二个next，如果遇到没有可生成的了，就会报stopiterable异常，所以一般通过<br>for in循环避免这种情况。</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">变化案例二：</div><div class="line">def test():</div><div class="line">    i=0;</div><div class="line">    while i&lt;5:</div><div class="line">        num=yield i</div><div class="line">        print(num)</div><div class="line">        i+=1</div><div class="line">t=test()</div><div class="line">print(next(t))</div><div class="line">#print(next(t))</div></pre></td></tr></table></figure>
<blockquote>
<p>说明：只有一个next时候，只输出0，有两个next时候，输出  0   none   1<br>是因为一个next时候，遇到yield停止，下面print(num)没有执行，第二个next然后才从上<br>一次停止地方开始继续，注意此时不是yield  i整体赋值给num，这俩没关系，如果想给num<br>赋值必须通过send方法传递参数。此时没有给num赋值，打印num自然就是none。</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">变化案例三：</div><div class="line">def test():</div><div class="line">    i=0;</div><div class="line">    while i&lt;5:</div><div class="line">        num=yield i</div><div class="line">        print(num)</div><div class="line">        i+=1</div><div class="line">t=test()</div><div class="line">print(t.send(12))</div></pre></td></tr></table></figure>
<blockquote>
<p>说明：这样直接调用send会报异常：TypeError: can’t send non-None value to a just-started generator<br>因为第一次是从函数最开始处执行的，没有需要send中参数的变量，所以第一次必须先用next一下使函数执行到yield处，<br>第二次send传值才可。或者直接第一次使用send(None)这样也行，但是注意send必须有参数<br>不是想当然的不传递参数。</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">应用场景：协程</div><div class="line">def test1():</div><div class="line">    while True:</div><div class="line">        print(&quot;-----1-----&quot;)</div><div class="line">        yield None</div><div class="line"></div><div class="line">def test2():</div><div class="line">    while True:</div><div class="line">        print(&quot;-----2-----&quot;)</div><div class="line">        yield None</div><div class="line"></div><div class="line">t1=test1()</div><div class="line">t2=test2()</div><div class="line">while True:</div><div class="line">    t1.__next__()</div><div class="line">    t2.__next__()</div><div class="line"></div><div class="line">说明：则结果是1，2间隔输出，实现协程效果。</div></pre></td></tr></table></figure>
<h2 id="闭包"><a href="#闭包" class="headerlink" title="闭包"></a>闭包</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">def test(a,b):</div><div class="line">    def test1(num):</div><div class="line">        return a*num+b</div><div class="line">    return test1</div><div class="line"></div><div class="line">t=test(1,2)</div><div class="line">t1=t(20)</div><div class="line">print(t1)#22</div><div class="line">说明：内部持有外部引用，就是闭包。</div></pre></td></tr></table></figure>
<h1 id="装饰器"><a href="#装饰器" class="headerlink" title="装饰器"></a>装饰器</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line">装饰器原理案例：</div><div class="line">def Demo(func):</div><div class="line">    def inner():</div><div class="line">        print(&quot;-----inner------&quot;)</div><div class="line">        func()</div><div class="line">        print(&quot;------inner------late&quot;)</div><div class="line">    return inner</div><div class="line"></div><div class="line">def test():</div><div class="line">    print(&quot;-----test------&quot;)</div><div class="line"></div><div class="line">test=Demo(test)</div><div class="line">test()</div><div class="line"></div><div class="line">使用装饰器案例：</div><div class="line">def Demo(func):</div><div class="line">    def inner():</div><div class="line">        print(&quot;-----inner------&quot;)</div><div class="line">        func()</div><div class="line">        print(&quot;------inner------late&quot;)</div><div class="line">    return inner</div><div class="line"></div><div class="line">@Demo</div><div class="line">def test():</div><div class="line">    print(&quot;-----test------&quot;)</div><div class="line">test()</div></pre></td></tr></table></figure>
<blockquote>
<p>说明：@Demo其实等效于 test=Demo(test),装饰器本质，就是改变test指向，从而达到<br>不修改test本身代码，而执行有变化的结果。</p>
</blockquote>
<h2 id="两个装饰器"><a href="#两个装饰器" class="headerlink" title="两个装饰器"></a>两个装饰器</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line">def Demo(func):</div><div class="line">    print(&quot;-----demo------&quot;)</div><div class="line">    def inner():</div><div class="line">        print(&quot;-----inner------&quot;)</div><div class="line">        return &quot;&lt;b&gt;&quot;+func()+&quot;&lt;/b&gt;&quot;</div><div class="line">    return inner</div><div class="line"></div><div class="line">def Demo1(func):</div><div class="line">    print(&quot;-----demo1------&quot;)</div><div class="line">    def inner():</div><div class="line">        print(&quot;-----inner1------&quot;)</div><div class="line">        return &quot;&lt;h&gt;&quot;+func()+&quot;&lt;/h&gt;&quot;</div><div class="line">    return inner</div><div class="line"></div><div class="line">@Demo</div><div class="line">@Demo1</div><div class="line">def test():</div><div class="line">    print(&quot;-----test---------&quot;)</div><div class="line">    return &quot;haha&quot;</div><div class="line">t=test()</div><div class="line">print(t)</div><div class="line"></div><div class="line">输出：</div><div class="line">-----demo1------</div><div class="line">-----demo------</div><div class="line">-----inner------</div><div class="line">-----inner1------</div><div class="line">-----test---------</div><div class="line">&lt;b&gt;&lt;h&gt;haha&lt;/h&gt;&lt;/b&gt;</div></pre></td></tr></table></figure>
<blockquote>
<p>说明：装饰和执行是两个过程，执行之前，装饰已经完成<br>例如注释最后两行，仍然输出<br>—–demo1——<br>—–demo——<br>装饰的过程是@Demo传入参数，参数必须是函数，发现下面@Demo1不是函数，继续往下找<br>发现test是函数，传入给@Demo1,其返回值传递给@Demo。</p>
</blockquote>
<h2 id="有参数装饰器"><a href="#有参数装饰器" class="headerlink" title="有参数装饰器"></a>有参数装饰器</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line">基本案例：</div><div class="line">def Demo(func):</div><div class="line">    print(&quot;-----demo------&quot;)</div><div class="line">    def inner(a,b):</div><div class="line">        func(a,b)</div><div class="line">    return inner</div><div class="line"></div><div class="line"></div><div class="line">@Demo</div><div class="line">def test(a,b):</div><div class="line">    print(&quot;-----test------%d,%d&quot;%(a,b))</div><div class="line">test(1,2)</div><div class="line">输出：</div><div class="line">-----demo------</div><div class="line">-----test------1,2</div><div class="line"></div><div class="line">可变参数案例：</div><div class="line">def Demo(func):</div><div class="line">    print(&quot;-----demo------&quot;)</div><div class="line">    def inner(*args):</div><div class="line">        func(*args)</div><div class="line">    return inner</div><div class="line"></div><div class="line"></div><div class="line">@Demo</div><div class="line">def test(*args):</div><div class="line">    print(&quot;-----test------%d,%d,%d&quot;%(args))</div><div class="line">test(1,2,3)</div><div class="line">输出：</div><div class="line">-----demo------</div><div class="line">-----test------1,2,3</div></pre></td></tr></table></figure>
<blockquote>
<p>有返回值的两个对比案例：</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">案例一：</div><div class="line">def Demo(func):</div><div class="line">    print(&quot;-----demo------&quot;)</div><div class="line">    def inner():</div><div class="line">        func()</div><div class="line">    return inner</div><div class="line"></div><div class="line"></div><div class="line">@Demo</div><div class="line">def test():</div><div class="line">    return &quot;haha&quot;</div><div class="line">t=test()</div><div class="line">print(t)</div><div class="line"></div><div class="line">输出：</div><div class="line">-----demo------</div><div class="line">None</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">案例二：</div><div class="line">def Demo(func):</div><div class="line">    print(&quot;-----demo------&quot;)</div><div class="line">    def inner():</div><div class="line">        t=func()</div><div class="line">        return t</div><div class="line">    return inner</div><div class="line"></div><div class="line"></div><div class="line">@Demo</div><div class="line">def test():</div><div class="line">    return &quot;haha&quot;</div><div class="line">t=test()</div><div class="line">print(t)</div><div class="line"></div><div class="line">输出：</div><div class="line">-----demo------</div><div class="line">haha</div></pre></td></tr></table></figure>
<h2 id="通用装饰器"><a href="#通用装饰器" class="headerlink" title="通用装饰器"></a>通用装饰器</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">def Demo(func):</div><div class="line">    def inner(*args, **kwargs):</div><div class="line">        t = func(*args, **kwargs)</div><div class="line">        return t</div><div class="line">    return inner</div><div class="line"></div><div class="line">@Demo</div><div class="line">def test():</div><div class="line">    return &quot;haha&quot;</div><div class="line">t = test()</div><div class="line">print(t)</div><div class="line">说明：此时有参数，无法参数，有返回值，无返回值均可。</div></pre></td></tr></table></figure>
<h2 id="带参数的装饰器"><a href="#带参数的装饰器" class="headerlink" title="带参数的装饰器"></a>带参数的装饰器</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">def func_args(arg):</div><div class="line">    def Demo(func):</div><div class="line">        def inner():</div><div class="line">            func()</div><div class="line">            print(arg)</div><div class="line">        return inner</div><div class="line">    return Demo</div><div class="line"></div><div class="line">@func_args(&quot;heihei&quot;)</div><div class="line">def test():</div><div class="line">    print(&quot;----test------&quot;)</div><div class="line">test()</div><div class="line">输出：</div><div class="line">----test------</div><div class="line">heihei</div><div class="line"></div><div class="line">解析：@之后的func_args(&quot;heihei&quot;)相当于执行，返回Demo</div><div class="line">其本质是@Demo,然后内部还是按照正常装饰器来分析。</div></pre></td></tr></table></figure>
<h2 id="types-MethodType"><a href="#types-MethodType" class="headerlink" title="types.MethodType"></a>types.MethodType</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">import types</div><div class="line">class Person():</div><div class="line">    def __init__(self,name):</div><div class="line">        self.__name=name</div><div class="line"></div><div class="line"></div><div class="line">def eat(self):</div><div class="line">    print(&quot;----eat------&quot;)</div><div class="line">p=Person(&quot;haha&quot;)</div><div class="line">p.eat=types.MethodType(eat,p)</div><div class="line"># p.eat=eat</div><div class="line">p.eat()</div></pre></td></tr></table></figure>
<hr>
<pre><code>说明：python是动态语言，这里面可以在定义之后给对象添加属性
例如p.eat=eat  前面eat是自己命名的要新增的属性名称，后面eat代表是
定义的eat方法。虽然eat方法写了参数self，但是并不会自动传入对应对象。
所以需要借助模块，types的MethodType方法，传入方法，和对象即可自动绑定self。
也可以直接写eat=types.MethodType(eat,p),重要的是后面参数，前面p是可以省略的。
</code></pre><hr>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">静态方法案例：</div><div class="line">class Person():</div><div class="line">    pass</div><div class="line"></div><div class="line">@staticmethod</div><div class="line">def eat():</div><div class="line">    print(&quot;----eat------&quot;)</div><div class="line"></div><div class="line">Person.eat=eat</div><div class="line">Person.eat()</div><div class="line"></div><div class="line"></div><div class="line">类方法案例：</div><div class="line">class Person():</div><div class="line">    pass</div><div class="line"></div><div class="line">@classmethod</div><div class="line">def eat(cls):#此处必须有一个参数</div><div class="line">    print(&quot;----eat------&quot;)</div><div class="line">Person.eat=eat</div><div class="line">Person.eat()</div><div class="line"></div><div class="line">对比案例：</div><div class="line">从上面案例可知，python作为动态语言，可以在后期添加任何属性</div><div class="line">但是如果想限制能添加哪些属性呢，可以使用__slots__ = （）达到</div><div class="line"></div><div class="line">class Person():</div><div class="line">    __slots__ = (&quot;name&quot;, &quot;age&quot;)</div><div class="line">    pass</div><div class="line">p=Person()</div><div class="line">p.name=&quot;qiang&quot;</div><div class="line">说明：只要不是__slots__=()后面元组内部包含的属性，其他属性添加都会报错。</div></pre></td></tr></table></figure>
<h2 id="类装饰器"><a href="#类装饰器" class="headerlink" title="类装饰器"></a>类装饰器</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">class Person():</div><div class="line">    def __init__(self,func):</div><div class="line">        print(&quot;-----传入方法名称-----%s&quot;%func.__name__)</div><div class="line">        self.__func=func</div><div class="line">    def __call__(self):</div><div class="line">        self.__func()</div><div class="line"></div><div class="line">@Person</div><div class="line">def test():</div><div class="line">    print(&quot;-----test-----&quot;)</div><div class="line">test()</div></pre></td></tr></table></figure>
<hr>
<pre><code>说明：相当于test=Person(test)
所以没有最后一句代码的话，也会输出：-----传入方法名称-----test
因为Person(test)是装饰过程，而后，执行test()是直接相当于直接了类Person()
可以这么理解，但是真的这样的话，func参数无法传递，也就会报错，只有通过类装饰器
才行，Person()会执行__call__方法，所以输出------test-----。
</code></pre><hr>
<h1 id="元类"><a href="#元类" class="headerlink" title="元类"></a>元类</h1><ul>
<li>类也是对象</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line">创建类的方式一：</div><div class="line">def test(str):</div><div class="line">    if str==&quot;haha&quot;:</div><div class="line">        class Person():</div><div class="line">            print(&quot;-----person--------&quot;)</div><div class="line">    else:</div><div class="line">        class Student():</div><div class="line">            print(&quot;-----student-------&quot;)</div><div class="line"></div><div class="line">test(&quot;haha&quot;)</div><div class="line"></div><div class="line">创建类方式二：</div><div class="line">使用type方法，type用处一，可以查看类型，例如type(100)</div><div class="line">type用处二：动态创建类，type(类名，由父类名称组成的元组(针对继承情况可以为空，包含属性的字段(名称，值)))</div><div class="line">Test=type(&quot;Test&quot;,(),&#123;&#125;),此时type(&quot;Test&quot;,(),&#123;&#125;)就是元类</div><div class="line">例如Person.__class___就是输出type，可知type就是元类。</div><div class="line"></div><div class="line">案例：</div><div class="line">def test(self):</div><div class="line">    print(&quot;----test------%s&quot;%self.num)</div><div class="line"></div><div class="line">T=type(&quot;T&quot;,(),&#123;&quot;test&quot;:test,&quot;num&quot;:10&#125;)</div><div class="line">t=T()</div><div class="line">t.test()</div><div class="line"></div><div class="line">补充：元类就是用来创建类的，元类就是类的类，元类也是元类创建的。</div></pre></td></tr></table></figure>
<h1 id="垃圾回收相关"><a href="#垃圾回收相关" class="headerlink" title="垃圾回收相关"></a>垃圾回收相关</h1><blockquote>
<p>小整数对象池：[-5,257)这些整数对象都是提前创建好的，不会被垃圾回收，所以使用的是同<br>一个对象同理，单个字母也是如此，但是当定义2个相同的字符串时，引用计数为0，触发垃圾回收。</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">对比：</div><div class="line">a=1000</div><div class="line">b=1000</div><div class="line">print(id(a))</div><div class="line">print(id(b))</div></pre></td></tr></table></figure>
<hr>
<pre><code>此时两个id输出一致，理论上不是应该不一致吗？应该这么解释，在文本或ide情况下，内部做了优化
同一个整数对象，避免频繁创建，所以尽量使用第一次创建的地方，但是这和小整数对象池
在python内部已经提前创建完毕不同，这些是执行到a=1000才创建，但是a=100不用创建，直接
指向python内置的100，验证方法是，a=100,id(a)不论在ide，文本，ipython下永远相同，但是
小整数对象池之外就不是了，同理单个字母也是。

大整数对象池，均会创建一个新的对象，大整数对象池，默认是空的，创建时候，才会有内容，
不是小整数的，均是大整数对象池。
</code></pre><hr>
<h1 id="intern机制"><a href="#intern机制" class="headerlink" title="intern机制"></a>intern机制</h1><ul>
<li>能用一份就用一份。</li>
</ul>
<hr>
<pre><code>a=&quot;hello&quot;
b=&quot;hello&quot;
print(id(a))#2946860949832
print(id(b))#946860949832
这种能用一份就用一份，但是如果包含空格等特殊符号，则不会使用一份，但是ide和文本下不成立
，应是内部做了优化，还是使用同一份。但是汉字等确实是不使用同一份。
del a:可以强制删除a的定义，其对应引用计数会-1，可以用于验证小整数对象池。
</code></pre><hr>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">引用计数案例：</div><div class="line">引用计数大部分时间是可以解决垃圾回收的，但是当循环引用的时候，会有问题</div><div class="line">import gc</div><div class="line">class ClassA():</div><div class="line">    pass</div><div class="line"></div><div class="line">def f2():</div><div class="line">    while True:</div><div class="line">        c1=ClassA()</div><div class="line">        c2=ClassA()</div><div class="line">        c1.t=c2</div><div class="line">        c2.t=c1</div><div class="line">        del c1</div><div class="line">        del c2</div><div class="line">gc.disable() #使gc暂时不可用</div><div class="line">f2()</div><div class="line">说明：发现python暂用内存迅速增高，最后程序崩溃。</div><div class="line">虽然del c1，则c1初始化时候创建内存空间引用计数-1，但是，c2初始化时候创建内存空间持有</div><div class="line">c1内存空间引用，所以引用计数是1，不是0，同理，c2也是 如此，不会被回收。</div></pre></td></tr></table></figure>
<h1 id="隔代回收："><a href="#隔代回收：" class="headerlink" title="隔代回收："></a>隔代回收：</h1><hr>
<pre><code>        a  &lt;-&gt;  b  &lt;-&gt;  c  &lt;-&gt;  d
python的创建对象，都会类似这样在一条链上，当循环引用的时候，最后那些本该本GC的引用
计数还是1，没法回收，python的隔代回收就会把这条链上的所有引用计数都-1，这样真正需要
引用，不应该被回收的，还是不是0，那些因为互相引用的就会变成0，gc生效。

上面是简略说明，完整说明如下：
其实python是三条链，第一条链子就是如上的链子，专门存放新创建的对象。
当满足某个条件时候，会触发上面说明的全部引用-1操作，然后把0清空，不是0的挪移到
但是注意，挪移只会挪移没有相互引用的，比如果，c1,c2存在多个相互引用，-1之后还不是0，
它不会被挪移到链2，而是等待下一次触发，直到彻底变为0之后gc回收，其他没有相互引用的，
会直接挪移到下一条链，第二条链子上面，此时第一条链子上面已经不存在清空之前的对象，是个白板。
比如说，链子1触发1000次，链子2才会触发一次，也是-1操作，避免内存爆表，同理还有链子3
也是类似操做，这样做的原因就是可以很有效的避免互相引用内存占用过多，提高效率。

完善：
gc.get_threshold()会得到类似(700,10,10)这样元组
700意思是，当新创建对象减去已经回收的对象大于700，就会触发第一条链的回收
10，每清理10次链表1，会把2链表清理一次，会顺带清理一次链表1。
10，每清理10次链表2，会清理链表3一次，顺便把前两个链表都清理.

gc.get_count()会得到类似(72, 6, 22)元组
和上面类似
72：达到698会清理链1，10次之后会清理一次链2和链1，同时第二个数加1
数字2到10之后，会清理一次链3，2，然后数字3加1，当数字3变化为306(windows python3)
时候，会清理链3，2，1，然后数字3重置为0.
gc.collect()#显式执行垃圾回收
</code></pre><hr>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">案例：</div><div class="line">import gc</div><div class="line">class ClassA():</div><div class="line">    pass</div><div class="line"></div><div class="line">def f2():</div><div class="line">    while True:</div><div class="line">        c1=ClassA()</div><div class="line">        c2=ClassA()</div><div class="line">        c1.t=c2</div><div class="line">        c2.t=c1</div><div class="line">        del c1</div><div class="line">        del c2</div><div class="line">		print( gc.garbage)#会是空列表,因为还没清理</div><div class="line">        gc.collect()</div><div class="line">		print( gc.garbage)#打印垃圾清理的列表，清理哪些东西</div><div class="line">gc.disable() </div><div class="line">f2()</div></pre></td></tr></table></figure>
<blockquote>
<p>说明：即使gc.disable() 禁用了垃圾回收，但是手动gc.collect()也可以实现垃圾回收，<br>python占用不会增高。所谓的垃圾清理，其实就是调用对象对应的<strong>del</strong>方法，如果在对<br>象内部重写了<strong>del_</strong>方法，则垃圾清理无效，这是gc的不足。</p>
</blockquote>
<hr>
<pre><code>获取引用计数：
import sys
a=&quot;hello world&quot;
sys.getrefcount(a) #2 因为a当作参数传递，也是引用+1
</code></pre><hr>
<h1 id="内建属性"><a href="#内建属性" class="headerlink" title="内建属性"></a>内建属性</h1><hr>
<pre><code>__init__    构造初始化函数     创建实例后，赋值时使用，在__new__之后
__new__     生成实例所需属性   创建实例时
__class__   实例所在的类        实例.__class___
__str__     实例字符串表示，可读性   print(类实例),如果没实现，使用repr结果
__repr__    实例字符串表示，准确性   类实例 回车 或者print(repr(类实例))
__del__     析构                del删除实例
__dict__    实例自定义属性      vars(实例.__dict__)
__doc__     类文档，子类不继承   help(类或实例)
__getattribute__  属性访问拦截器   访问实例属性时，所以其内部最好别调用当前对象属性，否则又调用本身，无休无止
__bases__   类的所有父类构成元素   类名.__bases__
</code></pre><hr>
<h1 id="内建方法"><a href="#内建方法" class="headerlink" title="内建方法"></a>内建方法</h1><h2 id="range-函数"><a href="#range-函数" class="headerlink" title="range()函数"></a>range()函数</h2><hr>
<pre><code>python2：range(0,100) 直接生成[1,2,3...99]，而不是生成器
python2:xrange(0,100) 才是生成xrang(0,100)，更省内存
python3:range(0,100,2)生成rang(0,100)，步数时2.
</code></pre><hr>
<h2 id="map-函数"><a href="#map-函数" class="headerlink" title="map()函数"></a>map()函数</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">map(lambda x:x*x,[1,23])  #[1,4,9]</div><div class="line">map(lambda x,y:x+y,[1,2,3],[4,5,6]) #[5,7,9]</div><div class="line"></div><div class="line">def f1(x,y):</div><div class="line">	return (x,y)</div><div class="line">l1=[0,1,2,3,4,5,6]</div><div class="line">l2=[&apos;Sun&apos;,&apos;M&apos;,&apos;T&apos;,&apos;W&apos;,&apos;T&apos;,&apos;F&apos;,&apos;S&apos;]</div><div class="line">l3=map(f1,l1,l2)</div><div class="line">print(list(l3))</div><div class="line">#[(0,&apos;Sun&apos;)......]</div></pre></td></tr></table></figure>
<h2 id="filter-函数"><a href="#filter-函数" class="headerlink" title="filter()函数"></a>filter()函数</h2><blockquote>
<p>filter(lambda x:x%2,[1,2,3,4])  #[1,3]<br>filter(None,”she”)  #’she’</p>
</blockquote>
<h2 id="reduce-函数"><a href="#reduce-函数" class="headerlink" title="reduce()函数"></a>reduce()函数</h2><hr>
<pre><code>reduce(lambda x,y:x+y,[1,2,3,4])  #10
说明：1给x,2给y，然后计算结果给x,然后3给y，依此类推
reduce(lambda x,y:x+y,[1,2,3,4],5) #15
说明：会把5给x,1给y,然后结果给x,之后2给y,依次类推
reduce(lambda x,y:x+y,[&apos;aa&apos;,&apos;bb&apos;,&apos;cc&apos;],&apos;dd&apos;)  #&apos;ddaabbcc&apos;
python3里，reduce函数已经从全局移除，需要引入from functools import reduce
</code></pre><hr>
<h2 id="sort-函数"><a href="#sort-函数" class="headerlink" title="sort()函数"></a>sort()函数</h2><hr>
<pre><code>sorted([1,4,2,6,3,5]) #[1,2,3,4,5,6]
sorted([1,4,2,6,3,5],reverse=1)  #[6,5,4,3,2,1] 说明reverse=True也可
sorted[[&apos;dd&apos;,&apos;aa&apos;,&apos;cc&apos;,&apos;bb&apos;],reverse=1] #[&apos;dd&apos;,&apos;cc&apos;,&apos;bb&apos;,&apos;aa&apos;]
</code></pre><hr>
<h1 id="集合set"><a href="#集合set" class="headerlink" title="集合set"></a>集合set</h1><hr>
<pre><code>可以增删查改等等，但是不能有重复元素
a={1,2,1,1,4,5}
print(a)  #{1, 2, 4, 5}
b=[1,1,1,2]
c=set(b)
print(c) #{1, 2}
说明：集合可以求&amp;  |  -  交集，并集，差集
还有^  对称差集，例如b^B 结果时它俩都有的加起来但是去除两者相同的部分。
</code></pre><hr>
<h1 id="functools常用函数集合"><a href="#functools常用函数集合" class="headerlink" title="functools常用函数集合"></a>functools常用函数集合</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">偏函数：</div><div class="line">import functools</div><div class="line">def showarg(*args,**kw):</div><div class="line">    print(args)</div><div class="line">    print(kw)</div><div class="line">p1=functools.partial(showarg,1,2,3)</div><div class="line">p1()</div><div class="line">p1(4,5,6)</div><div class="line">p1(a=&apos;python&apos;,b=&apos;itcast&apos;)</div><div class="line">p2=functools.partial(showarg,a=3,b=&apos;linux&apos;)</div><div class="line">p2()</div><div class="line">p2(1,2)</div><div class="line">输出：</div><div class="line">(1, 2, 3)</div><div class="line">&#123;&#125;</div><div class="line">(1, 2, 3, 4, 5, 6)</div><div class="line">&#123;&#125;</div><div class="line">(1, 2, 3)</div><div class="line">&#123;&apos;a&apos;: &apos;python&apos;, &apos;b&apos;: &apos;itcast&apos;&#125;</div><div class="line">-----------------------------------</div><div class="line">()</div><div class="line">&#123;&apos;a&apos;: 3, &apos;b&apos;: &apos;linux&apos;&#125;</div><div class="line">(1, 2)</div><div class="line">&#123;&apos;a&apos;: 3, &apos;b&apos;: &apos;linux&apos;&#125;</div><div class="line">()</div><div class="line">&#123;&apos;a&apos;: &apos;python&apos;, &apos;b&apos;: &apos;itcast&apos;&#125;</div><div class="line">说明：偏函数，就是会把partial参数二默认传递进去，而且不冲突新传入的参数</div></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/08/10/Python知识点二(对象)/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Qiang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="飞奔的小猿猴">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/08/10/Python知识点二(对象)/" itemprop="url">Python知识点二(对象)</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-08-10T20:43:30+08:00">
                2017-08-10
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Python/" itemprop="url" rel="index">
                    <span itemprop="name">Python</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="self"><a href="#self" class="headerlink" title="self"></a>self</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">class Cat:</div><div class="line">    def eat(self):</div><div class="line">        print(&quot;猫吃鱼&quot;)</div><div class="line"></div><div class="line">    def instrouce(self):</div><div class="line">        print(&quot;%s的年纪是：%d&quot; % (self.name, self.age))</div><div class="line">        #self代表传入对象，约定写法是self，但是也可以是其他任何变量</div><div class="line"></div><div class="line">tom = Cat()</div><div class="line">tom.eat()</div><div class="line">tom.name = &quot;阿强&quot;</div><div class="line">tom.age = 13</div><div class="line">tom.instrouce()</div></pre></td></tr></table></figure>
<h1 id="init"><a href="#init" class="headerlink" title="init"></a><strong>init</strong></h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">class Cat:</div><div class="line">    def __init__(self,name,age):</div><div class="line">        self.name=name</div><div class="line">        self.age=age</div><div class="line"></div><div class="line">    def eat(self):</div><div class="line">        print(&quot;%s猫吃鱼&quot;%(self.name))</div><div class="line"></div><div class="line">    def instrouce(self):</div><div class="line">        print(&quot;%s的年纪是：%d&quot; % (self.name, self.age))</div><div class="line"></div><div class="line">tom = Cat(&quot;强&quot;,13)</div><div class="line">tom.eat()</div><div class="line">tom.instrouce()</div><div class="line">补充：__init__方法在创建对象时候就会被调用</div></pre></td></tr></table></figure>
<h1 id="str"><a href="#str" class="headerlink" title="str"></a><strong>str</strong></h1><blockquote>
<p>类似于重写java的tostring方法</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">class Cat:</div><div class="line">    def __init__(self, name):</div><div class="line">        self.name = name</div><div class="line"></div><div class="line">    def __str__(self):</div><div class="line">        return &quot;%s&quot; % (self.name)</div><div class="line">tom = Cat(&quot;强&quot;)</div><div class="line">print(tom)//强，如果不重写str方法，则输出内存地址相关信息</div></pre></td></tr></table></figure>
<h1 id="隐藏属性"><a href="#隐藏属性" class="headerlink" title="隐藏属性"></a>隐藏属性</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">class Cat:</div><div class="line">    def set_age(self, age):</div><div class="line">        if age &gt; 0 and age &lt; 100:</div><div class="line">            self.age = age</div><div class="line">        else:</div><div class="line">            self.age = 0</div><div class="line">tom = Cat()</div><div class="line">tom.set_age(-10)</div><div class="line">print(tom.age)</div></pre></td></tr></table></figure>
<h1 id="私有方法"><a href="#私有方法" class="headerlink" title="私有方法"></a>私有方法</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">class Cat:</div><div class="line">    def __send_msg(self):</div><div class="line">        print(&quot;发送短信。。。。&quot;)</div><div class="line">    def checkMoney(self,num):</div><div class="line">        if num&gt;100:</div><div class="line">            self.__send_msg()</div><div class="line">        else:</div><div class="line">            print(&quot;请先充值!&quot;)</div><div class="line">tom = Cat()</div><div class="line">#tom.__send_msg() 双下划线开头的是私有方法，不能外部直接调用，只能类内部使用</div><div class="line">tom.checkMoney(100)</div></pre></td></tr></table></figure>
<h1 id="del"><a href="#del" class="headerlink" title="del"></a><strong>del</strong></h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">案例一：</div><div class="line">class Person:</div><div class="line">    def __del__(self):</div><div class="line">        print(&quot;对象被销毁&quot;)</div><div class="line">p1 = Person()</div><div class="line">p2 = p1</div><div class="line">del p1</div><div class="line">print(&quot;=======================&quot;)</div><div class="line">#=======================</div><div class="line">#对象被销毁</div><div class="line"></div><div class="line">案例二：</div><div class="line">class Person:</div><div class="line">    def __del__(self):</div><div class="line">        print(&quot;对象被销毁&quot;)</div><div class="line">p1 = Person()</div><div class="line">p2 = p1</div><div class="line">del p1</div><div class="line">del p2</div><div class="line">print(&quot;=======================&quot;)</div><div class="line"></div><div class="line">对象被销毁</div><div class="line">=======================</div></pre></td></tr></table></figure>
<blockquote>
<p>说明：del是删除引用计数的，当对象引用是0的时候就会调用内部<strong>del_</strong>方法进行销毁，否则就是程序执行完毕进行销毁。</p>
</blockquote>
<hr>
<p>  补充：<br>  import sys<br>  class Person:<br>      def <strong>del</strong>(self):<br>          print(“对象被销毁”)<br>  p1 = Person()<br>  p2 = p1<br>  print(sys.getrefcount(p1))#3  回避实际引用大一(该方法就是得到引用技术)<br>  del p1<br>  del p2</p>
<p>  #如果已经删除完了引用，则此时在使用sys.getrefcount()会报错<br>  print(“=======================”)</p>
<p>  #对象被销毁</p>
<p>  #=======================</p>
<hr>
<h1 id="继承"><a href="#继承" class="headerlink" title="继承"></a>继承</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">class Person:</div><div class="line">    def test(self):</div><div class="line">        print(&quot;测试&quot;)</div><div class="line">class Qiang(Person):</div><div class="line">    pass</div><div class="line"></div><div class="line">q=Qiang()</div><div class="line">q.test()</div><div class="line">注意：可以多重继承</div></pre></td></tr></table></figure>
<h1 id="重写"><a href="#重写" class="headerlink" title="重写"></a>重写</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line">class Person:</div><div class="line">    def test(self):</div><div class="line">        print(&quot;测试&quot;)</div><div class="line">class Qiang(Person):</div><div class="line">    def test(self):</div><div class="line">        print(&quot;强测试&quot;)</div><div class="line"></div><div class="line">q=Qiang()</div><div class="line">q.test()#强测试</div><div class="line"></div><div class="line">案例：重写同时，调用父类的被重写方法</div><div class="line">说明：理论上重写之后，父类同名方法不会被执行</div><div class="line"></div><div class="line">方式一：</div><div class="line">class Person:</div><div class="line">    def test(self):</div><div class="line">        print(&quot;测试&quot;)</div><div class="line">class Qiang(Person):</div><div class="line">    def test(self):</div><div class="line">        print(&quot;强测试&quot;)</div><div class="line">        super().test()</div><div class="line">q=Qiang()</div><div class="line">q.test()</div><div class="line"># 强测试</div><div class="line"># 测试</div><div class="line"></div><div class="line">方式二：</div><div class="line">class Person:</div><div class="line">    def test(self):</div><div class="line">        print(&quot;测试&quot;)</div><div class="line">class Qiang(Person):</div><div class="line">    def test(self):</div><div class="line">        print(&quot;强测试&quot;)</div><div class="line">        Person.test(self)</div><div class="line">q=Qiang()</div><div class="line">q.test()</div><div class="line"># 强测试</div><div class="line"># 测试</div></pre></td></tr></table></figure>
<blockquote>
<p> 补充：私有方法和属性不会被继承，即使子类没有实现<strong>init</strong>方法，也会继承父类的init<br>方法，但是私有的还是不能使用</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line">案例：</div><div class="line">class Person:</div><div class="line">    def __test(self):</div><div class="line">        print(&quot;私有方法&quot;)</div><div class="line"></div><div class="line">    def __init__(self):</div><div class="line">        self.a = 200</div><div class="line">        self.__b = 100</div><div class="line"></div><div class="line">    def test2(self):</div><div class="line">        print(&quot;公有方法%d&quot; % (self.__b))</div><div class="line"></div><div class="line"></div><div class="line">class Qiang(Person):</div><div class="line">    def test1(self):</div><div class="line">        self.test2()</div><div class="line">q=Qiang()</div><div class="line">q.test1()#调用test2是公有方法，test2内部调用私有的__b是可行的，因为在同一个类。</div><div class="line">#如果q.__test()是不行的，报错，继承不继承私有方法和属性</div><div class="line"></div><div class="line">案例：多继承案例</div><div class="line">class Person:</div><div class="line">    def test(self):</div><div class="line">        print(&quot;person&quot;)</div><div class="line">class Nan(Person):</div><div class="line">    def test(self):</div><div class="line">        print(&quot;nan&quot;)</div><div class="line">class Nv(Person):</div><div class="line">    def test(self):</div><div class="line">        print(&quot;nv&quot;)</div><div class="line">class Qiang(Nan,Nv):</div><div class="line">    def test(self):</div><div class="line">        print(&quot;qiang&quot;)</div><div class="line">q=Qiang()</div><div class="line">q.test()#qiang</div><div class="line">print(Qiang.__mro__)</div><div class="line">#(&lt;class &apos;__main__.Qiang&apos;&gt;, &lt;class &apos;__main__.Nan&apos;&gt;, &lt;class &apos;__main__.Nv&apos;&gt;, &lt;class &apos;__main__.Person&apos;&gt;, &lt;class &apos;object&apos;&gt;)</div></pre></td></tr></table></figure>
<blockquote>
<p>说明：类名.<strong>mro</strong>查询之后调用顺序，即多继承出现同名方法，子类有则调用子类的<br>如果子类没有，则是使用多继承中第一个，然后第二个，然后父类的父类，然后object类，可以根据<strong>mro</strong>查询顺序验证</p>
</blockquote>
<h1 id="多态"><a href="#多态" class="headerlink" title="多态"></a>多态</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">class Person:</div><div class="line">    def test(self):</div><div class="line">        print(&quot;person&quot;)</div><div class="line">class Student:</div><div class="line">    def test(self):</div><div class="line">        print(&quot;student&quot;)</div><div class="line"></div><div class="line">#下面是函数，类内部的才是方法</div><div class="line">def show(temp):</div><div class="line">    temp.test()</div><div class="line"></div><div class="line">show(Person())#person</div><div class="line">show(Student())#student</div><div class="line">说明：和java多态不同，不是父类对象指向子类对象，python中多态指的是在运行时候才确定类型</div></pre></td></tr></table></figure>
<h1 id="类相关"><a href="#类相关" class="headerlink" title="类相关"></a>类相关</h1><hr>
<p>  类：类对象<br>  对象：实例对象<br>  类中属性：类属性<br>  类属性是实例对象共用的。<br>  实例属性是对应实例对象独属的。<br>  类属性只会定义一次，对象属性会根据对象创建而创建，可能多次</p>
<hr>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">案例：</div><div class="line">class Person:</div><div class="line">    num=0 #类属性</div><div class="line">    def __init__(self):</div><div class="line">        self.a=200  #实例属性</div><div class="line">        Person.num+=1  #类属性自增，必须类型.属性</div><div class="line">p1=Person()</div><div class="line">p2=Person()</div><div class="line">print(Person.num)  #2 因为每一次创建对象都会调用__init__方法，然而类属性的num是不变的，只创建一次</div></pre></td></tr></table></figure>
<h1 id="类方法和静态方法"><a href="#类方法和静态方法" class="headerlink" title="类方法和静态方法"></a>类方法和静态方法</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">类方法案例：</div><div class="line">class Person:</div><div class="line">    #类属性</div><div class="line">    num=0</div><div class="line">    #实例方法</div><div class="line">    def __init__(self):</div><div class="line">        #实例属性</div><div class="line">        self.name=&quot;qiang&quot;</div><div class="line"></div><div class="line">    @classmethod</div><div class="line">    def test(cls):</div><div class="line">        Person.num=100</div><div class="line"></div><div class="line">p=Person()</div><div class="line">#p.test()</div><div class="line">Person.test()</div><div class="line">print(Person.num)#100</div><div class="line">补充：类方法既可以对象调用还可以类调用，其中参数cls也是约定不是规定</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">静态方法案例：</div><div class="line">静态方法一般和类没关系和实例也没关系，类似于工具类</div><div class="line">class Person:</div><div class="line">    @staticmethod</div><div class="line">    def test():</div><div class="line">        pass</div><div class="line">p=Person()</div><div class="line">p.test()</div><div class="line">Person.test()</div><div class="line">补充：静态方法可以没有参数，调用通过对象或者类均可。</div></pre></td></tr></table></figure>
<h1 id="简单工厂模式"><a href="#简单工厂模式" class="headerlink" title="简单工厂模式"></a>简单工厂模式</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line">class CarStore(object):</div><div class="line">    def __init__(self):</div><div class="line">        self.factory = Factory()</div><div class="line"></div><div class="line">    def order(self, car_type):</div><div class="line">        return self.factory.select_car_by_type(car_type)</div><div class="line"></div><div class="line"></div><div class="line">class Factory(object):</div><div class="line">    def select_car_by_type(self,car_type):</div><div class="line">        if car_type == &quot;索纳塔&quot;:</div><div class="line">            return Suonata()</div><div class="line">        elif car_type == &quot;名图&quot;:</div><div class="line">            return Mingtu()</div><div class="line"></div><div class="line"></div><div class="line">class Car:</div><div class="line">    def move(self):</div><div class="line">        print(&quot;车在移动&quot;)</div><div class="line"></div><div class="line"></div><div class="line">class Suonata(Car):</div><div class="line">    pass</div><div class="line"></div><div class="line"></div><div class="line">class Mingtu(Car):</div><div class="line">    pass</div><div class="line"></div><div class="line"></div><div class="line">car_store = CarStore()</div><div class="line">car = car_store.order(&quot;索纳塔&quot;)</div><div class="line">car.move()</div></pre></td></tr></table></figure>
<h1 id="工厂方法模式"><a href="#工厂方法模式" class="headerlink" title="工厂方法模式"></a>工厂方法模式</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line">class Store(object):</div><div class="line">    def select_car(self):</div><div class="line">        pass</div><div class="line"></div><div class="line">    def order(self, car_type):</div><div class="line">        return self.select_car(car_type)</div><div class="line"></div><div class="line"></div><div class="line">class BMWCarStore(Store):</div><div class="line">    def select_car(self, car_type):</div><div class="line">        return BMWFactory.select_car_by_type(car_type)</div><div class="line"></div><div class="line"></div><div class="line">class MINICarStore(Store):</div><div class="line">    def select_car(self, car_type):</div><div class="line">        return self.select_car(car_type)</div><div class="line"></div><div class="line"></div><div class="line">class BMWFactory(object):</div><div class="line">    def select_car_by_type(self, car_type):</div><div class="line">        # 此处省略不写，使用pass代替，实际开发中，此处是类型判断</div><div class="line">        pass</div><div class="line"></div><div class="line"></div><div class="line">class Factory(object):</div><div class="line">    def select_car_by_type(self, car_type):</div><div class="line">        pass</div></pre></td></tr></table></figure>
<h1 id="new方法"><a href="#new方法" class="headerlink" title="new方法"></a><strong>new</strong>方法</h1><hr>
<p>  <strong>new</strong>方法负责创建<br>  <strong>init</strong>方法负责初始化<br>  在Java中构造方法既创建对象，又初始化对象，也就是说python中上面两个方法合起来等效于<br>  构造方法<br>  但是一般写代码时候没有使用<strong>new</strong>方法，是因为会默认调用父类(object)的<strong>new</strong>方法，如果一但<br>  在当前类重写了<strong>new</strong>方法，必须显示的调用父类的<strong>new</strong>方法，否则无法创建该对象。</p>
<hr>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">案例：</div><div class="line">class Dog(object):</div><div class="line">    def __init__(self):</div><div class="line">        print(&quot;init&quot;)</div><div class="line">    def __new__(cls):</div><div class="line">        return object.__new__(cls)</div><div class="line"></div><div class="line">xtq=Dog()</div></pre></td></tr></table></figure>
<hr>
<p>  说明：object.<strong>new</strong>(cls)返回创建对象的引用，也就是<strong>init</strong>中的参数self<br>  执行流程：<br>  Dog()会首先执行<strong>new</strong>方法（子类没有则使用父类的）然后返回值就是创建对象引用<br>  当作参数传递给<strong>init</strong>方法，然后执行<strong>init</strong>方法，<strong>init</strong>返回值传给xtq变量<br>  注意<strong>init</strong>此处<strong>init</strong>虽然没有给明确返回值，但是内部做了处理。</p>
<hr>
<h1 id="单例设计模式"><a href="#单例设计模式" class="headerlink" title="单例设计模式"></a>单例设计模式</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div></pre></td><td class="code"><pre><div class="line">class Dog(object):</div><div class="line">    __instance = None</div><div class="line"></div><div class="line">    def __new__(cls):</div><div class="line">        if cls.__instance == None:</div><div class="line">            cls.__instance = object.__new__(cls)</div><div class="line">            return cls.__instance</div><div class="line">        else:</div><div class="line">            return cls.__instance</div><div class="line"></div><div class="line"></div><div class="line">d1 = Dog()</div><div class="line">d2 = Dog()</div><div class="line">print(&quot;%d,,,,%d&quot; % (id(d1), id(d2)))</div><div class="line">#2167324120680,,,,216732412068</div><div class="line"></div><div class="line">变化案例：</div><div class="line">class Dog(object):</div><div class="line">    __instance = None</div><div class="line"></div><div class="line">    def __new__(cls,name):</div><div class="line">        if cls.__instance == None:</div><div class="line">            cls.__instance = object.__new__(cls)</div><div class="line">            return cls.__instance</div><div class="line">        else:</div><div class="line">            return cls.__instance</div><div class="line">    def __init__(self,name):</div><div class="line">        self.name=name</div><div class="line"></div><div class="line">d1 = Dog(&quot;狗一&quot;)</div><div class="line">print(d1.name)</div><div class="line">d2 = Dog(&quot;狗二&quot;)</div><div class="line">print(d2.name)</div><div class="line">print(d1.name)</div><div class="line">print(id(d1))</div><div class="line">print(id(d2))</div><div class="line">解析：</div><div class="line">输出狗一，狗二，狗二，但是id还是相同的</div><div class="line">之所以会如此是，__new__和__init__是分开的，因为__new__单利，所以</div><div class="line">对象是同一个对象，在调用__init__方法的时候，指向同一个对象，同一片内存空间，</div><div class="line">头一次，是创建name属性，并赋值为狗一，第二次__init__方法会覆盖上一次的值</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">最终单例：</div><div class="line">class Dog(object):</div><div class="line">    __instance = None</div><div class="line">    __flag=True</div><div class="line"></div><div class="line">    def __new__(cls,name):</div><div class="line">        if cls.__instance == None:</div><div class="line">            cls.__instance = object.__new__(cls)</div><div class="line">            return cls.__instance</div><div class="line">        else:</div><div class="line">            return cls.__instance</div><div class="line">    def __init__(self,name):</div><div class="line">        if self.__flag:</div><div class="line">            self.name=name</div><div class="line">            self.__flag=False</div><div class="line"></div><div class="line">d1 = Dog(&quot;狗一&quot;)</div><div class="line">print(d1.name)</div><div class="line">d2 = Dog(&quot;狗二&quot;)</div><div class="line">print(d2.name)</div><div class="line">print(d1.name)</div><div class="line">print(id(d1))</div><div class="line">print(id(d2))</div><div class="line">说明：都输出狗一</div></pre></td></tr></table></figure>
<h1 id="异常"><a href="#异常" class="headerlink" title="异常"></a>异常</h1>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line">python3多异常捕获，利用元组</div><div class="line">try:</div><div class="line">    open(&quot;xxx.txt&quot;)</div><div class="line">except (NameError,FileNotFoundError):</div><div class="line">    print(&quot;异常&quot;)</div><div class="line"></div><div class="line">python2多异常捕获</div><div class="line">try:</div><div class="line">    open(&quot;xxx.txt&quot;)</div><div class="line">except NameError,FileNotFoundError:</div><div class="line">    print(&quot;异常&quot;)</div><div class="line"></div><div class="line">补充：</div><div class="line">try:</div><div class="line">    open(&quot;xxx.txt&quot;)</div><div class="line">except (NameError,FileNotFoundError):</div><div class="line">    print(&quot;异常&quot;)</div><div class="line">except Exception as name:</div><div class="line">    print(&quot;所有异常我都抓&quot;)</div><div class="line">	print(name)  #name是任意变量名称，打印出来是异常名称，例如filenotfoundexception</div><div class="line">else:</div><div class="line">	print(&quot;没有异常才会执行&quot;)</div><div class="line">finally:</div><div class="line">	print(&quot;最后肯定会执行&quot;)</div><div class="line">	说明：上面异常没捕获到的，最后那个exception都可以捕获</div><div class="line">注意：try可以嵌套，另外time.sleep(2) 是延时2秒钟</div><div class="line">import time</div><div class="line">time.sleep(2)</div><div class="line">print(&quot;测试&quot;)</div><div class="line"></div><div class="line">抛出异常：raise</div></pre></td></tr></table></figure>
<h1 id="真假"><a href="#真假" class="headerlink" title="真假"></a>真假</h1><blockquote>
<p> None  “”  0   [] {} 等等都是代表假，相当于False</p>
</blockquote>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/08/06/CSharp线程和通信/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Qiang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="飞奔的小猿猴">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/08/06/CSharp线程和通信/" itemprop="url">进程和通信</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-08-06T21:22:10+08:00">
                2017-08-06
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Net/" itemprop="url" rel="index">
                    <span itemprop="name">.Net</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="进程"><a href="#进程" class="headerlink" title="进程"></a>进程</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">//获得所以进程</div><div class="line">         Process[] pros = Process.GetProcesses();</div><div class="line">         foreach (var item in pros)</div><div class="line">         &#123;</div><div class="line">             //item.Kill(); 杀死进程</div><div class="line">             Console.WriteLine(item);</div><div class="line">         &#125;</div><div class="line">         //打开指定应用程序</div><div class="line">         Process.Start(&quot;calc&quot;);//计算器</div><div class="line">         Process.Start(&quot;chrome&quot;, &quot;http://www.baidu.com&quot;);</div><div class="line">         Console.ReadKey();</div><div class="line">         //打开文件</div><div class="line">         Process p1 = new Process();</div><div class="line">         ProcessStartInfo psi = new ProcessStartInfo(@&quot;文件路径&quot;);</div><div class="line">         p1.StartInfo = psi;</div><div class="line">         p1.Start();</div></pre></td></tr></table></figure>
<h1 id="线程"><a href="#线程" class="headerlink" title="线程"></a>线程</h1><hr>
<pre><code>前台线程：只有所有的前台线程都关闭了才能完成程序关闭
后台线程: 只要所有的前台线程结束，后台线程自动结束。
默认创建的线程是前台线程
</code></pre><h2 id="—"><a href="#—" class="headerlink" title="—"></a>—</h2><pre><code>方法：
Thread.CurrentThread: 获取当前线程引用
Name  线程名
Thread.Sleep(毫秒值) 线程睡眠
</code></pre><hr>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div></pre></td><td class="code"><pre><div class="line">基本案例：</div><div class="line">Thread t;</div><div class="line">        private void button1_Click(object sender, EventArgs e)</div><div class="line">        &#123;</div><div class="line">            t = new Thread(Test);</div><div class="line">            t.IsBackground = true;//标记为后台线程</div><div class="line">            //并不是启动线程，具体执行时间，cpu决定</div><div class="line">            t.Start();//线程准备就绪</div><div class="line">        &#125;</div><div class="line">        public void Test()</div><div class="line">        &#123;</div><div class="line">            for (int i = 0; i &lt; 10000; i++)</div><div class="line">            &#123;</div><div class="line">                textBox1.Text = i.ToString();</div><div class="line">                //Console.WriteLine(i);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        /// &lt;summary&gt;</div><div class="line">        /// 窗体加载时候就 执行</div><div class="line">        /// &lt;/summary&gt;</div><div class="line">        /// &lt;param name=&quot;sender&quot;&gt;&lt;/param&gt;</div><div class="line">        /// &lt;param name=&quot;e&quot;&gt;&lt;/param&gt;</div><div class="line">        private void Form1Load(object sender, EventArgs e)</div><div class="line">        &#123;</div><div class="line">            //取消跨线程访问检查</div><div class="line">            //因为默认.net不允许跨线程访问，例如，在子线程更新</div><div class="line">            //主线程创建的texbox内部内容，就属于跨线程访问，如下</div><div class="line">            //设置，就不会报错</div><div class="line">            Control.CheckForIllegalCrossThreadCalls = false;</div><div class="line">        &#125;</div><div class="line">        /// &lt;summary&gt;</div><div class="line">        /// 点击窗体的x正要关闭窗体的时候</div><div class="line">        /// &lt;/summary&gt;</div><div class="line">        /// &lt;param name=&quot;sender&quot;&gt;&lt;/param&gt;</div><div class="line">        /// &lt;param name=&quot;e&quot;&gt;&lt;/param&gt;</div><div class="line">        private void FormClosing(object sender, FormClosingEventArgs e)</div><div class="line">        &#123;</div><div class="line">            //如果不关闭，则此时子线程还在试图更新textbox的内容</div><div class="line">            //但实际上，主线程创建的窗体已经关闭。</div><div class="line">            //不关闭线程，(有可能)造成异常</div><div class="line">            t.Abort();//终止线程</div><div class="line">        &#125;</div></pre></td></tr></table></figure>
<h1 id="socket通信"><a href="#socket通信" class="headerlink" title="socket通信"></a>socket通信</h1><hr>
<pre><code>TCP：三次握手(客户端：你有空吗  服务端：我有空，客户端：我知道了)，三次握手成功之后才通信
UDP：快速，效率高，但是容易数据丢失
</code></pre><hr>
<h2 id="服务端"><a href="#服务端" class="headerlink" title="服务端"></a>服务端</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div></pre></td><td class="code"><pre><div class="line">private void btnStart_Click(object sender, EventArgs e)</div><div class="line">        &#123;</div><div class="line">            try</div><div class="line">            &#123;</div><div class="line">                //当点击开始监听的时候 在服务器端创建一个负责监IP地址跟端口号的Socket</div><div class="line">                //AddressFamily.InterNetwork ：ipv4</div><div class="line">                Socket socketWatch = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);</div><div class="line">                IPAddress ip = IPAddress.Any;//IPAddress.Parse(txtServer.Text);</div><div class="line">                //创建端口号对象</div><div class="line">                IPEndPoint point = new IPEndPoint(ip, Convert.ToInt32(txtPort.Text));</div><div class="line">                //监听，如果端口被占用，则程序会出错</div><div class="line">                socketWatch.Bind(point);</div><div class="line">                //最大同时连接10个，后面的排队</div><div class="line">                /*</div><div class="line">                *给出的说明是：max length of the pending client connections queue;</div><div class="line">                也就是，悬挂的最大客户端连接数。我的理解是，在没有与客户端连接的时候，</div><div class="line">                那么潜在的可以响应的最大客户端连接数是10。但是如果已经有一个连接了，</div><div class="line">                那么潜在的最大客户端连接数还是10。为什么呢，因为一经响应连接，即socket.Accept()成功，</div><div class="line">                那么就会生成新的socket与已连接的客户端通信。那么这个已连接的客户端就不会再占用原来的socket</div><div class="line">                ，相当于腾空了，因此，原socket响应连接的能力还是10。同理，已经连接了10个客户端，</div><div class="line">                那么潜在的可响应的连接依然是10个</div><div class="line">                */</div><div class="line">                socketWatch.Listen(10);</div><div class="line"></div><div class="line">                Thread th = new Thread(Listen);</div><div class="line">                th.IsBackground = true;//线程随着程序结束而结束</div><div class="line">                //之所以服务端要在此处开启子线程，而客户端不用，是因为tcp要等待连接，会阻塞，而客户端不会</div><div class="line">                th.Start(socketWatch);</div><div class="line">            &#125;</div><div class="line">            catch</div><div class="line">            &#123; &#125;</div><div class="line">        &#125;</div><div class="line"></div><div class="line"></div><div class="line">        /// &lt;summary&gt;</div><div class="line">        /// 等待客户端的连接 并且创建与之通信用的Socket</div><div class="line">        /// &lt;/summary&gt;</div><div class="line">        /// </div><div class="line">        Socket socketSend;</div><div class="line">        void Listen(object o)</div><div class="line">        &#123;</div><div class="line">            Socket socketWatch = o as Socket;</div><div class="line">            //等待客户端的连接 并且创建一个负责通信的Socket</div><div class="line">            while (true)</div><div class="line">            &#123;</div><div class="line">                try</div><div class="line">                &#123;</div><div class="line">                    //负责跟客户端通信的Socket</div><div class="line">                    //之所以要多次得到不同的socket对象，是因为此处有一个连接就专门建立一个</div><div class="line">                    //其对应的socket</div><div class="line">                    socketSend = socketWatch.Accept();</div><div class="line">                    //将远程连接的客户端的IP地址和Socket存入集合中</div><div class="line">                    dicSocket.Add(socketSend.RemoteEndPoint.ToString(), socketSend);</div><div class="line">                    //将远程连接的客户端的IP地址和端口号存储下拉框中</div><div class="line">                    cboUsers.Items.Add(socketSend.RemoteEndPoint.ToString());</div><div class="line">                    //192.168.11.78：连接成功</div><div class="line">                    ShowMsg(socketSend.RemoteEndPoint.ToString() + &quot;:&quot; + &quot;连接成功&quot;);</div><div class="line">                    //开启 一个新线程不停的接受客户端发送过来的消息</div><div class="line">                    Thread th = new Thread(Recive);</div><div class="line">                    th.IsBackground = true;</div><div class="line">                    th.Start(socketSend);</div><div class="line">                &#125;</div><div class="line">                catch</div><div class="line">                &#123; &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line"></div><div class="line"></div><div class="line">        /// &lt;summary&gt;</div><div class="line">        /// 服务器端不停的接受客户端发送过来的消息</div><div class="line">        /// &lt;/summary&gt;</div><div class="line">        /// &lt;param name=&quot;o&quot;&gt;&lt;/param&gt;</div><div class="line">        void Recive(object o)</div><div class="line">        &#123;</div><div class="line">            Socket socketSend = o as Socket;</div><div class="line">            while (true)</div><div class="line">            &#123;</div><div class="line">                try</div><div class="line">                &#123;</div><div class="line">                    //客户端连接成功后，服务器应该接受客户端发来的消息</div><div class="line">                    byte[] buffer = new byte[1024 * 1024 * 2];</div><div class="line">                    //实际接受到的有效字节数</div><div class="line">                    int r = socketSend.Receive(buffer);</div><div class="line">                    if (r == 0)</div><div class="line">                    &#123;</div><div class="line">                        break;</div><div class="line">                    &#125;</div><div class="line">                    string str = Encoding.UTF8.GetString(buffer, 0, r);</div><div class="line">                    ShowMsg(socketSend.RemoteEndPoint + &quot;:&quot; + str);</div><div class="line">                &#125;</div><div class="line">                catch</div><div class="line">                &#123; &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line"></div><div class="line"></div><div class="line"> private void Form1_Load(object sender, EventArgs e)</div><div class="line">        &#123;</div><div class="line">            //取消跨线程监检查</div><div class="line">            Control.CheckForIllegalCrossThreadCalls = false;</div><div class="line">        &#125;</div></pre></td></tr></table></figure>
<h2 id="客户端"><a href="#客户端" class="headerlink" title="客户端"></a>客户端</h2><p>```<br>Socket socketSend;<br>        private void btnStart_Click(object sender, EventArgs e)<br>        {<br>            try<br>            {<br>                //创建负责通信的Socket<br>                socketSend = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);<br>                IPAddress ip = IPAddress.Parse(txtServer.Text);<br>                IPEndPoint point = new IPEndPoint(ip, Convert.ToInt32(txtPort.Text));<br>                //获得要连接的远程服务器应用程序的IP地址和端口号<br>                socketSend.Connect(point);<br>                ShowMsg(“连接成功”);</p>
<pre><code>        //开启一个新的线程不停的接收服务端发来的消息
        Thread th = new Thread(Recive);
        th.IsBackground = true;
        th.Start();
    }
    catch
    { }
}
</code></pre><p> /// <summary><br>        /// 客户端给服务器发送消息<br>        /// </summary><br>        /// <param name="sender"><br>        /// <param name="e"><br>        private void btnSend_Click(object sender, EventArgs e)<br>        {<br>            string str = txtMsg.Text.Trim();<br>            byte[] buffer = System.Text.Encoding.UTF8.GetBytes(str);<br>            socketSend.Send(buffer);<br>        }</p>
<pre><code>private void Form1_Load(object sender, EventArgs e)
{
    Control.CheckForIllegalCrossThreadCalls = false;
}
</code></pre><p>``</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/08/06/Android版本DSBridge使用规则/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Qiang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="飞奔的小猿猴">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/08/06/Android版本DSBridge使用规则/" itemprop="url">JsBridge</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-08-06T21:22:10+08:00">
                2017-08-06
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Java/" itemprop="url" rel="index">
                    <span itemprop="name">Java</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Android版本DSBridge使用规则"><a href="#Android版本DSBridge使用规则" class="headerlink" title="Android版本DSBridge使用规则"></a>Android版本DSBridge使用规则</h1><ul>
<li>dsbridge是以<a href="https://pan.baidu.com/s/1pK8GFDh" target="_blank" rel="external">lib</a>形式引用，project structure&gt;dependencies&gt;+&gt;module</li>
<li>修改xmlwebview为如下代码</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt;wendu.dsbridge.DWebView</div><div class="line">   android:layout_width=&quot;match_parent&quot;</div><div class="line">   android:layout_height=&quot;match_parent&quot;/&gt;</div></pre></td></tr></table></figure>
<ul>
<li>java代码复制如下：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">final DWebView webView= (DWebView) findViewById(R.id.webview);</div><div class="line">        webView.setJavascriptInterface(new JsApi());</div><div class="line">        webView.clearCache(true);</div><div class="line">        webView.loadUrl(&quot;file:///android_asset/test.html&quot;);</div><div class="line">        webView.setWebViewClient(new WebViewClient()&#123;</div><div class="line">            @Override</div><div class="line">            public void onPageFinished(WebView view, String url) &#123;</div><div class="line">                super.onPageFinished(view, url);</div><div class="line"></div><div class="line">            &#125;</div><div class="line">        &#125;);</div></pre></td></tr></table></figure>
<ul>
<li>在html中添加代码初始化dsbridge： var bridge = getJsBridge();</li>
</ul>
<h2 id="java调用js"><a href="#java调用js" class="headerlink" title="java调用js"></a>java调用js</h2><blockquote>
<p>为了防止java代码执行时候，js脚本还没有加载完毕，java调用js的事件最好在onPageFinished<br>之后执行，也就是在其内部执行。</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">java调用js代码：</div><div class="line">wv.callHandler(&quot;addIndex&quot;,new Object[]&#123;&quot;html&quot;,1&#125;);</div></pre></td></tr></table></figure>
<blockquote>
<p>addIndex是js中一个全局函数名，传递参数，必须是object类型，内部可以有多个值。</p>
</blockquote>
<h3 id="js响应代码"><a href="#js响应代码" class="headerlink" title="js响应代码"></a>js响应代码</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">function addIndex(a,b)&#123;</div><div class="line">     alert(a+b);</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<hr>
<p>解析：a对应object中第一个元素，依此类推。</p>
<hr>
<h2 id="js调用java"><a href="#js调用java" class="headerlink" title="js调用java"></a>js调用java</h2><blockquote>
<p>webView.setJavascriptInterface(new JsApi());<br>这句代码是把所有相应js的代码放在一起，jsapi就是对应类名</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line">案例：</div><div class="line">public class JsApi&#123;</div><div class="line">    @JavascriptInterface</div><div class="line">    public String testSyn(JSONObject jsonObject) throws JSONException &#123;</div><div class="line">        return jsonObject.getString(&quot;msg&quot;) + &quot;［syn call］&quot;;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    //@JavascriptInterface</div><div class="line">    //此方法没有@JavascriptInterface标注将不会被调用</div><div class="line">    public String testNever(JSONObject jsonObject) throws JSONException &#123;</div><div class="line">        return jsonObject.getString(&quot;msg&quot;) + &quot;[ never call]&quot;;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    @JavascriptInterface</div><div class="line">    public String testNoArgSyn(JSONObject jsonObject) throws JSONException &#123;</div><div class="line">        return  &quot;testNoArgSyn called [ syn call]&quot;;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    @JavascriptInterface</div><div class="line">    public void testNoArgAsyn(JSONObject jsonObject,CompletionHandler handler) throws JSONException &#123;</div><div class="line">        handler.complete( &quot;testNoArgAsyn  called [ asyn call]&quot;);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    @JavascriptInterface</div><div class="line">    public void testAsyn(JSONObject jsonObject, CompletionHandler handler) throws JSONException &#123;</div><div class="line">        handler.complete(jsonObject.getString(&quot;msg&quot;)+&quot; [ asyn call]&quot;);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="js响应代码-1"><a href="#js响应代码-1" class="headerlink" title="js响应代码"></a>js响应代码</h3><blockquote>
<p>例如把该段代码放在js某个点击事件里面</p>
<p><button onclick="testAsyn()">testAsyn</button><br>  function testAsyn(){<br>        bridge.call(“test”, {msg: “testAsyn”}, function (v) {<br>          alert(v);<br>        })<br>    }</p>
</blockquote>
<hr>
<p>解析：testAsyn只是方法名，对应js的点击事件，而参数test对应java中jsapi类中的某个方法，名称<br>要一致，传递给java的数据是以json对象形式存在，对象内部可以有不止一个元素和其对应值。另外注意<br>dsbridge可以直接使用alert。</p>
<hr>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">具体java方法：必须加上 @JavascriptInterface，否则不响应</div><div class="line"> @JavascriptInterface</div><div class="line">    public void testAsyn(JSONObject jsonObject, CompletionHandler handler) throws JSONException &#123;</div><div class="line">        handler.complete(jsonObject.getString(&quot;msg&quot;)+&quot; [ asyn call]&quot;);</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<blockquote>
<p> 可知传递的数据，可以通过jsonObject得到</p>
</blockquote>
<h1 id="总结：DSBridge十分强大，初始化简洁，方法调用明确，建议使用。"><a href="#总结：DSBridge十分强大，初始化简洁，方法调用明确，建议使用。" class="headerlink" title="总结：DSBridge十分强大，初始化简洁，方法调用明确，建议使用。"></a>总结：DSBridge十分强大，初始化简洁，方法调用明确，建议使用。</h1>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/08/06/Android5.0新特性笔记/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Qiang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="飞奔的小猿猴">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/08/06/Android5.0新特性笔记/" itemprop="url">Android 5.0新特性</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-08-06T21:22:10+08:00">
                2017-08-06
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Java/" itemprop="url" rel="index">
                    <span itemprop="name">Java</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="Android-5-0新特性"><a href="#Android-5-0新特性" class="headerlink" title="Android 5.0新特性"></a>Android 5.0新特性</h2><ol>
<li>Material Theme</li>
<li>View的阴影和裁剪</li>
<li>Drawables图形资源</li>
<li>Animations</li>
<li>新增控件-卡片和列表</li>
</ol>
<blockquote>
<p><a href="http://developer.android.com/training/material/index.html" target="_blank" rel="external">http://developer.android.com/training/material/index.html</a></p>
</blockquote>
<h3 id="1-MaterialDesigh概述"><a href="#1-MaterialDesigh概述" class="headerlink" title="1.MaterialDesigh概述"></a>1.MaterialDesigh概述</h3><blockquote>
<p>材质设计,以抽象化的形式展现物理世界的特征。</p>
</blockquote>
<h4 id="Material-主题"><a href="#Material-主题" class="headerlink" title="Material 主题"></a>Material 主题</h4><ul>
<li><p>系统自带的主题</p>
<ol>
<li>@android:style/Theme.Material</li>
<li>@android:style/Theme.Material.Light</li>
<li>@android:style/Theme.Material.Light.DarkActionBar</li>
</ol>
</li>
<li><p>如何自定义主题</p>
<blockquote>
<p>参见<a href="http://developer.android.com/training/material/theme.html" target="_blank" rel="external">http://developer.android.com/training/material/theme.html</a></p>
<p>不同的Theme，不同的属性值。</p>
</blockquote>
</li>
</ul>
<ul>
<li><p>常用的样式属性</p>
<pre><code> &lt;style name=&quot;RedTheme&quot; parent=&quot;android:Theme.Material&quot;&gt;

    &lt;!-- 状态栏颜色，会被statusBarColor效果覆盖--&gt;
    &lt;item name=&quot;android:colorPrimaryDark&quot;&gt;@color/status_red&lt;/item&gt;
    &lt;!-- 状态栏颜色，继承自colorPrimaryDark --&gt;
    &lt;item name=&quot;android:statusBarColor&quot;&gt;@color/status_red&lt;/item&gt;
    &lt;!-- actionBar颜色 --&gt;
    &lt;item name=&quot;android:colorPrimary&quot;&gt;@color/action_red&lt;/item&gt;
    &lt;!-- 背景颜色 --&gt;
    &lt;item name=&quot;android:windowBackground&quot;&gt;@color/window_bg_red&lt;/item&gt;
    &lt;!-- 底部栏颜色 --&gt;
    &lt;item name=&quot;android:navigationBarColor&quot;&gt;@color/navigation_red&lt;/item&gt;

    &lt;!-- ListView的分割线颜色，switch滑动区域色--&gt;
    &lt;item name=&quot;android:colorForeground&quot;&gt;@color/fg_red&lt;/item&gt;
    &lt;!-- popMenu的背景色 --&gt;
    &lt;item name=&quot;android:colorBackground&quot;&gt;@color/bg_red&lt;/item&gt;

    &lt;!-- 控件默认颜色 ，效果会被colorControlActivated取代  --&gt;
    &lt;item name=&quot;android:colorAccent&quot;&gt;@color/control_activated_red&lt;/item&gt;

    &lt;!-- 控件默认时颜色  --&gt;
    &lt;item name=&quot;android:colorControlNormal&quot;&gt;@color/control_normal_red&lt;/item&gt;
    &lt;!-- 控件按压时颜色，会影响水波纹效果，继承自colorAccent  --&gt;
    &lt;item name=&quot;android:colorControlHighlight&quot;&gt;@color/control_highlight_red&lt;/item&gt;
    &lt;!-- 控件选中时颜色 --&gt;
    &lt;item name=&quot;android:colorControlActivated&quot;&gt;@color/control_activated_red&lt;/item&gt;
    &lt;!-- Button的默认背景 --&gt;
    &lt;item name=&quot;android:colorButtonNormal&quot;&gt;@color/button_normal_red&lt;/item&gt;

    &lt;!-- Button，textView的文字颜色  --&gt;
    &lt;item name=&quot;android:textColor&quot;&gt;@color/white_text&lt;/item&gt;
    &lt;!-- RadioButton checkbox等控件的文字 --&gt;
    &lt;item name=&quot;android:textColorPrimaryDisableOnly&quot;&gt;@color/white_text&lt;/item&gt;
    &lt;!-- actionBar的标题文字颜色 --&gt;
    &lt;item name=&quot;android:textColorPrimary&quot;&gt;@color/white_text&lt;/item&gt;
&lt;/style&gt;
</code></pre></li>
</ul>
<h3 id="2-阴影和裁剪"><a href="#2-阴影和裁剪" class="headerlink" title="2.阴影和裁剪"></a>2.阴影和裁剪</h3><h4 id="Z轴属性"><a href="#Z轴属性" class="headerlink" title="Z轴属性"></a>Z轴属性</h4><ul>
<li><p>Z = elevation + translationZ</p>
<pre><code>android:elevation    //静态Z轴的高度。相对于父控件的高度
android:translationZ    //Z轴偏移的高度。
</code></pre></li>
<li><p>高度决定了View的遮盖关系，遮盖关系决定绘制时机。</p>
</li>
</ul>
<h4 id="阴影轮廓"><a href="#阴影轮廓" class="headerlink" title="阴影轮廓"></a>阴影轮廓</h4><pre><code>android:outlineProvider：
none：不显示阴影
background ：按照显示区域来绘制阴影
bounds ：在View的边界描绘阴影
paddedBounds： 在View边界描绘阴影，但会忽略paddingTop和paddingLeft
</code></pre><p>View都是矩形的，阴影默认是沿着背景的边界绘制。如果背景是矩形了自然没有问题。<br>如果是圆形的，分两种情况:</p>
<ol>
<li>通过shape定义的，系统可以识别出真实边界，阴影绘制没有问题.</li>
<li>带有透明通道的png图片，会当成矩形绘制阴影。因为系统无法排除透明通道，识别出真实的边界，</li>
</ol>
<p>为了避免圆形的View显示矩形的阴影，，View增加了一个新的描述来指明内容显示的形状，这就是轮廓。</p>
<ul>
<li><p>布局设置：</p>
<pre><code>android:outlineProvider=&quot;none|background|bounds|paddedBounds&quot; 

none 不显示阴影
background ：按照显示区域来绘制阴影
bounds ：在View的边界描绘阴影
paddedBounds： 在View边界描绘阴影，但会计算paddingTop和paddingLeft
</code></pre></li>
</ul>
<ul>
<li>代码设置：<blockquote>
<p>圆形png图片因为无法排除透明通道，无法识别出真实边界，所以可以自定义，代码提供轮廓</p>
</blockquote>
</li>
</ul>
<pre><code>View.setOutlineProvider(new ViewOutlineProvide(){
     public void getOutline(View view, Outline outline) {
        //矩形，圆形，圆角矩形，Path。除了正常的阴影，也可以自定义奇葩的阴影效果
         outline.setOval(0, 0, view.getWidth(), view.getHeight());
    }
});
</code></pre><h4 id="轮廓裁剪"><a href="#轮廓裁剪" class="headerlink" title="轮廓裁剪"></a>轮廓裁剪</h4><blockquote>
<p>由于轮廓可以自定义，当轮廓小于View的大小，View并不会变小。如果希望View大小跟轮廓匹配，可以裁剪View的大小以适应轮廓，这样也可以通过裁剪生成新的形状。</p>
</blockquote>
<pre><code>Outline.canClip();//是否可以被裁剪。目前支持矩形，圆形，圆角矩形
View.setClipToOutline(true);//允许裁剪View大小以适应轮廓
</code></pre><ul>
<li>只能往小了裁，不能往大了裁。</li>
<li>轮廓大小如果大于View大小，只会扩大阴影的绘制路径，但不会超出父控件边界</li>
<li>裁剪的本质是绘制时裁剪画布的大小，但不会改变View的测量大小，触摸区域。</li>
</ul>
<h3 id="3-Drawables图形资源"><a href="#3-Drawables图形资源" class="headerlink" title="3. Drawables图形资源"></a>3. Drawables图形资源</h3><ul>
<li>Drawable渲染</li>
<li>矢量图</li>
<li>色彩提取</li>
</ul>
<h4 id="色彩渲染"><a href="#色彩渲染" class="headerlink" title="色彩渲染"></a>色彩渲染</h4><ul>
<li><p>如何设置</p>
<pre><code>代码：
    Drawable#setTint(int color);//设置渲染色
    Drawable#setTintMode(PorterDuff.Mode tintMode);//设置渲染模式
xml文件：
    //可以应用xml定义的bitmap或者ImageView或者View的background等涉及到drawable的地方.
    android:tint
    android:tintMode
</code></pre></li>
<li><p>渲染模式</p>
<blockquote>
<p>PorterDuff.Mode 18种模式，其决定了原图颜色和渲染颜色的取舍和合成规则。</p>
<p>原理：将原图颜色Dst与渲染颜色Src每个像素点的alpha和color值通过算法计算得到新的颜色，以实现不同的混合效果。</p>
<p>效果参见ApiDemos-Graphics-Xfermodes.演示了16种效果</p>
</blockquote>
</li>
</ul>
<h4 id="矢量图"><a href="#矢量图" class="headerlink" title="矢量图"></a>矢量图</h4><pre><code>    &lt;vector xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;
        android:height=&quot;300dp&quot;//宽
        android:width=&quot;300dp&quot;//宽
        android:viewportHeight=&quot;40&quot;//画布高
        android:viewportWidth=&quot;40&quot;//画布宽 虚拟大小，pathData中距离的参考
        &gt;
        &lt;path android:fillColor=&quot;#ff00ff&quot;
                android:pathData=&quot;M20.5,9.5
                        c-1.955,0,-3.83,1.268,-4.5,3
                        c-0.67,-1.732,-2.547,-3,-4.5,-3
                        C8.957,9.5,7,11.432,7,14
                        c0,3.53,3.793,6.257,9,11.5
                        c5.207,-5.242,9,-7.97,9,-11.5
                        C25,11.432,23.043,9.5,20.5,9.5z&quot;
                /&gt;
&lt;/vector&gt;
</code></pre><h4 id="取色器"><a href="#取色器" class="headerlink" title="取色器"></a>取色器</h4><ul>
<li>android.support.v7.graphics.Palette</li>
</ul>
<pre><code>Vibrant 鲜艳的
Vibrant dark鲜艳的暗色
Vibrant light鲜艳的亮色
Muted 柔和的
Muted dark柔和的暗色
Muted light柔和的亮色

//在子线程可以使用同步操作
 Palette p = Palette.from(bitmap).generate();

 //在主线程使用异步操作
 Palette.from(bitmap).generate(new PaletteAsyncListener() {
     public void onGenerated(Palette p) {
         // Use generated instance

     }
 });


//gradle 添加依赖
dependencies {    
    ...
    compile &apos;com.android.support:palette-v7:21.0.0&apos;
}
</code></pre><ul>
<li><p>其他</p>
<pre><code>//获取某个像素点的颜色值
int color=Bitmap.getPixel(int x, int y);
</code></pre></li>
</ul>
<h3 id="3-Animations"><a href="#3-Animations" class="headerlink" title="3.Animations"></a>3.Animations</h3><ul>
<li>Touch feedback 触摸反馈</li>
<li>Circular Reveal 循环揭露</li>
<li>Activity transitions</li>
<li>Curved motion</li>
<li>View state changes</li>
</ul>
<h4 id="涟漪效果RippleDrawable"><a href="#涟漪效果RippleDrawable" class="headerlink" title="涟漪效果RippleDrawable"></a>涟漪效果RippleDrawable</h4><ul>
<li><p>Button自带涟漪动画</p>
<ol>
<li>默认效果，有背景，按下带水波纹效果</li>
<li>android:background=”?android:selectableItemBackground”;无背景，按下有水波纹效果</li>
<li>android:background=”?android:selectableItemBackgroundBorderless”;无背景，V控件大小不限制水波纹的扩散</li>
</ol>
</li>
<li><p>自定义涟漪背景：</p>
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;ripple xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot; android:color=&quot;#00FF00&quot;&gt;&lt;!--涟漪颜色--&gt;

    &lt;!--背景颜色，如果没有，则涟漪动画无边界--&gt;
    &lt;item android:drawable=&quot;@color/action_red&quot;/&gt;
&lt;/ripple&gt;
</code></pre></li>
</ul>
<h4 id="圆形缩放动画-RevealAnimator"><a href="#圆形缩放动画-RevealAnimator" class="headerlink" title="圆形缩放动画 RevealAnimator"></a>圆形缩放动画 RevealAnimator</h4><blockquote>
<p>可用于View的隐藏显示的过渡</p>
</blockquote>
<pre><code> /**
 * @param view 要执行动画的View
 * @param centerX 圆心X
 * @param centerY 圆心Y
 * @param startRadius 开始半径
 * @param endRadius 结束半径
 */
ViewAnimationUtils.createCircularReveal(myView, cx, cy, 0, finalRadius);
</code></pre><h3 id="状态切换动画"><a href="#状态切换动画" class="headerlink" title="状态切换动画"></a>状态切换动画</h3><blockquote>
<p>参见<a href="http://developer.android.com/training/material/animations.html#ViewState" target="_blank" rel="external">http://developer.android.com/training/material/animations.html#ViewState</a> </p>
<ul>
<li>StateListAnimator</li>
<li>AnimatedStateListDrawable</li>
</ul>
</blockquote>
<ul>
<li><p>StateListAnimator 属性动画</p>
<ul>
<li>定义      <!-- animate the translationZ property of a view when pressed -->
<pre><code>&lt;selector xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;
    //切换到按下状态时执行的动画
  &lt;item android:state_pressed=&quot;true&quot;&gt;
    &lt;set&gt;
      &lt;objectAnimator android:propertyName=&quot;translationZ&quot;
        android:duration=&quot;@android:integer/config_shortAnimTime&quot;
        android:valueTo=&quot;2dp&quot;
        android:valueType=&quot;floatType&quot;/&gt;
        &lt;!-- you could have other objectAnimator elements
             here for &quot;x&quot; and &quot;y&quot;, or other properties --&gt;
        //同时还可以执行其他的动画
    &lt;/set&gt;
  &lt;/item&gt;
    //切换默认状态时执行的动画
  &lt;item &gt;
    &lt;set&gt;
      &lt;objectAnimator android:propertyName=&quot;translationZ&quot;
        android:duration=&quot;100&quot;
        android:valueTo=&quot;0&quot;
        android:valueType=&quot;floatType&quot;/&gt;
    &lt;/set&gt;
  &lt;/item&gt;
&lt;/selector&gt;
</code></pre></li>
<li><p>使用</p>
<pre><code>xml布局：
android:stateListAnimator属性设置
代码：
View#setStateListAnimator(AnimatorInflater.loadStateListAnimator(this,R.drawable.selector_anim_state));
</code></pre></li>
<li><p>其他</p>
<blockquote>
<p>如果设置了Material Theme，Button默认会有Z轴改变的动画效果。如果想屏蔽，可以设置android:stateListAnimator为 @null</p>
</blockquote>
</li>
</ul>
</li>
<li><p>AnimatedStateListDrawable 过渡帧动画</p>
<ul>
<li><p>定义</p>
<pre><code>&lt;animated-selector
    xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;

    &lt;!-- 按下状态的图片--&gt;
    &lt;item android:id=&quot;@+id/pressed&quot; android:drawable=&quot;@drawable/drawableP&quot;
        android:state_pressed=&quot;true&quot;/&gt;
     &lt;!-- 默认状态的图片--&gt;
    &lt;item android:id=&quot;@id/default&quot;
        android:drawable=&quot;@drawable/drawableD&quot;/&gt;

    &lt;!-- 过渡帧动画 --&gt;
    &lt;transition android:fromId=&quot;@+id/default&quot; android:toId=&quot;@+id/pressed&quot;&gt;
        &lt;animation-list&gt;
            //定义每一帧的图片资源
            &lt;item android:duration=&quot;15&quot; android:drawable=&quot;@drawable/dt1&quot;/&gt;
            &lt;item android:duration=&quot;15&quot; android:drawable=&quot;@drawable/dt2&quot;/&gt;
            ...
        &lt;/animation-list&gt;
    &lt;/transition&gt;
    ...
&lt;/animated-selector&gt;
</code></pre></li>
</ul>
</li>
</ul>
<pre><code>- 如何使用

    android:background当成普通drawable使用
</code></pre><h4 id="矢量图动画-AnimatedVectorDrawable"><a href="#矢量图动画-AnimatedVectorDrawable" class="headerlink" title="矢量图动画 AnimatedVectorDrawable"></a>矢量图动画 AnimatedVectorDrawable</h4><blockquote>
<p>参见<a href="http://developer.android.com/training/material/animations.html#AnimVector" target="_blank" rel="external">http://developer.android.com/training/material/animations.html#AnimVector</a></p>
</blockquote>
<ol>
<li><p>在drawable目录定义一个<vector>矢量图</vector></p>
<pre><code>&lt;!-- res/drawable/vectordrawable.xml --&gt;
vector xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;
android:height=&quot;64dp&quot;
android:width=&quot;64dp&quot;
android:viewportHeight=&quot;600&quot;
android:viewportWidth=&quot;600&quot;&gt;
    &lt;group
        android:name=&quot;rotationGroup&quot;
        android:pivotX=&quot;300.0&quot;
        android:pivotY=&quot;300.0&quot;
        android:rotation=&quot;45.0&quot; &gt;
        &lt;path
            android:name=&quot;v&quot;
            android:fillColor=&quot;#000000&quot;
            android:pathData=&quot;M300,70 l 0,-70 70,70 0,0 -70,70z&quot; /&gt;
    &lt;/group&gt;
&lt;/vector&gt;
</code></pre></li>
<li><p>在drawable目录定义一个<animated-vector>矢量图动画</animated-vector></p>
<pre><code>&lt;!-- res/drawable/animvectordrawable.xml --&gt;
&lt;animated-vector xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;
  android:drawable=&quot;@drawable/vectordrawable&quot; &gt;
    &lt;target
        android:name=&quot;rotationGroup&quot;
        android:animation=&quot;@anim/rotation&quot; /&gt;
    &lt;target
    android:name=&quot;v&quot;
    android:animation=&quot;@anim/path_morph&quot; /&gt;
&lt;/animated-vector&gt;
</code></pre></li>
<li><p>在anim目录定义要执行的属性动画</p>
<pre><code>&lt;!-- res/anim/rotation.xml --&gt;
&lt;objectAnimator
android:duration=&quot;6000&quot;
android:propertyName=&quot;rotation&quot;
android:valueFrom=&quot;0&quot;
android:valueTo=&quot;360&quot; /&gt;

&lt;!-- res/anim/path_morph.xml --&gt;
&lt;set xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;
    &lt;objectAnimator
        android:duration=&quot;3000&quot;
        android:propertyName=&quot;pathData&quot;
        android:valueFrom=&quot;M300,70 l 0,-70 70,70 0,0   -70,70z&quot;
        android:valueTo=&quot;M300,70 l 0,-70 70,0  0,140 -70,0 z&quot;
        android:valueType=&quot;pathType&quot; /&gt;
//pathData要求参数个数相同，命令也要相同。
&lt;/set&gt;
</code></pre></li>
</ol>
<ol>
<li><p>使用矢量图动画</p>
<pre><code>animvectordrawable.xml作为background设置给View

//代码中获取到background，因为是特殊的background，播放
Drawable drawable = vector.getBackground();
if (drawable instanceof Animatable) {
   ((Animatable) drawable).start();
}
</code></pre></li>
</ol>
<h3 id="曲线运动"><a href="#曲线运动" class="headerlink" title="曲线运动"></a>曲线运动</h3><blockquote>
<p>参见 <a href="http://developer.android.com/training/material/animations.html#CurvedMotion" target="_blank" rel="external">http://developer.android.com/training/material/animations.html#CurvedMotion</a></p>
</blockquote>
<ul>
<li><p>PathInterpolator    </p>
<blockquote>
<p>通过Path定义动画插入器的运动轨迹.二阶，三阶贝塞尔曲线和自定义Path</p>
</blockquote>
<pre><code>动画插入器：通过运动曲线模型干预动画的执行。&lt;br/&gt;
运动曲线模型：一个 1x1 的正方形内指定一个运动曲线，起点位于 (0,0)，终点 (1,1)，控制点形成运动曲线

//二阶贝塞尔曲线
public PathInterpolator(float controlX, float controlY)

//三阶贝塞尔曲线
public PathInterpolator(float controlX1, float controlY1, float controlX2, float controlY2)

//Path定义运动曲线
public PathInterpolator(Path path)

Path path = new Path();
path.lineTo(0.4f, 0.8f);
path.lineTo(0.6f, 0.0f);
path.lineTo(1f, 1f);//必须从0,0开始，1,1结束
PathInterpolator pathin=new PathInterpolator(path);
</code></pre></li>
</ul>
<ul>
<li><p>ObjectAnimator 属性动画可以通过Path设置View的带X,Y属性</p>
<pre><code> Path path2 = new Path();
path2.lineTo(40, 80);
path2.lineTo(50, 40);
ObjectAnimator.ofFloat(mAnimView,View.TRANSLATION_X,View.TRANSLATION_Y,path2).setDuration(2000).start();
</code></pre></li>
</ul>
<p>注意：Tween动画跟属性动画做动画，Tween动画不该变View真实的位置及大小，属性动画改变真实位置及大小。</p>
<h3 id="Activity转场动画"><a href="#Activity转场动画" class="headerlink" title="Activity转场动画"></a>Activity转场动画</h3><blockquote>
<p>回顾Activity切换动画</p>
<p>新增Activity元素场景转换动画</p>
<pre><code>- 进入、退出、共享元素转换
</code></pre></blockquote>
<ul>
<li><p>回顾Activity切换动画</p>
<pre><code>代码：
    //Activity切换动画。api 16以后出现了更好的选择--ActivityOption
    public void overridePendingTransition(int enterAnim, int exitAnim);//在startActivity之后，finish之前执行，配置进来的和出去的Activity执行的动画
主题：
    //主题配置切换动画
    &lt;style name=&quot;AppTheme&quot; parent=&quot;Theme.Light&quot;&gt;
        ...
         &lt;item name=&quot;android:windowAnimationStyle&quot;&gt;@style/ActivityAnimation&lt;/item&gt;
    &lt;/style&gt;
      &lt;!--Activity的动画 设置给windowAnimationStyle--&gt;
    &lt;style name=&quot;ActivityAnimation&quot; parent=&quot;android:Animation.Activity&quot;&gt;
        &lt;item name=&quot;android:activityOpenEnterAnimation&quot;&gt;@anim/slide_in_left&lt;/item&gt;//从A打开B时B的动画
        &lt;item name=&quot;android:activityOpenExitAnimation&quot;&gt;@anim/slide_out_right&lt;/item&gt;//从A打开B时A的动画
        &lt;item name=&quot;android:activityCloseEnterAnimation&quot;&gt;@anim/push_down_in&lt;/item&gt;//从B返回A时A的动画
        &lt;item name=&quot;android:activityCloseExitAnimation&quot;&gt;@anim/push_down_out&lt;/item&gt;//从B返回A时B的动画
    &lt;/style&gt;
</code></pre></li>
</ul>
<ul>
<li><p>Activity元素场景转换动画</p>
<ul>
<li><p>分类</p>
<ol>
<li><p>进入退出–Visibility</p>
<p> Explode分解 - 从场景中心移入或移出视图。<br><br> Slide滑动 - 从场景边缘移入或移出视图。<br><br> Fade淡入淡出 - 通过调整透明度从场景增添或移除视图<br><br> 可实现接口进行自定义</p>
</li>
<li><p>共享元素动画–    Transition</p>
<p> changeBounds - 为目标视图的布局边界的变化添加动画。<br><br> changeClipBounds - 为目标视图的裁剪边界的变化添加动画。<br><br> changeTransform - 为目标视图的缩放与旋转变化添加动画。<br><br> changeScroll - 为目标视图的ScrollTo操作添加动画。<br><br> changeImageTransform - 为目标图像的大小与缩放变化添加动画。<br></p>
</li>
</ol>
</li>
<li><p>如何使用</p>
<pre><code>1. 通过Theme定义
    &lt;style name=&quot;BaseAppTheme&quot; parent=&quot;android:Theme.Material&quot;&gt;
      &lt;!-- 启用动画 --&gt;
      &lt;item name=&quot;android:windowContentTransitions&quot;&gt;true&lt;/item&gt; 
      &lt;item name=&quot;android:windowActivityTransitions&quot;&gt;true&lt;/item&gt;

      &lt;!-- 进入退出动画 --&gt;
        &lt;item name=&quot;android:windowEnterTransition&quot;&gt;@android:transition/explode&lt;/item&gt;
        &lt;item name=&quot;android:windowExitTransition&quot;&gt;@android:transition/explode&lt;/item&gt;
        &lt;item name=&quot;android:windowReturnTransition&quot;&gt;@android:transition/explode&lt;/item&gt;
        &lt;item name=&quot;android:windowReenterTransition&quot;&gt;@android:transition/explode&lt;/item&gt;
        // 尽快开始进入转换
        &lt;item name=&quot;android:windowAllowEnterTransitionOverlap&quot;&gt;true&lt;/item&gt;

      &lt;!-- 共享元素动画 --&gt;
        &lt;item name=&quot;android:windowSharedElementEnterTransition&quot;&gt;
            @android:transition/move&lt;/item&gt;
        &lt;item name=&quot;android:windowSharedElementExitTransition&quot;&gt;
            @android:transition/move&lt;/item&gt;
        &lt;item name=&quot;android:windowSharedElementReturnTransition&quot;&gt;
            @android:transition/move&lt;/item&gt;
        &lt;item name=&quot;android:windowSharedElementReenterTransition&quot;&gt;
            @android:transition/move&lt;/item&gt;
        &lt;item name=&quot;android:windowSharedElementsUseOverlay&quot;&gt;true&lt;/item&gt;
    &lt;/style&gt;

    Activity里代码设置：

    / 允许使用transitions
    getWindow().requestFeature(Window.FEATURE_CONTENT_TRANSITIONS);
    // 指定进入、退出、返回、重新进入时的transitions
    TransitionSet set = new TransitionSet();//也可设置TransitionSet
    set.addTransition(new Explode());
    set.addTransition(new Fade());
    getWindow().setEnterTransition(new Explode());
    getWindow().setExitTransition(new Explode());
    getWindow().setEnterTransition(new Explode());
    getWindow().setExitTransition(new Explode());
    // 指定进入、退出、返回、重新进入时的共享transitions
    getWindow().setSharedElementEnterTransition(new ChangeTransform());
    getWindow().setSharedElementExitTransition(new ChangeTransform());
    getWindow().setSharedElementReturnTransition(new ChangeTransform());
    getWindow().setSharedElementReenterTransition(new ChangeTransform());

2. 启动Activity
    //没有共享元素
    ActivityOptions options=ActivityOptions.makeSceneTransitionAnimation(this);
    //1个共享元素
    ActivityOptions options = ActivityOptions
    .makeSceneTransitionAnimation(this, sharedElementView, &quot;sharedElementName&quot;);
    //多个共享元素
    ActivityOptions options = ActivityOptions.makeSceneTransitionAnimation(this,
    Pair.create(sharedElementView1, &quot;sharedElementName1&quot;),
    Pair.create(sharedElementView2, &quot;sharedElementName2&quot;));
    // 启动Activity
    startActivity(new Intent(getApplicationContext(), XXXActivity.class), options.toBundle());

    共享元素：利用 android:transitionName 属性对两个布局中的共享元素指定一个通用名称sharedElementName，以便过渡动画的执行

3. 关闭Activity
    调用finishAfterTransition替代finish。返回键默认处理为finishAfterTransition
</code></pre></li>
</ul>
</li>
</ul>
<h3 id="RecyclerView"><a href="#RecyclerView" class="headerlink" title="RecyclerView"></a>RecyclerView</h3><ul>
<li><p>介绍</p>
<ul>
<li>RecyclerView = 灵活的的listview，可实现网格、瀑布流等效果</li>
</ul>
</li>
<li><p>基本功能三要素</p>
<ul>
<li>RecyclerView</li>
<li>LayoutManagers</li>
<li>Adapter</li>
</ul>
</li>
<li><p>显示数据集</p>
<blockquote>
<p>参见 <a href="https://developer.android.com/training/material/lists-cards.html#RecyclerView" target="_blank" rel="external">https://developer.android.com/training/material/lists-cards.html#RecyclerView</a></p>
</blockquote>
<ol>
<li>在布局文件中使用RecyclerView</li>
<li>在Activity中找到RecyclerView</li>
<li>RecyclerView.setLayoutManager(LayoutManager)</li>
<li>RecyclerView.setAdapter(Adapter)</li>
<li>定义Adapter<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyAdapter</span> <span class="keyword">extends</span> <span class="title">RecyclerView</span>.<span class="title">Adapter</span> </span>&#123;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">final</span> List&lt;Pair&lt;String, Integer&gt;&gt; data;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MyAdapter</span><span class="params">(List&lt;Pair&lt;String, Integer&gt;&gt; data)</span> </span>&#123;</div><div class="line">        <span class="keyword">this</span>.data = data;</div><div class="line">    &#125;</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getItemCount</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> data == <span class="keyword">null</span> ? <span class="number">0</span> : data.size();</div><div class="line">    &#125;</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="keyword">public</span> RecyclerView.<span class="function">ViewHolder <span class="title">onCreateViewHolder</span><span class="params">(ViewGroup parent, <span class="keyword">int</span> viewType)</span> </span>&#123;</div><div class="line">        SimpleVH svh = <span class="keyword">new</span> SimpleVH(View.inflate(parent.getContext(), R.layout.item_simple, <span class="keyword">null</span>));</div><div class="line">        <span class="keyword">return</span> svh;</div><div class="line">    &#125;</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onBindViewHolder</span><span class="params">(RecyclerView.ViewHolder holder, <span class="keyword">int</span> position)</span> </span>&#123;</div><div class="line">        SimpleVH svh = (SimpleVH) holder;</div><div class="line">        svh.iv.setImageResource(data.get(position).second);</div><div class="line">        svh.name.setText(data.get(position).first);</div><div class="line">        svh.item.setText(<span class="string">"position: "</span> + position );</div><div class="line"></div><div class="line">    &#125;</div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">SimpleVH</span> <span class="keyword">extends</span> <span class="title">RecyclerView</span>.<span class="title">ViewHolder</span> </span>&#123;</div><div class="line">        ImageView iv;</div><div class="line">        TextView name;</div><div class="line">        TextView item;</div><div class="line"></div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="title">SimpleVH</span><span class="params">(View itemView)</span> </span>&#123;</div><div class="line">            <span class="keyword">super</span>(itemView);</div><div class="line">            iv = (ImageView) itemView.findViewById(R.id.iv);</div><div class="line">            name = (TextView) itemView.findViewById(R.id.name);</div><div class="line">            item = (TextView) itemView.findViewById(R.id.item);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ol>
</li>
</ul>
<ul>
<li><p>显示网格布局及瀑布流布局</p>
<blockquote>
<p>实质上就是设置不同的LayoutManager</p>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">- LinearLayoutManager(Context context, </div><div class="line">                    <span class="keyword">int</span> orientation,  <span class="comment">// 布局方向</span></div><div class="line">                    <span class="keyword">boolean</span> reverseLayout <span class="comment">//是否反转</span></div><div class="line">                    )</div><div class="line">- GridLayoutManager(Context context,</div><div class="line">                    <span class="keyword">int</span> spanCount,  <span class="comment">// 几列</span></div><div class="line">                    <span class="keyword">int</span> orientation, <span class="comment">// 方向</span></div><div class="line">                    <span class="keyword">boolean</span> reverseLayout <span class="comment">//是否反转</span></div><div class="line">                    )</div><div class="line">- StaggeredGridLayoutManager(</div><div class="line">                    <span class="keyword">int</span> spanCount, <span class="comment">// 几列</span></div><div class="line">                    <span class="keyword">int</span> orientation <span class="comment">// 方向</span></div><div class="line">                    )</div></pre></td></tr></table></figure>
</blockquote>
</li>
<li><p>设置点击事件</p>
<ol>
<li>RecyclerView.addOnItemTouchListener<blockquote>
<p>使用了比较底层的API，较为复杂</p>
</blockquote>
</li>
<li><p>通过Adapter将点击事件传递出来</p>
<blockquote>
<p>使用回调的设计手法  </p>
</blockquote>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**adapter*/</span></div><div class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">interface</span> <span class="title">OnItemClickListener</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onItemClick</span><span class="params">(RecyclerView.ViewHolder vh)</span></span>;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setOnItemClickListener</span><span class="params">(OnItemClickListener oicl)</span> </span>&#123;</div><div class="line">    <span class="keyword">this</span>.oicl = oicl;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">onItemClick</span><span class="params">(RecyclerView.ViewHolder vh)</span> </span>&#123;</div><div class="line">    <span class="keyword">if</span> (oicl != <span class="keyword">null</span>) &#123;</div><div class="line">        oicl.onItemClick(vh);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="meta">@Override</span></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onBindViewHolder</span><span class="params">(RecyclerView.ViewHolder holder, <span class="keyword">int</span> position)</span> </span>&#123;</div><div class="line">    <span class="comment">//...</span></div><div class="line">    svh.itemView.setOnClickListener(<span class="keyword">new</span> View.OnClickListener() &#123;</div><div class="line">        <span class="meta">@Override</span></div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View v)</span> </span>&#123;</div><div class="line">            <span class="comment">// 通知同一个方法，</span></div><div class="line">            onItemClick(holder);</div><div class="line">        &#125;</div><div class="line">    &#125;);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/**Activity*/</span></div><div class="line">myAdapter.setOnItemClickListener(<span class="keyword">new</span> MyAdapter.OnItemClickListener() &#123;</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onItemClick</span><span class="params">(RecyclerView.ViewHolder vh)</span> </span>&#123;</div><div class="line">        Toast.makeText(NewWidgetActivity.<span class="keyword">this</span>, <span class="string">"position: "</span>+ vh.getAdapterPosition(),Toast.LENGTH_SHORT).show();</div><div class="line">    &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
</li>
</ol>
</li>
<li><p>下拉刷新</p>
<ul>
<li>借助android.support.v4.widget.SwipeRefreshLayout</li>
<li><p>使用方法</p>
<ol>
<li>用SwipeRefreshLayout作为RecyclerView的父控件</li>
<li>SwipeRefreshLayout.setOnRefreshListener</li>
<li>在OnRefreshListener完成数据的获取，然后调用SwipeRefreshLayout.setRefreshing(fasle)</li>
<li><p>个性化</p>
<pre><code>//定制SwipeRefreshLayout的样式
//设置箭头的颜色
swipeRefreshLayout.setColorSchemeColors(Color.RED,Color.GREEN, Color.BLUE);
//设置圆圈的背景 v7 22以后
swipeRefreshLayout.setProgressBackgroundColorSchemeColor(Color.GRAY);
</code></pre></li>
</ol>
</li>
</ul>
</li>
</ul>
<h3 id="CardView"><a href="#CardView" class="headerlink" title="CardView"></a>CardView</h3><ul>
<li>android.support.v7.widget.CardView</li>
<li>使用方法<ol>
<li>在布局中使用android.support.v7.widget.CardView</li>
<li>添加属性<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">CardView常用属性：</div><div class="line">card_view:cardElevation</div><div class="line"> 卡片高度</div><div class="line">card_view:cardMaxElevation</div><div class="line"> 卡片的最大高度</div><div class="line">card_view:cardBackgroundColor</div><div class="line"> 卡片的背景色</div><div class="line">card_view:cardCornerRadius</div><div class="line"> 卡片的圆角大小</div><div class="line">card_view:contentPadding</div><div class="line"></div><div class="line"> 卡片内容于边距的间隔</div><div class="line">card_view:contentPaddingBottom</div><div class="line">card_view:contentPaddingTop</div><div class="line">card_view:contentPaddingLeft</div><div class="line">card_view:contentPaddingRight</div><div class="line">card_view:contentPaddingStart</div><div class="line">card_view:contentPaddingEnd</div><div class="line"></div><div class="line">card_view:cardUseCompatPadding</div><div class="line"> 设置内边距，V21+的版本和之前的版本仍旧具有一样的计算方式</div><div class="line">card_view:cardPreventConrerOverlap</div><div class="line"> 在V20和之前的版本中添加内边距，这个属性为了防止内容和边角的重叠</div></pre></td></tr></table></figure>
</li>
</ol>
</li>
</ul>
<h3 id="与旧版本兼容"><a href="#与旧版本兼容" class="headerlink" title="与旧版本兼容"></a>与旧版本兼容</h3><ul>
<li><p>定义不同的布局</p>
<blockquote>
<p>将使用了新的API的布局放在res/layout-v21/； 其他的放在res/layout/中</p>
</blockquote>
</li>
<li><p>主题定义</p>
<ol>
<li>继承Theme.AppCompat</li>
<li>定义颜色的时候去掉android:的命名空间（针对于新的那一些）<blockquote>
<p>小窍门，所有没有见过的，都去掉，aapt会报错，根据aapt的提示添加android的命名空间</p>
</blockquote>
</li>
</ol>
</li>
<li>可以通过兼容包使用的效果<ol>
<li>RecyclerView </li>
<li>CardView </li>
<li>Palette</li>
</ol>
</li>
<li>不能在21之前版本使用的效果<ol>
<li>Activity transitions</li>
<li>Touch feedback</li>
<li>Reveal animations</li>
<li>Path-based animations</li>
<li>Vector drawables</li>
<li>Drawable tinting</li>
</ol>
</li>
<li>代码要判断运行的环境，使用合适的效果</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/08/06/Android 6.0权限/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Qiang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="飞奔的小猿猴">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/08/06/Android 6.0权限/" itemprop="url">Android 6.0权限</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-08-06T21:22:10+08:00">
                2017-08-06
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Java/" itemprop="url" rel="index">
                    <span itemprop="name">Java</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Android 6.0之前,权限在app安装时候，就直接默认授予，Android 6.0引入运行时权限，动态申请。</p>
<p><strong>注意：</strong>同一组内的任何一个权限被授权了，其他权限也自动被授权。例如，一旦 READ_CALENDAR 被授权了，应用也有 WRITE<em>CALENDAR 权限了。<br>基于权限问题，因为是使用，不做赘述，直接撸代码¬</em>¬</p>
<h1 id="封装权限申请"><a href="#封装权限申请" class="headerlink" title="封装权限申请"></a>封装权限申请</h1><h2 id="Activity代码："><a href="#Activity代码：" class="headerlink" title="Activity代码："></a>Activity代码：</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div></pre></td><td class="code"><pre><div class="line">public class BaseActivity extends AppCompatActivity &#123;</div><div class="line">    @Override</div><div class="line">    protected void onCreate(Bundle savedInstanceState) &#123;</div><div class="line">        super.onCreate(savedInstanceState);</div><div class="line">        setContentView(R.layout.activity_base);</div><div class="line">    &#125;</div><div class="line">    /**</div><div class="line">     * 为子类提供一个权限检查方法</div><div class="line">     * @param permissions</div><div class="line">     * @return</div><div class="line">     */</div><div class="line">    public boolean hasPermission(String... permissions) &#123;</div><div class="line">        for (String permission : permissions) &#123;</div><div class="line">            if (ContextCompat.checkSelfPermission(this, permission) != PackageManager.PERMISSION_GRANTED) &#123;</div><div class="line">                return false;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        return true;</div><div class="line">    &#125;</div><div class="line">    /**</div><div class="line">     * 为子类提供一个权限请求方法</div><div class="line">     * @param code</div><div class="line">     * @param permissions</div><div class="line">     */</div><div class="line">    public void requestPermission(int code, String... permissions) &#123;</div><div class="line">        ActivityCompat.requestPermissions(this,permissions,code);</div><div class="line">    &#125;</div><div class="line">    @Override</div><div class="line">    public void onRequestPermissionsResult(int requestCode, @NonNull String[] permissions, @NonNull int[] grantResults) &#123;</div><div class="line">        switch (requestCode) &#123;</div><div class="line">            case Constant.WRITE_EXTERNAL_CODE:</div><div class="line">                doSDCardPermission();</div><div class="line">                break;</div><div class="line">            case Constant.CALL_PHONT_CODE:</div><div class="line">                //打电话权限回掉处理</div><div class="line">                if (grantResults[0] == PackageManager.PERMISSION_GRANTED) &#123;</div><div class="line">                    doCallPhontPermission();</div><div class="line">                &#125;else&#123;</div><div class="line">                    //提示用户权限未被授予</div><div class="line">                    Toast.makeText(this, &quot;打电话权限未被授予&quot;, Toast.LENGTH_SHORT).show();</div><div class="line">                &#125;</div><div class="line">                break;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    /**</div><div class="line">     * 默认打电话权限处理</div><div class="line">     */</div><div class="line">    public void doCallPhontPermission() &#123;</div><div class="line">    &#125;</div><div class="line">    /**</div><div class="line">     * 默认的写sd卡权限处理</div><div class="line">     */</div><div class="line">    public void doSDCardPermission() &#123;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="权限activity"><a href="#权限activity" class="headerlink" title="权限activity"></a>权限activity</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line">public class PermissionActivity extends BaseActivity implements View.OnClickListener&#123;</div><div class="line">    private Button sd,call;</div><div class="line">    @Override</div><div class="line">    protected void onCreate(Bundle savedInstanceState) &#123;</div><div class="line">        super.onCreate(savedInstanceState);</div><div class="line">        setContentView(R.layout.activity_main);</div><div class="line">        sd= (Button) findViewById(R.id.sd);</div><div class="line">        call= (Button) findViewById(R.id.call);</div><div class="line">        sd.setOnClickListener(this);</div><div class="line">        call.setOnClickListener(this);</div><div class="line">    &#125;</div><div class="line">    @Override</div><div class="line">    public void onClick(View view) &#123;</div><div class="line">        switch (view.getId()) &#123;</div><div class="line">            case R.id.call:</div><div class="line">                callPhone();</div><div class="line">            break;</div><div class="line">            case R.id.sd:</div><div class="line">                break;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    private void callPhone() &#123;</div><div class="line">        if (hasPermission(Manifest.permission.CALL_PHONE)) &#123;</div><div class="line">            //如果有权限就真正打电话，否则请求权限</div><div class="line">            doCallPhone();</div><div class="line">        &#125;else&#123;</div><div class="line">            requestPermission(Constant.CALL_PHONT_CODE,Manifest.permission.CALL_PHONE);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    private void doCallPhone() &#123;</div><div class="line">        Intent i=new Intent(Intent.ACTION_CALL);</div><div class="line">        Uri data= Uri.parse(&quot;tel:&quot;+&quot;10086&quot;);</div><div class="line">        i.setData(data);</div><div class="line">        this.startActivity(i);//此处只是警告，不是错误</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<blockquote>
<p>项目开发，效率问题，也可直接使用第三方。</p>
</blockquote>
<h1 id="第三方权限"><a href="#第三方权限" class="headerlink" title="第三方权限"></a>第三方权限</h1><blockquote>
<p><a href="https://github.com/lovedise/PermissionGen" target="_blank" rel="external">https://github.com/lovedise/PermissionGen</a></p>
</blockquote>
<h2 id="第一步：添加依赖。"><a href="#第一步：添加依赖。" class="headerlink" title="第一步：添加依赖。"></a>第一步：添加依赖。</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">compile &apos;com.lovedise:permissiongen:0.0.6&apos;</div></pre></td></tr></table></figure>
<h2 id="第二步、正常写拨电话请求权限"><a href="#第二步、正常写拨电话请求权限" class="headerlink" title="第二步、正常写拨电话请求权限"></a>第二步、正常写拨电话请求权限</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">//拨打电话</div><div class="line">    public void call() &#123;</div><div class="line">//下面部分直接复制</div><div class="line">        PermissionGen.needPermission(this, 100,//100是端口号，对应下面代码</div><div class="line">                new String[] &#123;</div><div class="line">                        Manifest.permission.CALL_PHONE,//需要请求的权限，根据需要修改，也可以是多个，逗号隔开即可</div><div class="line">                &#125;</div><div class="line">        );</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<h2 id="第三步、使用"><a href="#第三步、使用" class="headerlink" title="第三步、使用"></a>第三步、使用</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">  @PermissionSuccess(requestCode = 100)//此句必须加上，100对应上面</div><div class="line">    private void doCallPhone() &#123;</div><div class="line">//内部是拨打电话逻辑，和框架无关</div><div class="line">        Intent i=new Intent(Intent.ACTION_CALL);</div><div class="line">        Uri data= Uri.parse(&quot;tel:&quot;+&quot;10086&quot;);</div><div class="line">        i.setData(data);</div><div class="line">        this.startActivity(i);//会报警告，但是不影响运行，只是提示。</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<h2 id="第四步、直接写下面即可"><a href="#第四步、直接写下面即可" class="headerlink" title="第四步、直接写下面即可"></a>第四步、直接写下面即可</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">@Override</div><div class="line">   public void onRequestPermissionsResult(int requestCode, @NonNull String[] permissions, @NonNull int[] grantResults) &#123;</div><div class="line">       PermissionGen.onRequestPermissionsResult(this, requestCode, permissions, grantResults);</div></pre></td></tr></table></figure>
<h1 id="整体代码："><a href="#整体代码：" class="headerlink" title="整体代码："></a>整体代码：</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div></pre></td><td class="code"><pre><div class="line">//使用框架请求权限示例代码</div><div class="line">public class MainActivity extends AppCompatActivity &#123;</div><div class="line">    private Button randw,call;</div><div class="line">    private ImageView iv;</div><div class="line">    @Override</div><div class="line">    protected void onCreate(Bundle savedInstanceState) &#123;</div><div class="line">        super.onCreate(savedInstanceState);</div><div class="line">        setContentView(R.layout.activity_main);</div><div class="line">        call= (Button) findViewById(R.id.call);</div><div class="line">        randw= (Button) findViewById(R.id.randw);</div><div class="line">        iv= (ImageView) findViewById(R.id.iv);</div><div class="line">        call.setOnClickListener(new View.OnClickListener() &#123;</div><div class="line">            @Override</div><div class="line">            public void onClick(View view) &#123;</div><div class="line">                call();</div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line">        randw.setOnClickListener(new View.OnClickListener() &#123;</div><div class="line">            @Override</div><div class="line">            public void onClick(View view) &#123;</div><div class="line">                randw();</div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line">    &#125;</div><div class="line">    //拨打电话</div><div class="line">    public void call() &#123;</div><div class="line">        PermissionGen.needPermission(this, 100,</div><div class="line">                new String[] &#123;</div><div class="line">                        Manifest.permission.CALL_PHONE,</div><div class="line">                &#125;</div><div class="line">        );</div><div class="line">    &#125;</div><div class="line">    @PermissionSuccess(requestCode = 100)</div><div class="line">    private void doCallPhone() &#123;</div><div class="line">        Intent i=new Intent(Intent.ACTION_CALL);</div><div class="line">        Uri data= Uri.parse(&quot;tel:&quot;+&quot;10086&quot;);</div><div class="line">        i.setData(data);</div><div class="line">        this.startActivity(i);</div><div class="line">    &#125;</div><div class="line">    @Override</div><div class="line">    public void onRequestPermissionsResult(int requestCode, @NonNull String[] permissions, @NonNull int[] grantResults) &#123;</div><div class="line">        PermissionGen.onRequestPermissionsResult(this, requestCode, permissions, grantResults);</div><div class="line">    &#125;</div><div class="line">    //读写内存卡</div><div class="line">    public void randw() &#123;</div><div class="line">        PermissionGen.needPermission(this, 200,</div><div class="line">                new String[] &#123;</div><div class="line">                        Manifest.permission.WRITE_EXTERNAL_STORAGE,</div><div class="line">                &#125;</div><div class="line">        );</div><div class="line">    &#125;</div><div class="line">    @PermissionSuccess(requestCode = 200)</div><div class="line">    private void doSDCardPermission() &#123;</div><div class="line">        String url=&quot;http://images.csdn.net/20150817/1.jpg&quot;;</div><div class="line">        try &#123;</div><div class="line">            Bitmap bitmap = getHttpBitmap(url);//从网络获取图片</div><div class="line">            savePicture(bitmap);//保存图片到SD卡</div><div class="line">        &#125; catch (Exception e) &#123;</div><div class="line">            e.printStackTrace();</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    //以下部分是失效代码，仅仅用于表示获取图片意义</div><div class="line">    public Bitmap getHttpBitmap(String url)</div><div class="line">    &#123;</div><div class="line">        Bitmap bitmap = null;</div><div class="line">        try</div><div class="line">        &#123;</div><div class="line">            URL pictureUrl = new URL(url);</div><div class="line">            InputStream in = pictureUrl.openStream();</div><div class="line">            bitmap = BitmapFactory.decodeStream(in);</div><div class="line">            in.close();</div><div class="line">        &#125; catch (MalformedURLException e)</div><div class="line">        &#123;</div><div class="line">            e.printStackTrace();</div><div class="line">        &#125; catch (IOException e)</div><div class="line">        &#123;</div><div class="line">            e.printStackTrace();</div><div class="line">        &#125;</div><div class="line">        return bitmap;</div><div class="line">    &#125;</div><div class="line">    /**</div><div class="line">     * 保存图片</div><div class="line">     * @param bitmap</div><div class="line">     */</div><div class="line">    public void savePicture(Bitmap bitmap)</div><div class="line">    &#123;</div><div class="line">        if (Environment.getExternalStorageState().equals(Environment.MEDIA_MOUNTED))</div><div class="line">        &#123;</div><div class="line">            try</div><div class="line">            &#123;</div><div class="line">                File file = new File(Environment.getExternalStorageDirectory(),&quot;a.jpg&quot;);</div><div class="line">                FileOutputStream out = new FileOutputStream(file);</div><div class="line">                bitmap.compress(Bitmap.CompressFormat.JPEG, 100, out);</div><div class="line">                out.flush();</div><div class="line">                out.close();</div><div class="line">                Toast.makeText(this, &quot;保存成功&quot;, Toast.LENGTH_SHORT).show();</div><div class="line">            &#125; catch (Exception e)</div><div class="line">            &#123;</div><div class="line">                e.printStackTrace();</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/08/06/面向对象一/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Qiang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="飞奔的小猿猴">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/08/06/面向对象一/" itemprop="url">面向对象一</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-08-06T21:22:10+08:00">
                2017-08-06
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Net/" itemprop="url" rel="index">
                    <span itemprop="name">.Net</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="类"><a href="#类" class="headerlink" title="类"></a>类</h1><hr>
<pre><code>类是不占内存的，但是对象是占内存的，甚至可以说是对象的字段占内存的
因为字段是有初始值的。
但是静态类是占用内存的，因为其不能被实例化，也没有有对象，静态类包括其实例成员
都在静态存储区域。

属性：保护字段，对字段的复制和取值进行限定
属性的本质就是两个方法，set和get
属性不加修饰符，默认是private(只在当前类可访问)
</code></pre><hr>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">案例：</div><div class="line">class Person</div><div class="line">    &#123;</div><div class="line">        private string _name;//字段</div><div class="line">        public string Name //属性</div><div class="line">        &#123;</div><div class="line">            get &#123;</div><div class="line">					if (_name!=&quot;强强&quot;)</div><div class="line">					&#123;</div><div class="line">						return &quot;强强&quot;;</div><div class="line">					&#125;</div><div class="line">				return _name; &#125;</div><div class="line">            set &#123; _name = value; &#125;</div><div class="line">        &#125;</div><div class="line">		 public void show()</div><div class="line">        &#123;</div><div class="line">            Console.WriteLine(this.Name);//尽量使用返回属性，因为此时_name不走属性</div><div class="line">			//不会执行里面的判断。</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">使用：</div><div class="line">Person p = new Person();//实例化</div><div class="line">p.Name = &quot;呵呵&quot;;//初始化</div><div class="line">p.show();</div><div class="line">string info=p.Name;</div><div class="line">Console.WriteLine(info);</div></pre></td></tr></table></figure>
<h1 id="静态与非静态"><a href="#静态与非静态" class="headerlink" title="静态与非静态"></a>静态与非静态</h1><blockquote>
<p>静态成员必须使用类名去调用，而实例成员使用对象名调用。<br>静态函数中，只能访问静态成员，不允许访问实例成员。<br>实例函数中，既可以使用静态成员，也可以使用实例成员。<br>静态类，只能存在静态的实例成员。<br>静态类不能被实例化。<br>静态类只有在程序结束后才会释放资源。</p>
</blockquote>
<h1 id="构造函数"><a href="#构造函数" class="headerlink" title="构造函数"></a>构造函数</h1><blockquote>
<p>作用：帮助我们初始化对象</p>
</blockquote>
<ul>
<li>构造函数没有返回值，连void也不能写</li>
<li>构造函数的名称必须和类名一致</li>
<li>构造函数是可以有重载的</li>
<li>只要写了构造函数，则默认构造函数都被干掉了</li>
</ul>
<h1 id="this关键字"><a href="#this关键字" class="headerlink" title="this关键字"></a>this关键字</h1><blockquote>
<p>代表当前类的对象<br>在类中显示的调用本类的构造函数  :this</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">class Person</div><div class="line">    &#123;</div><div class="line">        private string _name;</div><div class="line">        public string Name</div><div class="line">        &#123;</div><div class="line">            get &#123;return _name; &#125;</div><div class="line">            set &#123; _name = value; &#125;</div><div class="line">        &#125;</div><div class="line">        private int _age;</div><div class="line">        public int Age</div><div class="line">        &#123;</div><div class="line">            get &#123; return _age; &#125;</div><div class="line">            set &#123; _age = value; &#125;</div><div class="line">        &#125;</div><div class="line">        //构造函数</div><div class="line">        public Person(int age,string name)</div><div class="line">        &#123;</div><div class="line">            this.Age = age;</div><div class="line">            this.Name = name;</div><div class="line">        &#125;</div><div class="line">		//构造函数的重载，但是为了避免重复书写this.Age等等，可以使用:this方式</div><div class="line">		//其实就是调用上面写的全面的构造函数，此构造只需要一个参数，但是为了调用</div><div class="line">		//上面两个的，需要给当前没有的参数，设置默认值。</div><div class="line">        public Person(string name):this(10,name)&#123;&#125;</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<h1 id="析构函数-释放资源"><a href="#析构函数-释放资源" class="headerlink" title="析构函数:释放资源"></a>析构函数:释放资源</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">在程序结束时候，执行</div><div class="line">class Person&#123;</div><div class="line">	~Person()&#123;</div><div class="line">	//一般gc会释放资源，但是有时间不确定性</div><div class="line">	//在析构函数中，就可以立刻释放资源，在程序结束时候</div><div class="line">	//所以里面可以做一些释放资源的操作</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<blockquote>
<p>补充：引用命名空间的时候，也要注意，class也要是public修饰，不然即使加了<br>引用也无效。</p>
</blockquote>
<h1 id="值类型和引用类型"><a href="#值类型和引用类型" class="headerlink" title="值类型和引用类型"></a>值类型和引用类型</h1><hr>
<pre><code>引用类型：string和自定义类和数组，存储在堆内存，在内有指针指向的时候，会在不确定的时间被
gc回收。
例如string str=&quot;abc&quot;
解析：str在栈内存中，存储的是地址，指向堆内存中的&quot;abc&quot;
值类型：int等，存储在栈内存中（值直接存储在栈内存中），超过作用域会自动销毁。
</code></pre><hr>
<h1 id="字符串"><a href="#字符串" class="headerlink" title="字符串"></a>字符串</h1><hr>
<pre><code>字符串不可变性：当一个字符串重新赋值之后，老值并没有被销毁，而是重新开辟一段存储空间
字符串赋值只是栈中存储的内存地址变化，真正堆内存中存储字符串不可变化。
所以可以把string看做一个char类型的只读数组，可以通过下标去访问字符串中的某一个元素
例如：string s=&quot;afns&quot;; s[0]结果就是a，但是不能这样去修改，因为是只读的
</code></pre><hr>
<hr>
<pre><code>字符串方法：
案例：如果想修改字符串某个元素，可以通过以下方式
string s = &quot;abcdefg&quot;;
char[] chs = s.ToCharArray();
chs[0] = &apos;m&apos;;
s = new string(chs);
Console.WriteLine(s);//mbcdefg
案例：stringBuilder和string对比
StringBuilder sb = new StringBuilder();
//创建计时器  导入命名空间alt shift f10
Stopwatch sw = new Stopwatch();
//开始计时
sw.Start();
for(int i = 0; i &lt; 1000; i++)
{
    sb.Append(i);
}
sw.Stop();//停止计时
Console.WriteLine(sw.Elapsed);//获取总共耗时时间
Console.WriteLine(sb.ToString());
但是如果是string，则时间很长，因为，每一次添加，string都会新开辟内存，很耗费时间。
</code></pre><hr>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">案例：忽略大小写比较</div><div class="line"> string s1 = &quot;c&quot;;</div><div class="line">string s2 = &quot;C&quot;;</div><div class="line">if (s1.Equals(s2,StringComparison.OrdinalIgnoreCase))//参数二，是一个枚举，代表忽略大小写</div><div class="line">&#123;</div><div class="line">    Console.WriteLine(true);</div><div class="line">&#125;</div><div class="line"></div><div class="line">案例：分割字符串</div><div class="line">string s = &quot;asd +  _  ,,  asdahjf&quot;;</div><div class="line">char[] chs = &#123; &apos;+&apos;, &apos;_&apos;, &apos;,&apos;, &apos; &apos;&#125;;</div><div class="line">string[] ns=s.Split(chs, StringSplitOptions.RemoveEmptyEntries);//参数二枚举，移除空项</div><div class="line"></div><div class="line">案例：字符串join</div><div class="line">string[] strs = &#123; &quot;张三&quot;,&quot;李四&quot;, &quot;王五&quot; &#125;;</div><div class="line">string ns = string.Join(&quot;|&quot;, strs);//参数一：是用作分隔符的字符串，参数二：可变参数，可放数组或对应类型的元素</div><div class="line">Console.WriteLine(ns);//张三|李四|王五</div></pre></td></tr></table></figure>
<hr>
<pre><code>补充：
Length:字符串字符的个数
ToUpper:字符串转大写
ToLower:字符串转小写
Contains:判断字符串是否包含子字符串
StartsWith:是否以子串开始
EndsWith:是否以子串结束
IndexOf:子串第一次出现的位置
LastIndexOf:从后往前第一次出现的位置
Trim:去除首尾空格
TrimEnd:去除尾部空格
TrimStart:去除首空格
string.IsNullOrEmpty:是否是null或者空
IndexOf(string value,int startIndex):value从startIndex开始第一次出现的位置(该位置的索引还是从字符串开始处开始计数)
Replace：将字符串出现的oldValue替换为newValue，并生成一个新字符串
SubString:取从位置startIndex开始一直到最后的子字符串
还有，取从位置startIndex开始长度为length的子字符串，如果子字符串长度不足则报错
</code></pre><hr>
<h1 id="继承"><a href="#继承" class="headerlink" title="继承"></a>继承</h1><hr>
<pre><code>public class Student :Person{}
子类继承父类的非私有的(字段，属性，方法)
子类并没有继承父类构造函数
子类先执行父类无参数构造函数（相当于创建了父类对象），因为子类可以使用父类属性方法，但是只有对象才能调用属性方法
所以子类内部先执行父类构造函数，在子类内部创建父类对象，剩下的子类使用父类属性方法等才能进行。
注意：如果当父类写了有参数的构造函数之后，则父类默认的无参数构造函数被干掉了，此时子类无法去调用父类无参数构造
所以会报错，解决方案：1.在父类重写无参构造。2.在子类中显示的调用父类的构造函数，使用关键字：base()
如下：Student是子类
//子类构造函数如下
public Student(string name,int age,char gender):base(name,age){
    //父类有参构造中已经初始化了name,age，则利用base避免代码重复
    this.Gender=gender;//Gender是属性
}
</code></pre><hr>
<blockquote>
<p>补充：子类和父类具有相同方法的时候，会有警告，此时需要在子类相同方法名前加上new，屏蔽父类方法<br>public new void show(){}，所以一般情况下，不要子父类出现相同的方法名。<br>new :1.创建对象  2.隐藏从父类继承来的成员。</p>
</blockquote>
<h2 id="里氏转换"><a href="#里氏转换" class="headerlink" title="里氏转换"></a>里氏转换</h2><blockquote>
<p>子类可以赋值给父类  Person p=new Student();<br>如果父类中装的是子类对象，那么可以讲这个父类强转为子类对象。<br>Student ss=(Student)p;</p>
</blockquote>
<h2 id="is和as"><a href="#is和as" class="headerlink" title="is和as"></a>is和as</h2><blockquote>
<p>is：转换成功返回true，否则返回false<br>一般用于里氏转换时候用于判断，避免转换失败的程序异常崩溃<br>if(p is Student)….</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line">使用案例：</div><div class="line"> class Program</div><div class="line">    &#123;</div><div class="line">        static void Main(string[] args)</div><div class="line">        &#123;</div><div class="line">            Person p = new Student();</div><div class="line">            if(p is Student)</div><div class="line">            &#123;</div><div class="line">                Student s = (Student)p;</div><div class="line">                s.show();</div><div class="line">            &#125;</div><div class="line">            Console.ReadKey();</div><div class="line">        &#125;</div><div class="line">     </div><div class="line">        </div><div class="line">    &#125;</div><div class="line">    class Person</div><div class="line">    &#123;</div><div class="line">        public new void show()</div><div class="line">        &#123;</div><div class="line">            Console.WriteLine(&quot;person显示&quot;);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    class Student : Person</div><div class="line">    &#123;</div><div class="line">        public new void show()</div><div class="line">        &#123;</div><div class="line">            Console.WriteLine(&quot;student显示&quot;);</div><div class="line">        &#125;</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<blockquote>
<p>在java中直接父类引用可以指向子类对象，Person p = new Student();然后p在调用子父类同名方法时候，调用<br>就是子类的，但是在C#中，直接如此是调用的父类方法，还需要 Student s = (Student)p;然后再调用。</p>
<p>as： 转换成功则返回对应的对象，否则返回null<br>Student t=p as Teacher</p>
<p>访问修饰符补充：protected  在子类当中也可以访问，其他和private相同(出了当前类无法访问)</p>
</blockquote>
<h1 id="集合"><a href="#集合" class="headerlink" title="集合"></a>集合</h1><blockquote>
<p>长度可以任意改变，类型随便<br>打印对象时候，打印出来的是对应的命名空间。</p>
</blockquote>
<h2 id="ArrayList"><a href="#ArrayList" class="headerlink" title="ArrayList"></a>ArrayList</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">案例：基本方法</div><div class="line">			ArrayList list = new ArrayList();</div><div class="line">            //添加单个元素</div><div class="line">            list.Add(1);</div><div class="line">            list.Add(true);</div><div class="line">            list.Add(&quot;字符串&quot;);</div><div class="line">            list.Add(&apos;c&apos;);</div><div class="line">            //添加数组或集合</div><div class="line">            list.AddRange(new string[] &#123; &quot;1&quot;, &quot;2&quot; &#125;);//如果此处使用add，下面打印此数组时候，打印的是命名空间</div><div class="line">            for(int a = 0; a &lt;list.Count; a++)</div><div class="line">            &#123;</div><div class="line">                Console.WriteLine(list[a]);</div><div class="line">            &#125;</div><div class="line">            //删除单个元素</div><div class="line">            list.Remove(true);</div><div class="line">            list.RemoveAt(0);//根据索引删除</div><div class="line">            list.RemoveRange(1, 2);//删除从所以1开始的，后面的两个元素，参数二是个数</div><div class="line">            list.Sort();//升序排列，但是必须可比较时候才能排列，不然异常</div><div class="line">            list.Reverse();//反转</div><div class="line">            list.Insert(1, &quot;呵呵&quot;);</div><div class="line">            list.InsertRange(1,new int[] &#123; 1, 2, 4 &#125;);//在1的位置插入数组或集合</div><div class="line">            list.Contains(1);//判断是否包含1，返回布尔值</div><div class="line">            Console.ReadKey();</div></pre></td></tr></table></figure>
<h3 id="长度和可容个数"><a href="#长度和可容个数" class="headerlink" title="长度和可容个数"></a>长度和可容个数</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">ArrayList list = new ArrayList();</div><div class="line">         Console.WriteLine(list.Count);//集合真实长度</div><div class="line">         Console.WriteLine(list.Capacity);//集合可包含元素的个数</div><div class="line">         //如果集合为空，则两者都是0</div><div class="line">         //如果向集合添加数据，则Capacity开始是4，如果Count大于4，则Capacity变为8</div><div class="line">         //如果Count大于8，则Capacity变为16，Capacity直接按照倍数增加。</div></pre></td></tr></table></figure>
<h2 id="HashTable-键值对集合-字典"><a href="#HashTable-键值对集合-字典" class="headerlink" title="HashTable  键值对集合 字典"></a>HashTable  键值对集合 字典</h2><blockquote>
<p>var 推断类型，在声明的同时必须初始化，因为var是根据值推断类型的。</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">基本案例：</div><div class="line">			Hashtable table = new Hashtable();</div><div class="line">            table.Add(1, &quot;测试1&quot;);</div><div class="line">            table.Add(2, &quot;测试2&quot;);</div><div class="line">            table.Add(3, &quot;测试3&quot;);</div><div class="line">            table[4] = &quot;测试4&quot;;//key不存在，则相当于add</div><div class="line">            table[3] = &quot;干掉测试3&quot;;//add不可重复，但是此种方式，相当于替换</div><div class="line">			//table.Contains   是否包含，返回布尔值</div><div class="line">            //table.ContainsKey  </div><div class="line">            //table.ContainsValue</div><div class="line">			table.Remove(3);//根据key，删除value</div><div class="line">            foreach (var item in table.Keys)</div><div class="line">            &#123;</div><div class="line">                Console.WriteLine(table[item]);</div><div class="line">            &#125;</div><div class="line">			//table.clear  清空</div><div class="line">注意：key必须唯一，value可重复，hashtable是先进后出结构。</div></pre></td></tr></table></figure>
<h2 id="泛型集合"><a href="#泛型集合" class="headerlink" title="泛型集合"></a>泛型集合</h2><blockquote>
<p>上面的集合，虽然存储时候，不限制数据类型，都是object类型存储，但是取出使用的时候还是要转成对应类型，比较麻烦。<br>泛型集合出现就是解决这个问题</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">注意：泛型集合几乎具有ArrayList所有方法，使用时候参照即可</div><div class="line">			//创建泛型集合</div><div class="line">            List&lt;int&gt; list = new List&lt;int&gt;();</div><div class="line">            list.Add(1);//上面类型确定，此处只能添加对应类型</div><div class="line">            list.AddRange(new int[] &#123; 1, 2, 3, 4 &#125;);</div><div class="line">            //list泛型集合可以转换成数组</div><div class="line">            int[] arr=list.ToArray();</div><div class="line">            //数组转集合</div><div class="line">            List&lt;int&gt; listTwo = arr.ToList();</div></pre></td></tr></table></figure>
<blockquote>
<p>补充：<br>装箱：值类型转换为引用类型<br>拆箱：引用类型转换为值类型<br>但是有个大前提，必须有继承关系，没有继承关系的话，是不可能发生装箱，拆箱的。<br>例如：int转object类型，就是装箱，反之拆箱<br>例如：int转stirng不是装箱拆箱，因为没有继承关系<br>拆箱装箱影响效率，应该尽量避免。</p>
</blockquote>
<h2 id="字典集合：也都具有hashtable几乎所有方法"><a href="#字典集合：也都具有hashtable几乎所有方法" class="headerlink" title="字典集合：也都具有hashtable几乎所有方法"></a>字典集合：也都具有hashtable几乎所有方法</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">案例：</div><div class="line">			Dictionary&lt;int, string&gt; dic = new Dictionary&lt;int, string&gt;();</div><div class="line">            dic.Add(1, &quot;测试1&quot;);</div><div class="line">            dic.Add(2, &quot;测试2&quot;);</div><div class="line">            dic[1] = &quot;替换&quot;;//和hashtable一样，此处是替换，但是不能是add，因为key唯一</div><div class="line">            foreach (var item in dic.Keys)</div><div class="line">            &#123;</div><div class="line">                Console.WriteLine(dic[item]);</div><div class="line">            &#125;</div><div class="line">            //但是字典集合有更方便的遍历方式，推荐此种方式</div><div class="line">            foreach (KeyValuePair&lt;int,string&gt; kv in dic)</div><div class="line">            &#123;</div><div class="line">                Console.WriteLine(&quot;&#123;0&#125;-----&#123;1&#125;&quot;, kv.Key, kv.Value);</div><div class="line">            &#125;</div></pre></td></tr></table></figure>
<h1 id="文件相关"><a href="#文件相关" class="headerlink" title="文件相关"></a>文件相关</h1><h2 id="path类：静态类"><a href="#path类：静态类" class="headerlink" title="path类：静态类"></a>path类：静态类</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">string str = @&quot;C:\Program Files\Elantech\a.mp3&quot;;</div><div class="line">         Path.GetFileName(str);//获取路径下文件名字</div><div class="line">         Path.GetFileNameWithoutExtension(str);//获取路径下文件名，但不包括扩展名</div><div class="line">         Path.GetExtension(str);//得到扩展名</div><div class="line">         Path.GetDirectoryName(str);//得到文件所处文件夹的名称</div><div class="line">         Path.GetFullPath(str);//得到文件全路径</div><div class="line">         Path.Combine(@&quot;c:\a&quot;,&quot;b.txt&quot;);//连接两个字符串作为路径</div></pre></td></tr></table></figure>
<h2 id="file类：静态类"><a href="#file类：静态类" class="headerlink" title="file类：静态类"></a>file类：静态类</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line">//创建文件</div><div class="line">         File.Create(@&quot;C:\Users\zqyfa\Desktop\a.txt&quot;);</div><div class="line">         //删除文件,不走回收站</div><div class="line">         File.Delete(@&quot;C:\Users\zqyfa\Desktop\a.txt&quot;);</div><div class="line">         //复制文件</div><div class="line">         File.Copy(@&quot;C:\Users\zqyfa\Desktop\a.txt&quot;, @&quot;C:\Users\zqyfa\Desktop\b.txt&quot;);</div><div class="line">string str = &quot;今天天气测试信息&quot;;</div><div class="line">         byte[] buffer = Encoding.Default.GetBytes(str);</div><div class="line">         //写入信息，文件可以不存在，会自动创建</div><div class="line">         /*</div><div class="line">          * WriteAllLines</div><div class="line">          * WriteAllText</div><div class="line">          * WriteAllBytes</div><div class="line">          * 以上三个都是会覆盖以前内容</div><div class="line">          * </div><div class="line">          * 如果不想覆盖，使用append对应三个方法</div><div class="line">          * File.AppendAllText等等</div><div class="line">          */</div><div class="line">         File.WriteAllBytes(@&quot;C:\Users\zqyfa\Desktop\a.txt&quot;, buffer);</div><div class="line">         //读取文件</div><div class="line">         byte[] b2=File.ReadAllBytes(@&quot;C:\Users\zqyfa\Desktop\a.txt&quot;);</div><div class="line">         string info = Encoding.Default.GetString(b2);</div><div class="line">         //以行的形式读取</div><div class="line">        string[] strs= File.ReadAllLines(@&quot;C:\Users\zqyfa\Desktop\a.txt&quot;, Encoding.Default);//参数二设置编码格式</div><div class="line">         //一次性读取整个文本内容</div><div class="line">         string str1 = File.ReadAllText(@&quot;C:\Users\zqyfa\Desktop\a.txt&quot;, Encoding.Default);</div></pre></td></tr></table></figure>
<h2 id="文件流"><a href="#文件流" class="headerlink" title="文件流"></a>文件流</h2><blockquote>
<p>file类对内存压力大，一次性读取，一般开发使用filestream文件流，对内存压力小<br>FileStream:操作字节<br>操作字符：<br>StreamReader，StreamWriter</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">案例：读取文件基本案例，但是此时没有循环读取，文件较大的时候，需要循环读取</div><div class="line">			//参数二：打开文件方式是枚举，参数三：读取操作方式(只读，读写等等)</div><div class="line">			FileStream fs = new FileStream(@&quot;文件路径&quot;, FileMode.OpenOrCreate, FileAccess.Read);</div><div class="line">            byte[] buffer = new byte[1024 * 1024 * 5];</div><div class="line">            //返回的是本次实际读取到的有效字节数,0指的是从文件开始出开始读取，读取长度是buffer.Lengt</div><div class="line">            //读取之后放到buffer中</div><div class="line">            int r = fs.Read(buffer, 0, buffer.Length);</div><div class="line">            //解码,0指的是从buffer的0处开始读取，解码长度是r，这样可以避免，多余的一次读取的无效字节</div><div class="line">            string s = Encoding.Default.GetString(buffer,0,r);//Encoding后面还可以是utf-8等值</div><div class="line">            //关闭流</div><div class="line">            fs.Close();</div><div class="line">            //释放资源</div><div class="line">            fs.Dispose();</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line">案例1:写入数据</div><div class="line">using (FileStream fsWriter = new FileStream(@&quot;文件路径&quot;, FileMode.Append, FileAccess.Write))</div><div class="line">&#123;</div><div class="line">    string s = &quot;我是要覆盖的信息&quot;;</div><div class="line">    byte[] bs=Encoding.Default.GetBytes(s);</div><div class="line">    fsWriter.Write(bs,0,bs.Length);</div><div class="line">&#125;</div><div class="line">使用using不需要关闭流，释放资源等，系统会自动操作。</div><div class="line"></div><div class="line">案例：复制多媒体文件</div><div class="line"> using (FileStream fsr = new FileStream(@&quot;C:\Users\zqyfa\Desktop\a\1、复习.avi&quot;, FileMode.OpenOrCreate, FileAccess.Read))</div><div class="line">            &#123;</div><div class="line">                using (FileStream fsw=new FileStream(@&quot;C:\Users\zqyfa\Desktop\a\b.avi&quot;, FileMode.OpenOrCreate, FileAccess.Write))</div><div class="line">                &#123;</div><div class="line">                    byte[] bys = new byte[1024 * 5 * 1024];</div><div class="line">                    while (true)</div><div class="line">                    &#123;</div><div class="line">                        int num=fsr.Read(bys,0,bys.Length);</div><div class="line">                        if (num==0)//num=0证明文件读取完毕了</div><div class="line">                        &#123;</div><div class="line">                            break;</div><div class="line">                        &#125;</div><div class="line">                        fsw.Write(bys, 0, num);</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">            &#125;</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">案例2：字符输入输出流</div><div class="line">			//写入</div><div class="line">            //true代表是否追加(默认false，覆盖)，还可以设置编码查看不同构造即可</div><div class="line">            using(StreamWriter sw=new StreamWriter(@&quot;C:\Users\Administrator\Desktop\a.txt&quot;,true))</div><div class="line">            &#123;</div><div class="line">                string info = &quot;我是测试文本&quot;;</div><div class="line">                sw.Write(info);</div><div class="line">            &#125;</div><div class="line">            //读取</div><div class="line">            using (StreamReader sr=new StreamReader(@&quot;C:\Users\Administrator\Desktop\a.txt&quot;,Encoding.UTF8))</div><div class="line">            &#123;</div><div class="line">                while (!sr.EndOfStream)//是否流结束</div><div class="line">                &#123;</div><div class="line">                    Console.WriteLine(sr.ReadLine());</div><div class="line">                &#125;</div><div class="line">            &#125;</div></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/08/06/面向对象二/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Qiang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="飞奔的小猿猴">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/08/06/面向对象二/" itemprop="url">面向对象二</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-08-06T21:22:10+08:00">
                2017-08-06
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Net/" itemprop="url" rel="index">
                    <span itemprop="name">.Net</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="多态"><a href="#多态" class="headerlink" title="多态"></a>多态</h1><blockquote>
<p>实现多态的3种手段：1、虚方法 2、抽象类 3、接口</p>
</blockquote>
<h2 id="虚方法"><a href="#虚方法" class="headerlink" title="虚方法"></a>虚方法</h2><blockquote>
<p>将父类的方法标记为虚方法，使用关键字virtual,这个函数可以被子类重写<br>在子类的方法标记override</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line">基本案例：</div><div class="line">class Program</div><div class="line">    &#123;</div><div class="line">        static void Main(string[] args)</div><div class="line">        &#123;</div><div class="line">            Person p = new Student(&quot;强哥&quot;);</div><div class="line">            p.sayHello();//输出 强哥是学生</div><div class="line">            Console.ReadKey();</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    class Person</div><div class="line">    &#123;</div><div class="line">        private string _name;</div><div class="line">        public string Name</div><div class="line">        &#123;</div><div class="line">            get &#123; return _name; &#125;</div><div class="line">            set &#123; _name = value; &#125;</div><div class="line">        &#125;</div><div class="line">        public Person(string name)</div><div class="line">        &#123;</div><div class="line">            this.Name = name;</div><div class="line">        &#125;</div><div class="line">        public virtual void sayHello()//虚方法</div><div class="line">        &#123;</div><div class="line">            Console.WriteLine(&quot;&#123;0&#125;，是人类&quot;, Name);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    class Student : Person</div><div class="line">    &#123;</div><div class="line">        public Student(string name) : base(name)</div><div class="line">        &#123;</div><div class="line">        &#125;</div><div class="line">        public override void sayHello()//重写</div><div class="line">        &#123;</div><div class="line">            Console.WriteLine(&quot;&#123;0&#125;,是学生&quot;, Name);</div><div class="line">        &#125;</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<h2 id="抽象类"><a href="#抽象类" class="headerlink" title="抽象类"></a>抽象类</h2><blockquote>
<p>当父类中的方法不知道如何实现的时候，可以考虑将父类写成抽象类，方法写成抽象方法<br>抽象类可以存在非抽象成员，抽象本身没法实例化无法使用，但是其子类可以使用其非抽象成员。<br>抽象成员必须在抽象类当中。<br>子类继承抽象类后，必须把父类中的所有抽象成员都重写，除非子类也是抽象类<br>抽象类是否构造函数的，虽然不能被实例化</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">基本案例：</div><div class="line">class Program</div><div class="line">    &#123;</div><div class="line">        static void Main(string[] args)</div><div class="line">        &#123;</div><div class="line">            Animal a = new Dog();//注意抽象类不能实例化，所以此处使用其子类</div><div class="line">            a.show();</div><div class="line">            Console.ReadKey();</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    abstract class Animal</div><div class="line">    &#123;</div><div class="line">        public abstract void show();//抽象方法不能有方法体</div><div class="line">    &#125;</div><div class="line">    class Dog : Animal</div><div class="line">    &#123;</div><div class="line">        public override void show()</div><div class="line">        &#123;</div><div class="line">            Console.WriteLine(&quot;狗再叫&quot;);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">解析：抽象类中抽象方法，存在的唯一意义，就是让子类重写，所以不论是虚方法，</div><div class="line">还是抽象类，本质都是子类重写方法实现多态。</div></pre></td></tr></table></figure>
<h1 id="修饰符"><a href="#修饰符" class="headerlink" title="修饰符"></a>修饰符</h1><hr>
<pre><code>public :公开的
private:私有的，只能当前类内部访问
protected:受保护的，当前类和其子类访问
internal：只能在当前程序集中访问
protected internal: protected+internal

能够修饰类的访问修饰符：public internal(默认)
子类访问权限不能高于父类
</code></pre><hr>
<h1 id="简单工厂设计模式"><a href="#简单工厂设计模式" class="headerlink" title="简单工厂设计模式"></a>简单工厂设计模式</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div></pre></td><td class="code"><pre><div class="line">基本案例：</div><div class="line">namespace ConsoleApp2</div><div class="line">&#123;</div><div class="line">    class Program</div><div class="line">    &#123;</div><div class="line">        static void Main(string[] args)</div><div class="line">        &#123;</div><div class="line"></div><div class="line">            string info = Console.ReadLine();</div><div class="line">            factory(info);</div><div class="line">            Console.ReadKey();</div><div class="line">        &#125;</div><div class="line">		//工厂方法</div><div class="line">        public static void factory(string info)</div><div class="line">        &#123;</div><div class="line">            NoteBook nb = null;</div><div class="line">            switch (info)</div><div class="line">            &#123;</div><div class="line">                case &quot;联想&quot;:nb = new Lenovo();</div><div class="line">                    break;</div><div class="line">                case &quot;宏基&quot;:nb = new Acer();</div><div class="line">                    break;</div><div class="line">            &#125;</div><div class="line">            nb.show();</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    public abstract class NoteBook</div><div class="line">    &#123;</div><div class="line">        public abstract void show();</div><div class="line">    &#125;</div><div class="line">    public class Lenovo : NoteBook</div><div class="line">    &#123;</div><div class="line">        public override void show()</div><div class="line">        &#123;</div><div class="line">            Console.WriteLine(&quot;联想&quot;);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    public class Acer : NoteBook</div><div class="line">    &#123;</div><div class="line">        public override void show()</div><div class="line">        &#123;</div><div class="line">            Console.WriteLine(&quot;宏基&quot;);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="值传递和引用传递"><a href="#值传递和引用传递" class="headerlink" title="值传递和引用传递"></a>值传递和引用传递</h1><hr>
<pre><code>值类型：int double char decimal bool enum struct   栈存储  原先值不随修改修改而修改
引用类型：string 数组 自定义类 集合 object 接口    堆存储  随之变化
特殊：字符串虽然是引用类型，但是是不可变的，所以结果类似值传递。
ref的作用：把原先的值传递变化为了引用传递
</code></pre><hr>
<h1 id="序列化和反序列化"><a href="#序列化和反序列化" class="headerlink" title="序列化和反序列化"></a>序列化和反序列化</h1><ul>
<li>序列化：将对象转换为二进制</li>
<li>反序列化：将二进制转化为对象</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line">案例：</div><div class="line">			Person p=new Person();</div><div class="line">            p.Name = &quot;强哥&quot;;</div><div class="line">            using (FileStream fsw = new FileStream(@&quot;C:\Users\zqyfa\Desktop\a.txt&quot;, FileMode.Open, FileAccess.Write))</div><div class="line">            &#123;</div><div class="line">                //开始序列化对象</div><div class="line">                BinaryFormatter bf = new BinaryFormatter();</div><div class="line">                //序列化</div><div class="line">                bf.Serialize(fsw, p);</div><div class="line">            &#125;</div><div class="line">            using (FileStream fsr = new FileStream(@&quot;C:\Users\zqyfa\Desktop\a.txt&quot;, FileMode.Open, FileAccess.Read))</div><div class="line">            &#123;</div><div class="line">                BinaryFormatter bf = new BinaryFormatter();</div><div class="line">                //反序列化</div><div class="line">                p = (Person)bf.Deserialize(fsr);</div><div class="line">                Console.WriteLine(p.Name);</div><div class="line">            &#125;</div><div class="line">            Console.ReadKey();</div><div class="line">//下面是要被序列化的类，该类必须被 [Serializable] 标记</div><div class="line"> [Serializable]  //要被序列化的类标记下</div><div class="line">    class Person</div><div class="line">    &#123;</div><div class="line">        private string _name;</div><div class="line">        public string Name</div><div class="line">        &#123;</div><div class="line">            get &#123; return _name; &#125;</div><div class="line">            set &#123; _name = value; &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<h1 id="部分类"><a href="#部分类" class="headerlink" title="部分类"></a>部分类</h1><hr>
<pre><code>在同一文件下，不能出现两个名称相同的类，但是partial改变了这一结论
public partial class Person{}
public partial class Person{}
这就叫部分类，这两个类可以看作一个类，所有成员共用，其实就是一个类
</code></pre><hr>
<h1 id="密封类"><a href="#密封类" class="headerlink" title="密封类"></a>密封类</h1><blockquote>
<p>密封类不可以被其他类继承，但是可以继承其他类，使用关键字sealed<br>public sealed class Person{}</p>
</blockquote>
<h1 id="重写父类ToString方法"><a href="#重写父类ToString方法" class="headerlink" title="重写父类ToString方法"></a>重写父类ToString方法</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">class Person</div><div class="line">    &#123;</div><div class="line">        public override string ToString()</div><div class="line">        &#123;</div><div class="line">            return &quot;hello&quot;;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">此时Person类重写就是父类的虚方法ToString，否则直接打印的就是Person的命名空间</div></pre></td></tr></table></figure>
<h1 id="自动属性"><a href="#自动属性" class="headerlink" title="自动属性"></a>自动属性</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">public int Age&#123;</div><div class="line">	get;</div><div class="line">	set;</div><div class="line">&#125;</div><div class="line">自动属性书写更简便，效果等同字段加属性，唯一区别就是不能加限定。</div></pre></td></tr></table></figure>
<h1 id="接口"><a href="#接口" class="headerlink" title="接口"></a>接口</h1><hr>
<pre><code>要使用多继承的时候使用接口，此处区分java,java中继承实现分开，c#不分开
如果继承时候多继承类不行，但是多继承接口是可以得。
接口中成员不可以添加访问修饰符，默认就是public
接口中不能出现有方法体的成员
接口中不能包含字段
接口中可以包含自动属性
接口中可以有方法，属性(必须是自动属性)，索引器，这三者本质都是方法
静态类，抽象类，接口不可被实例化
接口必须先继承类，在继承接口
</code></pre><hr>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">接口基本案例：</div><div class="line">class Student : Person</div><div class="line">    &#123;</div><div class="line">        public void show()</div><div class="line">        &#123;</div><div class="line">            Console.WriteLine(&quot;实现接口方法&quot;);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    public interface Person</div><div class="line">    &#123;</div><div class="line">        void show();</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<h1 id="显示接口：解决方法重名问题"><a href="#显示接口：解决方法重名问题" class="headerlink" title="显示接口：解决方法重名问题"></a>显示接口：解决方法重名问题</h1><blockquote>
<p>当接口和子类中方法名相同的时候，但是又想让子类同名方法不是多态的实现形式，而是<br>子类自己的方法(不是重写)。<br>类中默认访问修饰符石private<br>类中void Ifly.fly()，不能被访问修饰符修饰，这是固定写法，但是类中方法默认是private，<br>按理说，在外面调用时候是不能被调用，但是此时void Ifly.fly()其实是接口中方法的实现，<br>而接口中默认修饰符是public，所以外部能访问</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">class Bird : Ifly</div><div class="line">    &#123;</div><div class="line">        public void fly()</div><div class="line">        &#123;</div><div class="line">            Console.WriteLine(&quot;鸟在飞&quot;);</div><div class="line">        &#125;</div><div class="line">        /// &lt;summary&gt;</div><div class="line">        /// 显示接口</div><div class="line">        /// &lt;/summary&gt;</div><div class="line">        void Ifly.fly()//这就是显示接口</div><div class="line">        &#123;</div><div class="line">            Console.WriteLine(&quot;我是接口的飞&quot;);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    public interface Ifly</div><div class="line">    &#123;</div><div class="line">        void fly();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">//调用</div><div class="line">Ifly ifly = new Bird();</div><div class="line">ifly.fly();//接口飞</div><div class="line">Bird b = new Bird();</div><div class="line">b.fly();//鸟飞</div></pre></td></tr></table></figure>
<blockquote>
<p>总结：虚方法，抽象类，接口实现多态使用场景区别<br>虚方法：能抽取父类时候<br>抽象类：父类不知道如何实现的时候<br>接口：没有共同父类，但是可能有共同行为(例如飞)的时候</p>
<p>补充：<br>产生不会重复的唯一编码，使用Guid<br>因为Guid是一个结构体，内部有属性有方法，具体可以细细研究<br>产生唯一编码：Guid.NewGuid()即可。 </p>
</blockquote>
<h1 id="MD5加密"><a href="#MD5加密" class="headerlink" title="MD5加密"></a>MD5加密</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">MD5加密不可逆</div><div class="line">基本案例：</div><div class="line">			//md5是抽象类，不能直接实例化</div><div class="line">            MD5 md5 = MD5.Create();</div><div class="line">            string info = &quot;我是要加密的信息&quot;;</div><div class="line">            byte[] buffer = Encoding.Default.GetBytes(info);</div><div class="line">            byte[] nb=md5.ComputeHash(buffer);</div><div class="line">            Console.WriteLine(Encoding.Default.GetString(nb));</div><div class="line">但是如上方式，输出值，都是乱码，但是此乱码不是编码格式造成的。</div><div class="line">因为按照如上方式，可能把对应字符连接组成汉字等等，所以需要采用</div><div class="line">把buffer中每个元素都tostring然后连接，才能避免乱码。</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">完整案例：</div><div class="line">			MD5 md5 = MD5.Create();</div><div class="line">            string info = &quot;我是要加密的信息&quot;;</div><div class="line">            byte[] buffer = Encoding.Default.GetBytes(info);</div><div class="line">            byte[] nb=md5.ComputeHash(buffer);</div><div class="line">            string nbinfo=&quot;&quot;;</div><div class="line">            for (int i = 0; i &lt; nb.Length; i++)</div><div class="line">            &#123;</div><div class="line">                nbinfo += nb[i].ToString();</div><div class="line">				//nbinfo += nb[i].ToString(&quot;x&quot;);这样的话就会将十进制字符串转成16进制</div><div class="line">            &#125;</div><div class="line">            Console.WriteLine(nbinfo);</div></pre></td></tr></table></figure>
<blockquote>
<p>补充：ToString添加不同参数有不同效果，例如转换成金额，日期等等。<br>ToString(“x2”)<br>x为 十六进制<br>2为  每次都是两位数<br>比如 0x0A ,若没有2，就只会输出0xA<br>假设两个数10和26<br>正常情况下十六进制显示0xA,0x1A,看起来不整齐<br>如果为x2,则为0x0A,0x1A。</p>
</blockquote>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/5/">5</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.jpg"
               alt="Qiang" />
          <p class="site-author-name" itemprop="name">Qiang</p>
           
              <p class="site-description motion-element" itemprop="description"></p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives/">
                <span class="site-state-item-count">48</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              <a href="/categories/index.html">
                <span class="site-state-item-count">9</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

        


      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Qiang</span>
</div>


<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>


        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.2"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.2"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.2"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.2"></script>



  
    <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.2"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.2"></script>

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.2"></script>



  


  




	





  





  






  





  

  

  

  

  

  

</body>
</html>
